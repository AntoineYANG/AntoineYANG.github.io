{"version":3,"sources":["v2/methods/typedict.ts","v2/methods/selection.ts","v2/preference/Color.ts","v2/themes/BackgroundCanvas.tsx","v2/themes/Yuki.tsx","v2/methods/globals.ts","v2/compo/Navigator.tsx","v2/compo/SettingsButton.tsx","v2/methods/toast.ts","v2/methods/decorator.ts","v2/methods/copy.ts","v2/compo/InfoView.tsx","v2/compo/HomeButton.tsx","v2/compo/InitComponent.tsx","v2/compo/ListView.tsx","v2/methods/display.tsx","v2/compo/InterestView.tsx","v2/methods/arrayhelper.ts","v2/constant/InfoSet.ts","v2/compo/InlineHTML.tsx","v2/compo/LanguageChart.tsx","v2/compo/SettingItem.tsx","v2/compo/ProductView.tsx","v2/compo/ScrollTop.tsx","v2/compo/ContactMe.tsx","v2/compo/PageFlow.tsx","v2/routers/Home.tsx","v2/routers/BadUrl.tsx","v2/routers/Settings.tsx","v2/compo/ResponsiveComponent.tsx","v2/methods/screen.ts","v2/compo/BilibiliFlv.tsx","v2/routers/ProductDetail.tsx","v2/AppV2.tsx","v3/tools/WheelEventManager.ts","v3/reducers/LangConfig.ts","v3/design/design.ts","v3/reducers/SchemeConfig.ts","v3/cards/Card.tsx","v3/TypesV3.ts","v3/containers/PageFlow.tsx","v3/cards/WelcomeCard.tsx","v3/interactive/LinkButton.tsx","v3/pages/Home.tsx","v3/interactive/ButtonGroup.tsx","v3/pages/BadUrl.tsx","v3/pages/Papers.tsx","v3/interactive/InputYou.tsx","v3/tools/SHA256.ts","v3/coveries/PermissionCheck.tsx","v3/pages/StoragePage.tsx","v3/interactive/LangOption.tsx","v3/interactive/SchemeOption.tsx","v3/containers/OptionMenu.tsx","v3/AppV3.tsx","v3/reducers/PageConfig.ts","App.tsx","serviceWorker.ts","v3/reducers/index.ts","index.tsx"],"names":["PageBody","Component","getStyle","e","name","style","parentElement","toHsl","color","h","s","l","a","startsWith","r","g","b","length","parseInt","alpha","substr","paths","substring","indexOf","split","parseFloat","max","Math","min","code","toRgb","hsl","params","q","p","h_k","t_r","t_g","t_b","floor","getRgba","colorSet","match","Color","linearGradient","colorset","direction","steps","forEach","value","push","map","index","setLightness","degree","interpolate","color1","color2","step","mode","hsl1","hsl2","isNaN","rgb1","rgb2","Nippon","list","Nadesiko","Koubai","Suou","Taikou","Ikkonzome","Kuwazome","Momo","Ichigo","Usubeni","Imayou","Nakabeni","Sakura","Umenezumi","Karakurenai","Enzi","Kurenai","Toki","Tyousyunn","Kokiake","SakuraNezumi","Zinnzamomi","Azuki","Suoukou","Akabeni","Sinnsyu","Haizakura","Kuriume","Ebitya","Ginnsyu","Kurotobi","Syozyohi","Kinntya","Yamabuki","Torinoko","Touou","Ukonn","Nae","Tokiwa","Midori","Rokusyou","Mizuasagi","Seiheki","Mizu","Kuroturubami","Kati","Ruri","Rurikonn","Berimidori","Nibi","Aonibi","Sionn","Hasita","Tutuzi","Gohunn","Aisumitya","Kesizumi","Sumi","Kuro","Ro","window","BackgroundCanvas","props","canvas","ctx","canvas2","ctx2","state","curTheme","initTheme","React","createRef","key","ref","this","width","height","position","top","left","zIndex","children","pointerEvents","Shared","version","$","css","current","getContext","on","mouseListener","touchListener","start","unbind","end","renderingState","prev","Date","getTime","setTime","val","Yuki","colortab","base","border","background","frontground","frontground2","frontground3","videoController","btnPlay","cx","cy","fill","d","stroke","btnStop","progStyle","progressBase","y","progressBuffer","progressCurrent","progressFlag","x","transform","displayVolume","muted","volume","f","PI","tickC","innerWidth","ticks","Array","_","i","x1","cos","x2","y1","sin","y2","strokeWidth","canvasRender","event","logs","time","ft","t","log","dt","filter","sort","slice","fontSize","w","font","textAlign","textBaseline","reverse","globalAlpha","fillStyle","fillRect","fillText","type","next","round","toFixed","dataState","getMilliseconds","beginPath","arc","data","items","particals","backgroundColor","cursor","paint","clearTimeout","span","animationFPS","realSpan","realFPS","autoFPS","ita","u","sqrt","clearRect","nextList","nextParticals","item","dist","gradient","createRadialGradient","addColorStop","moveTo","lineTo","closePath","dx","random","ri","pow","abs","prevDx","dd","prevDd","particalEffects","animation","opacity","ms","particalOpacity","size","cursorState","strokeStyle","lineWidth","possibility","active","setTimeout","clientX","clientY","pressed","selection","document","getSelection","toString","focusNode","getSelectedElement","nodeName","lightness","lightness2","sx","sy","c","life","touches","j","theme","Navigator","display","timers","className","alignItems","minWidth","maxWidth","padding","flexDirection","justifyContent","overflow","onMouseOver","onMouseOut","onClick","timer","element","currentTarget","sibling","previousElementSibling","child","ol","clientWidth","text","W","SettingsButton","to","textDecoration","margin","viewBox","letterSpacing","toast","flag","apply","arguments","debounced","createElement","wordBreak","innerText","body","appendChild","animate","fadeOut","remove","clip","onload","userSelect","InfoView","minHeight","boxShadow","replace","onMouseEnter","onMouseLeave","href","target","aria-hidden","fillRule","title","callback","navigator","userAgent","toLocaleLowerCase","includes","removeAllRanges","range","createRange","selectNodeContents","addRange","execCommand","execCopy","src","alt","onDragStart","preventDefault","HomeButton","svg","InitComponent","setState","init","ListView","pageInput","pageCount","pageId","ceil","maxPerPage","onKeyPress","which","marginRight","whiteSpace","article","idx","borderLeft","borderBottom","displayPaperInfo","paddingRight","authors","author","join","fontStyle","publishingPlace","pageRange","year","displayBookmark","marginLeft","url","InterestView","flexWrap","marginBottom","borderRight","borderRadius","find","each","InfoSet","papers","bookmarks","products","id","role","languages","rate","techs","beginTime","closeTime","githubURL","avatarURL","description","videoURL","InlineHTML","innerHTML","html","console","error","LanguageChart","offset","proj","label","textOverflow","SettingItem","SettingValueBar","resizeListener","dragging","curVal","default","resize","bind","wordWrap","rx","ry","fillOpacity","onMouseDown","ev","parent","mouseMoveListener","attr","setter","formatter","previewChanging","addEventListener","mouseUpListener","valueChanged","removeEventListener","onTouchMove","getBoundingClientRect","textAnchor","off","SettingRadio","ProductView","detail","colorf","marginTop","objectFit","jumpTo","fontWeight","WebkitBoxOrient","WebkitLineClamp","tech","root","exec","location","ScrollTop","scrollTop","ContactMe","borderTop","PageFlow","wheelEvent","container","cdHolder","aniDirection","offsetTop","scrollY","bottom","offsetHeight","content","firstElementChild","deltaY","prevPage","nextPage","innerHeight","scrollTo","scrollX","passive","resetListener","clearTimers","shiftTo","Home","BadUrl","Settings","fpsSetter","fpsRadio","fpsUpdater","setInterval","clearInterval","ResponsiveComponent","_windowResizeListener","componentWillResize","forceUpdate","componentDidMount","componentDidMountRE","componentWillUnmount","WIDTH","HEIGHT","isFullScreen","fullscreenElement","scrollHeight","screen","scrollWidth","BilibiliFlv","dom","prog","progBar","control","progBase","progBuffer","progCurrent","progFlag","timetip","speedmenu","controller","progW","scaling","focus","copy","videoState","timerCanvas","keyDownLock","gesture","maxLogLength","BilibiliFlvControlDefault","autoPlay","duration","buffered","curTime","speedId","loadController","handleCanvasRender","sec","minutes","seconds","padStart","onMouseMove","showController","handleKeyPress","stopPropagation","onKeyDown","handleKeyDown","onKeyUp","x0","y0","H","clientHeight","value0","dmx","dmy","currentTime","writeLog","v","touchMoveListener","touchEndListener","onContextMenu","onDoubleClick","playOrPause","onCanPlay","parseVideoState","readyState","onTimeUpdate","onPlayEnd","pause","play","maxHeight","toTimeString","flex","scaleY","k","paused","displaySpeed","PLAYBACKRATE","show","hide","displaySpeedDialog","playbackRate","btnExitFullScreen","btnFullScreen","fullScreen","getSnapshot","flvjs","isSupported","flvPlayer","createPlayer","attachMediaElement","load","flvPlayerSS","adjustBox","offsetWidth","ready","offsetLeft","adjustProgress","op","possibleKeysCanceling","possibleKeysRequesting","setAttribute","fadeIn","endsWith","setVolume","shift","videoReadyState","o","randomId","append","speed","options","curId","handler","ProductDetail","lineHeight","AppV2","path","exact","component","overflowY","WheelEventInfo","pageLang","language","initLang","initData","lang","LangConfig","Object","assign","LangRedux","dispatch","setLang","Fonts","CH","EN","JP","Design","black","gold","white","modeD","matchMedia","modeL","matches","SchemeConfig","scheme","SchemeRedux","setScheme","FfTextNodeV3","connect","TextNodeV3","HTMLNodeV3","CardSchemeLight","createStyle","CardSchemeDark","Card","CardFf","TextV3","twinkle","createAnimation","upExit","upEnter","undefined","downExit","downEnter","PageFlowStyle","timingFunction","iterationCount","right","writingMode","connectStyle","keyDownEvent","touched","originY","showTip","IsWheelEventValid","onTouchStart","screenY","onTouchEnd","tabIndex","fontFamily","classList","add","WelcomeCardStyle","WelcomeCard","_props","StyleWrapper","useStyleWrapper","paddingTop","paddingBottom","LinkButtonStyleLight","transition","LinkButtonStyleDark","LinkButtonFf","LinkButton","useRef","useLayoutEffect","handle","trigger","click","ButtonGroupStyle","ButtonGroup","Papers","InputYou","spellCheck","outline","SHA256","rstr2hex","rstr_sha256","str2rstr_utf8","binb2rstr","binb_sha256","rstr2binb","input","hex_tab","output","charCodeAt","charAt","String","fromCharCode","sha256_S","X","n","sha256_R","sha256_Ch","z","sha256_Maj","sha256_Sigma0256","sha256_Sigma1256","sha256_Gamma0256","sha256_K","m","T1","T2","HASH","safe_add","lsw","PermissionCheck","getElementsByTagName","caretColor","hashCode","onExit","StoragePage","btnReturn","useState","portal","anchor","useEffect","permitted","ReactDOM","createPortal","getElementById","FfLangOption","opened","LangOption","FfSchemeOption","SchemeOption","OptionMenuSchemeLight","OptionMenuSchemeDark","OptionMenu","AppSchemeLight","scrollBehavior","textRendering","AppSchemeDark","AppV3","useStyle","baseFrequency","numOctaves","in","scale","jumpToVersion","versionID","PageConfig","PageConfigRedux","App","Boolean","hostname","rootReducers","combineReducers","action","clAction","store","createStore","render","StrictMode","serviceWorker","then","registration","unregister","catch","message"],"mappings":"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AAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WAG5vFC,SAA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AM,OACNiI,MAAO,6FACP+C,IAAK,0CACN,CACChL,KAAM,OACNiI,MAAO,wLACP+C,IAAK,0CACN,CACChL,KAAM,OACNiI,MAAO,sFACP+C,IAAK,mEACN,CACChL,KAAM,OACNiI,MAAO,oGACP+C,IAAK,0CAQTW,SAAU,CAAC,CACP7Z,KAAM,+CACN8Z,GAAI,SACJC,KAAM,SACNC,UAAW,CAAC,CACRha,KAAM,aACNia,KAAM,MACP,CACCja,KAAM,MACNia,KAAM,IACP,CACCja,KAAM,OACNia,KAAM,MACP,CACCja,KAAM,MACNia,KAAM,OAEVC,MAAO,CAAC,UAAW,SAAU,UAAW,SACxCC,UAAW,CAAC,OAAQ,MACpBC,UAAW,CAAC,OAAQ,MACpBC,UAAW,wCACXC,UAAW,6DACXC,YACI,kIAGL,CACCva,KAAM,wBACN8Z,GAAI,SACJC,KAAM,WACNC,UAAW,CAAC,CACRha,KAAM,aACNia,KAAM,MACP,CACCja,KAAM,MACNia,KAAM,MACP,CACCja,KAAM,SACNia,KAAM,MACP,CACCja,KAAM,QACNia,KAAM,OAEVC,MAAO,CAAC,QAAS,SAAU,SAAU,SACrCC,UAAW,CAAC,OAAQ,MACpBC,UAAW,CAAC,OAAQ,MACpBC,UAAW,GACXC,UAAW,6DACXC,YACI,2GAGL,CACCva,KAAM,UACN8Z,GAAI,SACJC,KAAM,aACNC,UAAW,CAAC,CACRha,KAAM,aACNia,KAAM,MACP,CACCja,KAAM,SACNia,KAAM,MACP,CACCja,KAAM,OACNia,KAAM,MACP,CACCja,KAAM,aACNia,KAAM,MACP,CACCja,KAAM,MACNia,KAAM,OAEVC,MAAO,CAAC,QAAS,SAAU,SAC3BC,UAAW,CAAC,OAAQ,MACpBC,UAAW,CAAC,OAAQ,MACpBC,UAAW,yCACXC,UAAW,wGAEXC,YACI,8mBAUL,CACCva,KAAM,iCACN8Z,GAAI,SACJC,KAAM,WACNC,UAAW,CAAC,CACRha,KAAM,aACNia,KAAM,MACP,CACCja,KAAM,SACNia,KAAM,MACP,CACCja,KAAM,MACNia,KAAM,MACP,CACCja,KAAM,MACNia,KAAM,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","file":"static/js/main.474a41eb.chunk.js","sourcesContent":["/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-08-28 20:55:09 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-09-15 11:41:58\r\n */\r\n\r\nimport { Component } from \"react\";\r\nimport { BilibiliFlvControlAppearance } from \"../compo/BilibiliFlv\";\r\n\r\n\r\n/**\r\n * 当定义一个页面主体的元素时，\r\n * 使用 PageBody 类型代表一个接受空 props 初始化的 React 组件.\r\n * \r\n * @export\r\n * @class PageBody\r\n * @extends {Component<{}, S>}\r\n * @template S 组件的 state 的类型\r\n */\r\nexport class PageBody<S> extends Component<{}, S> {};\r\n\r\n/**\r\n * 以\"年+月\"表示的时间.\r\n */\r\nexport type YearMonthLike = [string, string] | [number, number] | \"-\";\r\n\r\n/**\r\n * 语言.\r\n */\r\nexport type Language = \"JavaScript\" | \"TypeScript\" | \"C++\" | \"HTML\" | \"CSS\" | \"Other\"\r\n    | \"Python\";\r\n\r\n/**\r\n * 语言的使用信息.\r\n */\r\nexport type LanguageInfo = {\r\n    name: Language;\r\n    rate: number;\r\n};\r\n\r\n/**\r\n * 技术.\r\n */\r\nexport type Tech = \"Express\" | \"React\" | \"D3.js\" | \"JQuery\" | \"Leaflet\" | \"MapBox\" | \"axios\"\r\n    | \"Other\";\r\n\r\n/**\r\n * 页面的配色方案.\r\n *\r\n * @export\r\n * @interface Colortab\r\n */\r\nexport interface Colortab {\r\n    color: string;\r\n    border: string;\r\n    base: string;\r\n    background: string;\r\n    frontground: string;\r\n    frontground2: string;\r\n    frontground3: string;\r\n};\r\n\r\n/**\r\n * 为页面指定的配色方案和背景的绘制动画.\r\n *\r\n * @export\r\n * @interface Theme\r\n * @template T 组件绘制过程中记录的数据的结构\r\n */\r\nexport interface Theme<T=any> {\r\n    /**\r\n     * 配色方案.\r\n     */\r\n    colortab: Colortab;\r\n    /**\r\n     * 播放器组件外观替换件.\r\n     */\r\n    videoController: BilibiliFlvControlAppearance;\r\n    /**\r\n     * 绘制下一帧的定时器.\r\n     */\r\n    next?: NodeJS.Timeout;\r\n    /**\r\n     * 组件绘制过程中记录的数据.\r\n     */\r\n    data: T;\r\n    /**\r\n     * 开始绘制.\r\n     */\r\n    start: (ctx: CanvasRenderingContext2D, ctx2: CanvasRenderingContext2D) => void;\r\n    /**\r\n     * 绘制一帧.\r\n     */\r\n    paint: (ctx: CanvasRenderingContext2D, ctx2: CanvasRenderingContext2D) => void;\r\n    /**\r\n     * 结束绘制.\r\n     */\r\n    end: () => void;\r\n    /**\r\n     * 鼠标交互.\r\n     */\r\n    mouseListener: (e: JQuery.MouseEventBase) => void;\r\n    /**\r\n     * 触屏交互.\r\n     */\r\n    touchListener: (e: JQuery.TouchEventBase) => void;\r\n};\r\n\r\n\r\n/**\r\n * 粒子特效.\r\n *\r\n * @export\r\n * @interface Partical\r\n */\r\nexport interface Partical {\r\n    color: {\r\n        r: number;\r\n        g: number;\r\n        b: number;\r\n    } | string;\r\n    animation: {\r\n        x: (ms: number) => number;\r\n        y: (ms: number) => number;\r\n        opacity: (ms: number) => number;\r\n        size: (ms: number) => number;\r\n    };\r\n    ms: number;\r\n    life: number;\r\n};\r\n\r\n/**\r\n * 文章.\r\n */\r\nexport type Article = {\r\n    title: string;\r\n    data: string;\r\n};\r\n\r\n/**\r\n * 论文信息.\r\n */\r\nexport type PaperInfo = {\r\n    authors: Array<string>;\r\n    title: string;\r\n    publishingPlace: string;\r\n    year: number;\r\n    pageRange?: string;\r\n};\r\n\r\n/**\r\n * 书签.\r\n */\r\nexport type Bookmark = {\r\n    type: \"tech\" | \"design\" | \"other\";\r\n    title: string;\r\n    url: string;\r\n};\r\n\r\nexport type Role = \"individual\" | \"engineer\" | \"leader\" | \"collaborator\" | \"contributor\";\r\n\r\n/**\r\n * 作品 id.\r\n */\r\nexport type ProductId = string;\r\n\r\n/**\r\n * 作品详细数据.\r\n */\r\nexport interface Product {\r\n    name: string;\r\n    id: string;\r\n    role: Role;\r\n    languages: Array<LanguageInfo>;\r\n    techs: Array<Tech>;\r\n    beginTime: YearMonthLike;\r\n    closeTime: YearMonthLike;\r\n    avatarURL: string;\r\n    videoURL?: string;\r\n    githubURL: string;\r\n    description: string;\r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-08-29 17:07:00 \r\n * @Last Modified by: Antoine YANG\r\n * @Last Modified time: 2020-08-29 17:11:30\r\n */\r\n\r\n\r\n/**\r\n * 获取当前窗口被选中且获取聚焦的元素.\r\n *\r\n * @returns {HTMLElement | null}\r\n */\r\nexport const getSelectedElement = (): HTMLElement | null => {\r\n    const selection: Selection | null = document.getSelection();\r\n    if (selection?.toString().length) {\r\n        return selection.focusNode?.parentElement || null;\r\n    }\r\n\r\n    return null;\r\n};\r\n\r\n/**\r\n * 获取指定元素的某个样式属性值，\r\n * 当该样式继承时，\r\n * 自动寻找父元素.\r\n *\r\n * @param {HTMLElement} e 目标元素\r\n * @param {keyof CSSStyleDeclaration} name 样式名\r\n * @returns {string}\r\n */\r\nexport const getStyle = (e: HTMLElement, name: keyof CSSStyleDeclaration): string => {\r\n    const style: string = e.style[name];\r\n    if (!style && e.parentElement) {\r\n        return getStyle(e.parentElement, name);\r\n    }\r\n    return style;\r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2019-10-24 17:47:11 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-12-15 14:05:54\r\n */\r\n\r\n\r\nconst linearGradient: (colorset: Array< string | number >, direction?: 'bottom' | 'top' | 'left' | 'right') => string\r\n    = (colorset: Array< string | number >, direction: 'bottom' | 'top' | 'left' | 'right' = 'bottom') => {\r\n        let steps: Array< [string, number] > = [];\r\n        colorset.forEach((value: string | number) => {\r\n            if (typeof(value) === \"number\") {\r\n                if (steps.length > 0) {\r\n                    steps[steps.length - 1][1] = value;\r\n                }\r\n            }\r\n            else {\r\n                steps.push([value, -1]);\r\n            }\r\n        });\r\n        if (steps.length === 0) {\r\n            return 'none';\r\n        }\r\n        if (steps.length === 1) {\r\n            return steps[0][0];\r\n        }\r\n        return `linear-gradient(to ${ direction }, ${\r\n            steps.map((value: [string, number], index: number) => {\r\n                if (index === 0) {\r\n                    return value[0];\r\n                }\r\n                else if (index === steps.length - 1) {\r\n                    return ' ' + value[0];\r\n                }\r\n                else if (value[1] === -1) {\r\n                    return ' ' + value[0];\r\n                }\r\n                else {\r\n                    return ' ' + value[0] + ' ' + value[1] * 100 + '%';\r\n                }\r\n            })\r\n        })`;\r\n    };\r\n\r\n\r\n/**\r\n * Translates color code or rgb(a) to hsl(a)\r\n * @param {string} color code input\r\n */\r\nconst toHsl: (color: string) => { code: string; h: number; s: number; l: number; a: number; }\r\n    = (color: string) => {\r\n        let h: number = 0;\r\n        let s: number = 0;\r\n        let l: number = 0;\r\n        let a: number = 1;\r\n        if (color.startsWith('#')) {\r\n            let r: number = 0;\r\n            let g: number = 0;\r\n            let b: number = 0;\r\n            if (color.length === 4) {\r\n                r = 255 * parseInt(color[1], 16) / 16;\r\n                g = 255 * parseInt(color[2], 16) / 16;\r\n                b = 255 * parseInt(color[3], 16) / 16;\r\n                color = `rgb(${ r },${ g },${ b })`;\r\n            }\r\n            else if (color.length === 5) {\r\n                r = 255 * parseInt(color[1], 16) / 16;\r\n                g = 255 * parseInt(color[2], 16) / 16;\r\n                b = 255 * parseInt(color[3], 16) / 16;\r\n                let alpha = 255 * parseInt(color[4], 16);\r\n                color = `rgba(${ r },${ g },${ b },${ alpha })`;\r\n            }\r\n            else if (color.length === 7) {\r\n                r = parseInt(color.substr(1, 2), 16);\r\n                g = parseInt(color.substr(3, 2), 16);\r\n                b = parseInt(color.substr(5, 2), 16);\r\n                color = `rgb(${ r },${ g },${ b })`;\r\n            }\r\n            else if (color.length === 9) {\r\n                r = parseInt(color.substr(1, 2), 16);\r\n                g = parseInt(color.substr(3, 2), 16);\r\n                b = parseInt(color.substr(5, 2), 16);\r\n                let alpha = 255 * parseInt(color[7], 256);\r\n                color = `rgba(${ r },${ g },${ b },${ alpha })`;\r\n            }\r\n        }\r\n        if (color.startsWith('rgb(')) {\r\n            let r: number = 0;\r\n            let g: number = 0;\r\n            let b: number = 0;\r\n            const paths: [ string, string, string ]\r\n                = color.substring(color.indexOf('(') + 1, color.indexOf(')')).split(',') as [string, string, string ];\r\n            r = parseFloat(paths[0]) / 255;\r\n            g = parseFloat(paths[1]) / 255;\r\n            b = parseFloat(paths[2]) / 255;\r\n            let max: number = Math.max(r, g, b);\r\n            let min: number = Math.min(r, g, b);\r\n            h = max === min\r\n                ? 0\r\n                : r === max\r\n                    ? g >= b\r\n                        ? 60 * (g - b) / (max - min)\r\n                        : 60 * (g - b) / (max - min) + 360\r\n                    : g === max\r\n                        ? 60 * (b - r) / (max - min) + 120\r\n                        : 60 * (r - g) / (max - min) + 240;\r\n            l = (max + min) / 2;\r\n            s = l === 0 || max === min ? 0\r\n                : l <= 1 / 2\r\n                    ? (max - min) / (max + min)\r\n                    : (max - min) / (2 - max - min);\r\n            return { code: `hsl(${ h },${ s },${ l })`, h: h, s: s, l: l, a: 1 };\r\n        }\r\n        else if (color.startsWith('rgba(')) {\r\n            let r: number = 0;\r\n            let g: number = 0;\r\n            let b: number = 0;\r\n            const paths: [ string, string, string, string ]\r\n                = color.substring(color.indexOf('(') + 1, color.indexOf(')')).split(',') as [string, string, string, string ];\r\n            r = parseFloat(paths[0]) / 255;\r\n            g = parseFloat(paths[1]) / 255;\r\n            b = parseFloat(paths[2]) / 255;\r\n            a = parseFloat(paths[3]);\r\n            let max: number = Math.max(r, g, b);\r\n            let min: number = Math.min(r, g, b);\r\n            h = max === min\r\n                ? 0\r\n                : r === max\r\n                    ? g >= b\r\n                        ? 60 * (g - b) / (max - min)\r\n                        : 60 * (g - b) / (max - min) + 360\r\n                    : g === max\r\n                        ? 60 * (b - r) / (max - min) + 120\r\n                        : 60 * (r - g) / (max - min) + 240;\r\n            l = (max + min) / 2;\r\n            s = l === 0 || max === min ? 0\r\n                : l <= 1 / 2\r\n                    ? (max - min) / (max + min)\r\n                    : (max - min) / (2 - max - min);\r\n            return { code: `hsla(${ h },${ s },${ l },${ a })`, h: h, s: s, l: l, a: a };\r\n        }\r\n        return { code: 'none', h: h, s: s, l: l, a: a };\r\n    };\r\n\r\n\r\nconst toRgb: (hsl: string) => string\r\n    = (hsl: string) => {\r\n        if (hsl.startsWith(\"rgb\")) {\r\n            return hsl;\r\n        } else if (hsl.startsWith(\"#\")) {\r\n            hsl = toHsl(hsl).code;\r\n        } else if (!hsl.startsWith(\"hsl\")) {\r\n            return \"none\";\r\n        }\r\n        let params: Array<string> = hsl.substring(hsl.indexOf('(') + 1, hsl.indexOf(')')).split(',');\r\n        if (params.length === 3 || params.length === 4) {\r\n            let h: number = parseFloat(params[0]);\r\n            let s: number = parseFloat(params[1]);\r\n            let l: number = parseFloat(params[2]);\r\n            let q: number = l < 1 / 2 ? l * (1 + s) : l + s - (l * s);\r\n            let p: number = 2 * l - q;\r\n            let h_k: number = h / 360;\r\n            let t_r: number = h_k + 1 / 3;\r\n            t_r = t_r > 1 ? t_r - 1 : t_r < 0 ? t_r + 1 : t_r;\r\n            let t_g: number = h_k;\r\n            t_g = t_g > 1 ? t_g - 1 : t_g < 0 ? t_g + 1 : t_g;\r\n            let t_b: number = h_k - 1 / 3;\r\n            t_b = t_b > 1 ? t_b - 1 : t_b < 0 ? t_b + 1 : t_b;\r\n\r\n            let r: number = t_r < 1 / 6\r\n                ? p + (q - p) * 6 * t_r\r\n                : t_r < 1 / 2\r\n                    ? q\r\n                    : t_r < 2 / 3\r\n                        ? p + (q - p) * 6 * (2 / 3 - t_r)\r\n                        : p;\r\n            let g: number = t_g < 1 / 6\r\n                ? p + (q - p) * 6 * t_g\r\n                : t_g < 1 / 2\r\n                    ? q\r\n                    : t_g < 2 / 3\r\n                        ? p + (q - p) * 6 * (2 / 3 - t_g)\r\n                        : p;\r\n            let b: number = t_b < 1 / 6\r\n                ? p + (q - p) * 6 * t_b\r\n                : t_b < 1 / 2\r\n                    ? q\r\n                    : t_b < 2 / 3\r\n                        ? p + (q - p) * 6 * (2 / 3 - t_b)\r\n                        : p;\r\n\r\n            if (params.length === 4) {\r\n                return `rgba(${ Math.floor(r * 255) },${ Math.floor(g * 255) },${ Math.floor(b * 255) },${ params[3] })`;\r\n            }\r\n            return `rgb(${ Math.floor(r * 255) },${ Math.floor(g * 255) },${ Math.floor(b * 255) })`;\r\n        }\r\n        return 'none';\r\n    };\r\n\r\n\r\nconst getRgba: (color: string) => { r: number; g: number; b: number; a: number; }\r\n    = (color: string) => {\r\n        if (!color.startsWith(\"rgb\")) {\r\n            color = toRgb(color);\r\n        }\r\n        let colorSet: Array<string> = toRgb(\r\n            color\r\n        ).match(/\\d+/g)!;\r\n        if (color.startsWith(\"rgba\")) {\r\n            return {\r\n                r: parseInt(colorSet[0]),\r\n                g: parseInt(colorSet[1]),\r\n                b: parseInt(colorSet[2]),\r\n                a: parseFloat(colorSet[3])\r\n            };\r\n        } else {\r\n            return {\r\n                r: parseInt(colorSet[0]),\r\n                g: parseInt(colorSet[1]),\r\n                b: parseInt(colorSet[2]),\r\n                a: 1\r\n            };\r\n        }\r\n    };\r\n\r\n\r\n/**\r\n * Sets lightness of a color.\r\n * @param {string} color\r\n * @param {number} degree\r\n * @returns\r\n */\r\nconst setLightness: (color: string, degree: number) => string\r\n    = (color: string, degree: number) => {\r\n        const { h, s, a } = toHsl(color);\r\n        let hsl: string = a === 1 ? `hsl(${ h },${ s },${ degree })` : `hsla(${ h },${ s },${ degree },${ a })`;\r\n        return toRgb(hsl);\r\n    };\r\n    \r\n\r\n/**\r\n * Returns a interpolation between two colors.\r\n * @param {string} color1\r\n * @param {string} color2\r\n * @param {number} step a number between [0, 1]\r\n * @returns\r\n */\r\nconst interpolate: (color1: string, color2: string, step?: number, mode?: \"rgb\" | \"hsl\") => string\r\n    = (color1: string, color2: string, step: number = 0.5, mode: \"rgb\" | \"hsl\" = \"hsl\") => {\r\n        if (mode === \"hsl\") {\r\n            const hsl1: { code: string; h: number; s: number; l: number; a: number; } = toHsl(color1);\r\n            const hsl2: { code: string; h: number; s: number; l: number; a: number; } = toHsl(color2);\r\n            let h: number = hsl1.h * (1 - step) + hsl2.h * step;\r\n            let s: number = hsl1.s * (1 - step) + hsl2.s * step;\r\n            let l: number = hsl1.l * (1 - step) + hsl2.l * step;\r\n            let a: number = hsl1.a * (1 - step) + hsl2.a * step;\r\n            a = isNaN(a) ? 1 : a;\r\n            let hsl: string = a === 1 ? `hsl(${ h },${ s },${ l })` : `hsla(${ h },${ s },${ l },${ a })`;\r\n            return toRgb(hsl);\r\n        } else {\r\n            const rgb1 = getRgba(color1);\r\n            const rgb2 = getRgba(color2);\r\n            return `rgba(${\r\n                Math.floor(rgb1.r * (1 - step) + rgb2.r * step)\r\n            },${\r\n                Math.floor(rgb1.g * (1 - step) + rgb2.g * step)\r\n            },${\r\n                Math.floor(rgb1.b * (1 - step) + rgb2.b * step)\r\n            },${\r\n                rgb1.a * (1 - step) + rgb2.a * step\r\n            })`;\r\n        }\r\n    };\r\n\r\n\r\n/**\r\n * Color: namespace\r\n */\r\nconst Color = {\r\n    /**Creates a linear gradient.*/\r\n    linearGradient: linearGradient,\r\n\r\n    /**Translates a color code to hsl(a).*/\r\n    toHsl: toHsl,\r\n    \r\n    /**Translates a hsl(a) code to rgb(a).*/\r\n    toRgb: toRgb,\r\n\r\n    /**Get rgba values.*/\r\n    getRgba: getRgba,\r\n\r\n    /**Sets lightness of a color.*/\r\n    setLightness: setLightness,\r\n    \r\n    /**Returns a interpolation between two colors.*/\r\n    interpolate: interpolate,\r\n\r\n    /**\r\n     * Colorset Nippon\r\n     * Traditional Japanese colors.\r\n     */\r\n    Nippon: {\r\n        list: ['#808F7C', '#51A8DD', '#B54434', '#F0A986', '#F596AA', '#89916B', '#FAD689', '#336774', '#8D742A', '#DC9FB4', '#B28FCE', '#77428D', '#9E7A7A', '#734338', '#BA9132', '#DAC9A6', '#904840', '#6699A1', '#66BAB7', '#4A225D', '#6D2E5B', '#4E4F97', '#D9AB42', '#4B4E2A', '#005CAF', '#574C57', '#0C0C0C', '#0089A7', '#AF5F3C', '#B4A582', '#434343', '#855B32', '#6A4028', '#405B55', '#E87A90', '#113285', '#268785', '#F4A7B9', '#F9BF45', '#A8D8B9', '#62592C', '#EBB471', '#CA7A2C', '#DDA52D', '#D9CD90', '#ADA142', '#B17844', '#42602D', '#0F4C3A', '#947A6D', '#E9CD4C', '#B19693', '#F05E1C', '#305A56', '#91AD70', '#876633', '#33A6B8', '#BC9F77', '#724938', '#261E47', '#08192D', '#7D6C46', '#2D6D4B', '#FFB11B', '#2E5C6E', '#967249', '#F6C555', '#A0674B', '#884C3A', '#26453D', '#B481BB', '#572A3F', '#24936E', '#255359', '#00896C', '#96632E', '#3C2F41', '#9A5034', '#69B0AC', '#FFBA84', '#0093D3', '#5E3D50', '#8E354A', '#E16B8C', '#86473F', '#4D5139', '#7B90D2', '#9B90C2', '#91989F', '#867835', '#376B6D', '#828282', '#F75C2F', '#90B44B', '#8F5A3C', '#CAAD5F', '#7BA23F', '#516E41', '#60373E', '#006284', '#211E55', '#77969A', '#E2943B', '#0D5661', '#78C2C4', '#B07736', '#6E75A4', '#592C63', '#8B81C3', '#FF5E99', '#0B1013', '#FEDFE1', '#C46243', '#A5A051', '#2EA9DF', '#F19483', '#8F77B5', '#A8497A', '#70649A', '#554236', '#646A58', '#724832', '#1C1C1C', '#B9887D', '#4F4F48', '#ED784A', '#86A697', '#81C7D4', '#B5495B', '#563F2E', '#20604F', '#562E37', '#A28C37', '#C1693C', '#FFC408', '#C73E3A', '#AB3B3A', '#B35C37', '#E03C8A', '#FFF10C', '#CC543A', '#CC006B', '#43341B', '#C99833', '#7D532C', '#E8B647', '#854836', '#DCB879', '#86C166', '#838A2D', '#C78550', '#C18A26', '#DB8E71', '#986DB2', '#877F6C', '#E79460', '#91B493', '#A96360', '#FC9F4D', '#B55D4C', '#897D55', '#ECB88A', '#465D4C', '#D75455', '#0F2540', '#707C74', '#5B622E', '#F7D94C', '#080808', '#64363C', '#E9A368', '#BEC23F', '#656765', '#4F726C', '#D19826', '#0C4842', '#58B2DC', '#EB7A77', '#00AA90', '#EFBB24', '#6C6A2D', '#A5DEE4', '#E3916E', '#E98B2A', '#FB966E', '#2B5F75', '#FCFAF2', '#9F353A', '#66327C', '#3A3226', '#6A8372', '#6F3381', '#985F2A', '#373C38', '#E83015', '#3F2B36', '#6E552F', '#D7B98E', '#994639', '#1B813E', '#622954', '#C1328E', '#E1A679', '#607890', '#FB9966', '#577C8A', '#BF6766', '#B1B479', '#78552B', '#DDD23B', '#616138', '#3A8FB7', '#B47157', '#CA7853', '#D7C4BB', '#9B6E23', '#74673E', '#6C6024', '#B5CAA0', '#6A4C9C', '#F7C242', '#FBE251', '#f0dddd', '#52433D', '#227D51', '#F8C3CD', '#D05A6E', '#D0104C', '#1E88A8', '#C7802D', '#7DB9DE', '#F17C67', '#787878', '#DB4D6D', '#4A593D', '#939650', '#BDC0BA', '#EEA9A9', '#CB1B45', '#72636E', '#566C73', '#8A6BBE', '#A36336', '#954A45', '#096148', '#533D5B', '#5DAC81', '#535953', '#787D7B', '#A35E47', '#82663A', '#36563C', '#B68E55', '#FFFFFB', '#0B346E', '#CB4042'],\r\n\r\n        /**撫子 rgb(220,159,180)*/\r\n        Nadesiko: '#DC9FB4',\r\n        /**紅梅 rgb(225,107,140)*/\r\n        Koubai: '#E16B8C',\r\n        /**蘇芳 rgb(142,53,74)*/\r\n        Suou: '#8E354A',\r\n        /**退紅 rgb(248,195,205)*/\r\n        Taikou: '#F8C3CD',\r\n        /**一斥染 rgb(244,167,185)*/\r\n        Ikkonzome: '#F4A7B9',\r\n        /**桑染 rgb(100,54,60)*/\r\n        Kuwazome: '#64363C',\r\n        /**桃 rgb(245,150,170)*/\r\n        Momo: '#F596AA',\r\n        /**苺 rgb(181,73,91)*/\r\n        Ichigo: '#B5495B',\r\n        /**薄紅 rgb(232,122,144)*/\r\n        Usubeni: '#E87A90',\r\n        /**今様 rgb(208,90,110)*/\r\n        Imayou: '#D05A6E',\r\n        /**中紅 rgb(219,77,109)*/\r\n        Nakabeni: '#DB4D6D',\r\n        /**桜 rgb(254,223,225)*/\r\n        Sakura: '#FEDFE1',\r\n        /**梅鼠 rgb(158,122,122)*/\r\n        Umenezumi: '#9E7A7A',\r\n        /**韓紅花 rgb(208,16,76)*/\r\n        Karakurenai: '#D0104C',\r\n        /**燕脂 rgb(159,53,58)*/\r\n        Enzi: '#9F353A',\r\n        /**紅 rgb(203,27,69)*/\r\n        Kurenai: '#CB1B45',\r\n        /**鴇 rgb(238,169,169)*/\r\n        Toki: '#EEA9A9',\r\n        /**長春 rgb(191,103,102)*/\r\n        Tyousyunn: '#BF6766',\r\n        /**深緋 rgb(134,71,63)*/\r\n        Kokiake: '#86473F',\r\n        /**桜鼠 rgb(177,150,147)*/\r\n        SakuraNezumi: '#B19693',\r\n        /**甚三紅 rgb(235,122,119)*/\r\n        Zinnzamomi: '#EB7A77',\r\n        /**小豆 rgb(149,74,69)*/\r\n        Azuki: '#954A45',\r\n        /**蘇芳香 rgb(169,99,96)*/\r\n        Suoukou: '#A96360',\r\n        /**赤紅 rgb(203,64,66)*/\r\n        Akabeni: '#CB4042',\r\n        /**真朱 rgb(171,59,58)*/\r\n        Sinnsyu: '#AB3B3A',\r\n        /**灰桜 rgb(215,196,187)*/\r\n        Haizakura: '#D7C4BB',\r\n        /**栗梅 rgb(144,72,64)*/\r\n        Kuriume: '#904840',\r\n        /**海老茶 rgb(115,67,56)*/\r\n        Ebitya: '#734338',\r\n        /**銀朱 rgb(199,62,58)*/\r\n        Ginnsyu: '#C73E3A',\r\n        /**黒鳶 rgb(85,66,54)*/\r\n        Kurotobi: '#554236',\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**猩猩緋 rgb(232,48,21)*/\r\n        Syozyohi: '#E83015',\r\n        /**\r\n         */\r\n        /**金茶 rgb(199,128,45)*/\r\n        Kinntya: '#C7802D',\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**山吹 rgb(255,177,27)*/\r\n        Yamabuki: '#FFB11B',\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**鳥の子 rgb(218,201,166)*/\r\n        Torinoko: '#DAC9A6',\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**籐黄 rgb(255,196,8)*/\r\n        Touou: '#FFC408',\r\n        /**鬱金 rgb(239,187,36)*/\r\n        Ukonn: '#EFBB24',\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**苗 rgb(134,193,102)*/\r\n        Nae: '#86C166',\r\n        /**\r\n         */\r\n        /**常盤 rgb(27,129,62)*/\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        Tokiwa: '#1B813E',\r\n        /**緑 rgb(34,125,81)*/\r\n        Midori: '#227D51',\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**緑青 rgb(36,147,110)*/\r\n        Rokusyou: '#24936E',\r\n        /**\r\n         */\r\n        /**水浅葱 rgb(102,186,183)*/\r\n        Mizuasagi: '#66BAB7',\r\n        /**青碧 rgb(38,135,133)*/\r\n        Seiheki: '#268785',\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**水 rgb(129,199,212)*/\r\n        Mizu: '#81C7D4',\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**黒橡 rgb(11,16,19)*/\r\n        Kuroturubami: '#0B1013',\r\n        /**\r\n         */\r\n        /**褐 rgb(8,25,45)*/\r\n        Kati: '#08192D',\r\n        /**瑠璃 rgb(0,92,175)*/\r\n        Ruri: '#005CAF',\r\n        /**瑠璃紺 rgb(11,52,110)*/\r\n        Rurikonn: '#0B346E',\r\n        /**红碧 rgb(123,144,210)*/\r\n        Berimidori: '#7B90D2',\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**鈍 rgb(101,103,101)*/\r\n        Nibi: '#656765',\r\n        /**青鈍 rgb(83,89,83)*/\r\n        Aonibi: '#535953',\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**紫苑 rgb(143,119,181)*/\r\n        Sionn: '#8F77B5',\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**半 rgb(152,109,78)*/\r\n        Hasita: '#986DB2',\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**躑躅 rgb(224,60,138)*/\r\n        Tutuzi: '#E03C8A',\r\n        /**胡粉 rgb(189,192,186)*/\r\n        Gohunn: '#FFFFFB',\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**\r\n         */\r\n        /**藍墨茶 rgb(55,60,56)*/\r\n        Aisumitya: '#373C38',\r\n        /**消炭 rgb(67,67,67)*/\r\n        Kesizumi: '#434343',\r\n        /**墨 rgb(28,28,28)*/\r\n        Sumi: '#1C1C1C',\r\n        /**黒 rgb(8,8,8)*/\r\n        Kuro: '#080808',\r\n        /**呂 rgb(12,12,12)*/\r\n        Ro: '#0C0C0C'\r\n    },\r\n}\r\n\r\n\r\nexport type ColorThemeKey = \"Caffee\" | \"NakiriAyame\";\r\n\r\nexport const ColorThemes = {\r\n    Caffee: {\r\n        // OuterBackground: '#4E3327',\r\n        OuterBackground: '#F0F0F0',\r\n        Border: '#231711',\r\n        // OuterColor: '#FEFEFE',\r\n        OuterColor: '#141414',\r\n        InnerBackground: '#FEFEFE',\r\n        InnerColor: '#FCD3AE',\r\n        Red: '#C32936',\r\n        Green: '#2E7917',\r\n        Grey: '#877977'\r\n    },\r\n    NakiriAyame: {\r\n        OuterBackground: '#FCFBFC',\r\n        Border: '#D2394A',\r\n        OuterColor: '#D2394A',\r\n        InnerBackground: '#2A282B',\r\n        InnerColor: '#FCD3AE',\r\n        Red: '#AD2138',\r\n        Green: '#52826D',\r\n        Grey: '#D3C1BE'\r\n    },\r\n    OokamiMio: {\r\n        Black: '#333130',\r\n        Red: '#FE685F'\r\n    }\r\n};\r\n\r\n\r\nexport default Color;\r\n\r\n(window as any)['Color'] = Color;\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-08-28 21:15:16 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-12-02 19:37:44\r\n */\r\n\r\nimport React, { Component } from \"react\";\r\nimport $ from \"jquery\";\r\nimport { Theme } from \"../methods/typedict\";\r\nimport { Shared } from \"../methods/globals\";\r\n\r\n\r\nexport interface BackgroundCanvasProps {\r\n    initTheme: Theme;\r\n};\r\n\r\nexport interface BackgroundCanvasState {\r\n    curTheme: Theme;\r\n};\r\n\r\n/**\r\n * 这个组件将作为页面的背景，\r\n * 其定位不随页面移动.\r\n * 建议在页面其他元素的最外层渲染.\r\n * \r\n * @export\r\n * @class BackgroundCanvas\r\n * @extends {Component<BackgroundCanvasProps, BackgroundCanvasState>}\r\n */\r\nexport class BackgroundCanvas extends Component<BackgroundCanvasProps, BackgroundCanvasState> {\r\n\r\n    // 背景\r\n    protected canvas: React.RefObject<HTMLCanvasElement>;\r\n    protected ctx?: CanvasRenderingContext2D;\r\n\r\n    // 鼠标\r\n    protected canvas2: React.RefObject<HTMLCanvasElement>;\r\n    protected ctx2?: CanvasRenderingContext2D;\r\n\r\n    public constructor(props: BackgroundCanvasProps) {\r\n        super(props);\r\n        this.state = {\r\n            curTheme: this.props.initTheme\r\n        };\r\n\r\n        this.canvas = React.createRef<HTMLCanvasElement>();\r\n        this.canvas2 = React.createRef<HTMLCanvasElement>();\r\n    }\r\n\r\n    public render(): JSX.Element {\r\n        return (\r\n            <>\r\n                <canvas key=\"animation\" ref={ this.canvas }\r\n                width=\"100%\" height=\"100%\" style={{\r\n                    position: \"fixed\",\r\n                    top: 0,\r\n                    left: 0,\r\n                    zIndex: -9999\r\n                }} />\r\n                <>\r\n                    { this.props.children }\r\n                </>\r\n                <canvas key=\"cursor\" ref={ this.canvas2 }\r\n                width=\"100%\" height=\"100%\" style={{\r\n                    position: \"fixed\",\r\n                    top: 0,\r\n                    left: 0,\r\n                    zIndex: 9999,\r\n                    pointerEvents: \"none\"\r\n                }} />\r\n            </>\r\n        );\r\n    }\r\n\r\n    public componentDidMount(): void {\r\n        if (Shared.version === \"2.x\") {\r\n            // 隐藏默认指针\r\n            $(\"body\").css(\"cursor\", \"none\");\r\n        }\r\n\r\n        // 设定大小\r\n        this.canvas.current!.width = $(window).width()!;\r\n        this.canvas.current!.height = $(window).height()!;\r\n        this.canvas2.current!.width = $(window).width()!;\r\n        this.canvas2.current!.height = $(window).height()!;\r\n        // 获取 canvas 上下文\r\n        this.ctx = this.canvas.current!.getContext(\"2d\")!;\r\n        this.ctx2 = this.canvas2.current!.getContext(\"2d\")!;\r\n        // 绑定监听\r\n        $(window).on(\"resize\", () => {\r\n            this.canvas.current!.width = $(window).width()!;\r\n            this.canvas.current!.height = $(window).height()!;\r\n            this.canvas2.current!.width = $(window).width()!;\r\n            this.canvas2.current!.height = $(window).height()!;\r\n        });\r\n        $(\"*\").on(\"mouseover\", e => {\r\n            this.state.curTheme.mouseListener(e);\r\n        }).on(\"mouseout\", e => {\r\n            this.state.curTheme.mouseListener(e);\r\n        }).on(\"click\", e => {\r\n            this.state.curTheme.mouseListener(e);\r\n        }).on(\"mousedown\", e => {\r\n            this.state.curTheme.mouseListener(e);\r\n        }).on(\"mouseup\", e => {\r\n            this.state.curTheme.mouseListener(e);\r\n        }).on(\"mousemove\", e => {\r\n            this.state.curTheme.mouseListener(e);\r\n        }).on(\"touchstart\", e => {\r\n            this.state.curTheme.touchListener(e);\r\n        }).on(\"touchmove\", e => {\r\n            this.state.curTheme.touchListener(e);\r\n        }).on(\"touchend\", e => {\r\n            this.state.curTheme.touchListener(e);\r\n        });\r\n        // 开始渲染\r\n        this.state.curTheme.start(this.ctx!, this.ctx2!);\r\n    }\r\n\r\n    public componentWillUnmount(): void {\r\n        // 还原默认指针\r\n        $(\"body\").css(\"cursor\", \"initial\");\r\n        // 解除监听\r\n        $(window).unbind();\r\n    }\r\n\r\n    public getSnapshotBeforeUpdate(): void {\r\n        // 停止渲染\r\n        this.state.curTheme.end();\r\n    }\r\n\r\n    public componentDidUpdate(): void {\r\n        // 开始渲染\r\n        this.state.curTheme.start(this.ctx!, this.ctx2!);\r\n    }\r\n\r\n};\r\n\r\n\r\n/** 记录绘制的时间 */\r\nexport const renderingState = {\r\n    prev: (new Date()).getTime(),\r\n    setTime: (val: number) => renderingState.prev = val,\r\n    getTime: () => renderingState.prev\r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-08-28 21:37:20 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-09-15 11:53:08\r\n */\r\n\r\nimport { Theme, Partical } from \"../methods/typedict\";\r\nimport $ from \"jquery\";\r\nimport { getSelectedElement, getStyle } from \"../methods/selection\";\r\nimport Color from \"../preference/Color\";\r\nimport { Shared } from \"../methods/globals\";\r\nimport { renderingState } from \"./BackgroundCanvas\";\r\nimport React from \"react\";\r\nimport { CanvasRenderingEvent, BilibiliFlvEventLog } from \"../compo/BilibiliFlv\";\r\n\r\n\r\ninterface SnowBall {\r\n    r: number;\r\n    x: number;\r\n    y: number;\r\n    a: number;\r\n    dist: number;\r\n    prevDx: number;\r\n    prevDd: number;\r\n    active: boolean;\r\n};\r\n\r\ninterface YukiState {\r\n    items: Array<SnowBall>;\r\n    particals: Array<Partical>;\r\n    cursor?: { x: number; y: number; pressed: boolean; };\r\n};\r\n\r\n/** 主题：雪 */\r\nexport const Yuki: Theme<YukiState> = {\r\n    colortab: {\r\n        base: \"rgb(11,11,14)\",\r\n        color: \"rgb(208,213,215)\",\r\n        border: \"rgb(155,255,254)\",\r\n        background: \"rgb(154,154,155)\",\r\n        frontground: \"rgb(254,231,111)\",\r\n        frontground2: \"rgb(251,133,154)\",\r\n        frontground3: \"rgb(198,49,43)\"\r\n    },\r\n    videoController: {\r\n        background: \"rgba(54,54,54,0.9)\",\r\n    \r\n        btnPlay: [(\r\n            <circle\r\n            cx=\"18\" cy=\"18\" r=\"16\"\r\n            style={{\r\n                fill: \"#00000000\"\r\n            }} />\r\n        ), (\r\n            <path d={\r\n                \"M11,8 L29,18 L11,28 Z\"\r\n            }\r\n            style={{\r\n                stroke: \"rgb(217,217,215)\",\r\n                fill: \"none\"\r\n            }} />\r\n        )],\r\n        btnStop: [(\r\n            <circle\r\n            cx=\"18\" cy=\"18\" r=\"16\"\r\n            style={{\r\n                fill: \"#00000000\"\r\n            }} />\r\n        ), (\r\n            <path d={\r\n                \"M11,10 L15,10 L15,26 L11,26 Z M21,10 L25,10 L25,26 L21,26 Z\"\r\n            }\r\n            style={{\r\n                stroke: \"rgb(217,217,215)\",\r\n                fill: \"none\"\r\n            }} />\r\n        )],\r\n    \r\n        color: \"rgb(235,203,195)\",\r\n    \r\n        progStyle: \"rgb(90,124,212)\",\r\n    \r\n        progressBase: (\r\n            <rect y=\"15\" height=\"6\"\r\n            style={{\r\n                stroke: \"rgb(217,217,215)\",\r\n                fill: \"rgb(32,32,30)\"\r\n            }} />\r\n        ),\r\n        progressBuffer: (\r\n            <rect y=\"15\" height=\"6\"\r\n            style={{\r\n                fill: \"rgb(70,70,70)\"\r\n            }} />\r\n        ),\r\n        progressCurrent: (\r\n            <rect y=\"15\" height=\"6\"\r\n            style={{\r\n                fill: \"rgb(198,196,204)\"\r\n            }} />\r\n        ),\r\n        progressFlag: (\r\n            <rect x=\"0\" y=\"0\" width=\"12\" height=\"12\"\r\n            style={{\r\n                transform: \"translate(-6px, -6px)\",\r\n                fill: \"rgb(171,171,171)\",\r\n                stroke: \"rgb(250,250,250)\"\r\n            }} />\r\n        ),\r\n    \r\n        displayVolume: (muted: boolean, volume: number) => {\r\n            const f = (val: number) => (220 - 260 * val) / 180 * Math.PI;\r\n            const tickC: number = 5 + Math.floor(window.innerWidth / 360) * 2;\r\n            const ticks: Array<number> = new Array<number>(tickC).fill(0).map(\r\n                (_, i) => i / (tickC - 1)\r\n            );\r\n    \r\n            return [(\r\n                <circle key=\"interaction\"\r\n                cx=\"18\" cy=\"18\" r=\"16\"\r\n                style={{\r\n                    fill: \"#00000000\"\r\n                }} />\r\n            ), ...ticks.map(\r\n                (d, i) => {\r\n                    return (\r\n                        <line\r\n                        x1={ 18 + Math.cos(f(d)) * 9 } x2={ 18 + Math.cos(f(d)) * 13 }\r\n                        y1={ 20 - Math.sin(f(d)) * 9 } y2={ 20 - Math.sin(f(d)) * 13 }\r\n                        style={{\r\n                            stroke: \"rgba(220,220,220,0.5)\",\r\n                            strokeWidth: i === 0 ? 2.4 : 1.2\r\n                        }} />\r\n                    );\r\n                }\r\n            ), (\r\n                <circle key=\"btn\"\r\n                cx=\"18\" cy=\"20\" r=\"7.5\"\r\n                style={{\r\n                    fill: muted ? \"rgba(250,250,250,0.6)\" : \"rgb(250,250,250)\"\r\n                }} />\r\n            ), (\r\n                <circle key=\"pointer\" r=\"3\"\r\n                cx={ 18 + Math.cos(f(volume)) * 4 }\r\n                cy={ 20 - Math.sin(f(volume)) * 4 }\r\n                style={{\r\n                    fill: muted ? \"rgba(37,37,37,0.6)\" : \"rgb(242,55,38)\"\r\n                }} />\r\n            )];\r\n        },\r\n    \r\n        canvasRender: (event: CanvasRenderingEvent) => {\r\n            if (event.logs.length) {\r\n                // 日志输出\r\n                const time: number = (new Date()).getTime();\r\n                const ft = (t: number) => (\r\n                    1 - (time - t) / 3000\r\n                );\r\n                const y: number = event.h * 0.7;\r\n                /** 3秒内产生的最后四条 */\r\n                const logs: Array<BilibiliFlvEventLog & { dt: number; }> = event.logs.map(\r\n                    log => {\r\n                        return {\r\n                            ...log,\r\n                            dt: ft(log.time)\r\n                        };\r\n                    }\r\n                ).filter(log => log.dt >= 0).sort((a, b) => b.dt - a.dt).slice(0, 4);\r\n                if (logs.length) {\r\n                    const fontSize: number = 4 + Math.min(event.w, event.h) / 36;\r\n                    event.ctx.font = `${ fontSize }px normal source-code-pro`;\r\n                    event.ctx.textAlign = \"left\";\r\n                    event.ctx.textBaseline = \"top\";\r\n    \r\n                    logs.reverse().forEach((log, i) => {\r\n                        event.ctx.globalAlpha = log.dt;\r\n                        event.ctx.fillStyle = `rgba(100,100,100,0.5)`;\r\n                        event.ctx.fillRect(\r\n                            fontSize,\r\n                            y + fontSize * i * 2,\r\n                            event.w * 0.1 + fontSize * 6,\r\n                            fontSize * 1.6\r\n                        );\r\n                        event.ctx.fillStyle = `rgb(245,245,245)`;\r\n                        event.ctx.fillText((\r\n                            log.type === \"exitfullscreen\" ? \"exit fullscreen\"\r\n                                : log.type === \"fullscreen\" ? \"fullscreen mode\"\r\n                                    : log.type === \"mute\" ? \"mute\"\r\n                                        : log.type === \"pause\" ? \"paused\"\r\n                                            : log.type === \"play\" ? \"resume\"\r\n                                                : log.type === \"relocate\" ? (\r\n                                                    log.next >= log.prev ? `fast forward ${\r\n                                                        Math.round(log.next - log.prev)\r\n                                                    } sec` : `backward ${\r\n                                                        Math.round(log.prev - log.next)\r\n                                                    } sec`\r\n                                                ) : log.type === \"setSpeed\" ? `speed set to ${\r\n                                                    log.next\r\n                                                }` : log.type === \"setVolume\" ? `volume: ${\r\n                                                    log.next.toFixed(2)\r\n                                                }` : \"unmute\"\r\n                        ), 8 + fontSize, y + fontSize * 0.3 + fontSize * i * 2);\r\n                    });\r\n    \r\n                    event.ctx.globalAlpha = 1;\r\n                }\r\n            }\r\n    \r\n            if (event.dataState === \"HAVE_FUTURE_DATA\" || event.dataState === \"HAVE_ENOUGH_DATA\") {\r\n                return;\r\n            }\r\n            if (event.dataState === \"HAVE_NOTHING\") {\r\n                event.ctx.fillStyle = \"rgba(39,37,40,0.9)\";\r\n                event.ctx.fillRect(0, 0, event.w, event.h);\r\n            }\r\n    \r\n            // 加载特效：旋转\r\n            const f = (val: number) => val / 8 * 2 * Math.PI;\r\n            const x: number = event.w / 2;\r\n            const y: number = event.h / 2;\r\n            const d: number = Math.min(x, y) / 8;\r\n            let r: number = d / 4;\r\n            const t: number = 7 - Math.floor(\r\n                ((\r\n                    (new Date()).getMilliseconds()\r\n                ) / 125)\r\n            ) % 8;\r\n            for (let i: number = 0; i < 8; i++) {\r\n                const cx: number = x + Math.cos(f(i + t)) * d;\r\n                const cy: number = y - Math.sin(f(i + t)) * d;\r\n                \r\n                event.ctx.fillStyle = `rgba(225,225,225,${ 1 - 0.1 * i })`;\r\n                event.ctx.beginPath();\r\n                event.ctx.arc(cx, cy, r, 0, Math.PI * 2);\r\n                event.ctx.fill();\r\n    \r\n                r *= 0.9;\r\n            }\r\n        }\r\n    },\r\n    data: {\r\n        items: [],\r\n        particals: []\r\n    },\r\n    start: (ctx: CanvasRenderingContext2D, ctx2: CanvasRenderingContext2D) => {\r\n        ctx.canvas.style.backgroundColor = \"rgb(11,11,14)\";\r\n        Yuki.data = {\r\n            items: [],\r\n            particals: [],\r\n            cursor: void 0\r\n        };\r\n        Yuki.paint(ctx, ctx2);\r\n    },\r\n    end: () => {\r\n        if (Yuki.next) {\r\n            // 清除定时器\r\n            clearTimeout(Yuki.next);\r\n            Yuki.next = void 0;\r\n        }\r\n        Yuki.data = {\r\n            items: [],\r\n            particals: [],\r\n            cursor: void 0\r\n        };\r\n    },\r\n    paint: (ctx: CanvasRenderingContext2D, ctx2: CanvasRenderingContext2D) => {\r\n        /** 到下一帧的间隔毫秒数 */\r\n        const span: number = 1000 / Shared.animationFPS;\r\n        /** 绘制的时间 */\r\n        const time: number = (new Date()).getTime();\r\n        const realSpan: number = time - renderingState.getTime();\r\n        Shared.realFPS = Math.round(\r\n            1000 / realSpan\r\n        );\r\n        renderingState.setTime(time);\r\n\r\n        if (Shared.autoFPS) {\r\n            const ita: number = 0.1 / Shared.animationFPS;\r\n            const u: number = (realSpan - span) / span;\r\n            if (u <= 0.67) {\r\n                Shared.animationFPS += 50 * (1.67 - u) / Shared.animationFPS;\r\n            }\r\n            Shared.animationFPS = Math.max(\r\n                10, Math.min(\r\n                    120, Math.floor(\r\n                        (\r\n                            Shared.animationFPS * (\r\n                                1 - ita\r\n                            )\r\n                        ) + (\r\n                            Shared.realFPS * 2\r\n                        ) * ita\r\n                    )\r\n                )\r\n            );\r\n        }\r\n\r\n        const width: number = ctx.canvas.width;\r\n        const height: number = ctx.canvas.height;\r\n        const max: number = Math.sqrt(width * height) / 16;\r\n\r\n        // 绘制和更新\r\n        ctx.fillStyle = Yuki.colortab.base;\r\n        ctx.fillRect(0, 0, width, height);\r\n        ctx2.clearRect(0, 0, width, height);\r\n\r\n        let nextList: Array<SnowBall> = [];\r\n        let nextParticals: Array<Partical> = [];\r\n\r\n        Yuki.data.items.forEach(item => {\r\n            const r: number = item.r * item.dist;\r\n            if (r <= 0) {\r\n                // 消失\r\n                const r: number = 0.23 * max;\r\n                const gradient: CanvasGradient = ctx.createRadialGradient(\r\n                    item.x, item.y, r * 0.6, item.x, item.y, r\r\n                );\r\n                gradient.addColorStop(0, `rgba(212,215,217,${ item.a })`);\r\n                gradient.addColorStop(0.6, `rgba(181,183,184,${ item.a * 0.6 })`);\r\n                gradient.addColorStop(1, `rgba(72,73,74,${ item.a * 0.1 })`);\r\n                ctx.fillStyle = gradient;\r\n                ctx.beginPath();\r\n                ctx.moveTo(item.x, item.y - r);\r\n                ctx.lineTo(item.x + r / 25, item.y - r / 25);\r\n                ctx.lineTo(item.x + r, item.y);\r\n                ctx.lineTo(item.x + r / 25, item.y + r / 25);\r\n                ctx.lineTo(item.x, item.y + r);\r\n                ctx.lineTo(item.x - r / 25, item.y + r / 25);\r\n                ctx.lineTo(item.x - r, item.y);\r\n                ctx.lineTo(item.x - r / 25, item.y - r / 25);\r\n                ctx.lineTo(item.x, item.y - r);\r\n                ctx.fill();\r\n                ctx.closePath();\r\n                return;\r\n            }\r\n\r\n            const gradient: CanvasGradient = ctx.createRadialGradient(\r\n                item.x, item.y, r * 0.3, item.x, item.y, r\r\n            );\r\n            gradient.addColorStop(0, `rgba(212,215,217,${ item.a })`);\r\n            gradient.addColorStop(0.6, `rgba(181,183,184,${ item.a * 0.6 })`);\r\n            gradient.addColorStop(1, `rgba(72,73,74,${ item.a * 0.1 })`);\r\n            ctx.fillStyle = gradient;\r\n            ctx.beginPath();\r\n            ctx.arc(item.x, item.y, r, 0, 2 * Math.PI);\r\n            ctx.fill();\r\n            ctx.closePath();\r\n\r\n            // 移动\r\n            let dx: number = (\r\n                (Math.random() - 0.5) * width / 36\r\n            ) / Shared.animationFPS;\r\n            let ri: number = Math.pow(dx, 2) / Math.pow(\r\n                Math.abs(dx) + Math.abs(\r\n                    item.prevDx * Shared.animationFPS / 2\r\n                ), 2\r\n            );\r\n            dx = ri * dx + (1 - ri) * item.prevDx;\r\n            item.x += dx * (1 - item.dist);\r\n            item.prevDx = dx;\r\n            item.y += (\r\n                1 + 4 * r / Shared.animationFPS\r\n            ) * height / 1600 * (1 + item.y / height * 0.4);\r\n            if (item.y - r <= height) {\r\n                // 留下来\r\n                let dd: number = (Math.random() - 0.5) * 0.005;\r\n                let ri: number = Math.pow(dd, 2) / Math.pow(\r\n                    Math.abs(dd) + Math.abs(\r\n                        item.prevDd * Shared.animationFPS / 2\r\n                    ), 2\r\n                );\r\n                dd = ri * dd + (1 - ri) * item.prevDd;\r\n                item.dist += dd;\r\n                item.prevDd = dd;\r\n                const a: number = Math.min(1, 1 - 0.2 * item.dist);\r\n                if (item.a < a) {\r\n                    item.a += Math.random() * 0.16 / Shared.animationFPS;\r\n                }\r\n                item.a = Math.min(item.a, a);\r\n                nextList.push(item);\r\n            }\r\n        });\r\n\r\n        if (Shared.particalEffects) {\r\n            Yuki.data.particals.forEach(p => {\r\n                if (typeof p.color === \"string\") {\r\n                    ctx2.fillStyle = p.color;\r\n                    ctx2.globalAlpha = p.animation.opacity(p.ms) * Shared.particalOpacity;\r\n                } else {\r\n                    ctx2.globalAlpha = Shared.particalOpacity;\r\n                    ctx2.fillStyle = `rgba(${ p.color.r },${ p.color.g },${ p.color.b },${\r\n                        p.animation.opacity(p.ms)\r\n                    })`;\r\n                }\r\n                ctx2.fillRect(\r\n                    p.animation.x(p.ms),\r\n                    p.animation.y(p.ms),\r\n                    p.animation.size(p.ms),\r\n                    p.animation.size(p.ms)\r\n                );\r\n    \r\n                p.ms += span;\r\n                if (p.animation.opacity(p.ms) > 0) {\r\n                    // 还未结束\r\n                    nextParticals.push(p);\r\n                }\r\n            });\r\n        }\r\n\r\n        // 鼠标指针\r\n        if (Yuki.data.cursor && Shared.cursorState !== \"origin\" ) {\r\n            ctx2.globalAlpha = 1;\r\n            ctx2.strokeStyle = \"rgb(8,36,76)\";\r\n            ctx2.lineWidth = 3;\r\n            ctx2.beginPath();\r\n            ctx2.moveTo(Yuki.data.cursor.x + 1, Yuki.data.cursor.y + 1);\r\n            ctx2.lineTo(Yuki.data.cursor.x + 17, Yuki.data.cursor.y + 17);\r\n            ctx2.lineTo(Yuki.data.cursor.x + 7, Yuki.data.cursor.y + 23);\r\n            ctx2.lineTo(Yuki.data.cursor.x + 1, Yuki.data.cursor.y + 1);\r\n            ctx2.stroke();\r\n            if (Shared.cursorState === \"normal\") {\r\n                ctx2.strokeStyle = \"rgb(23,126,209)\";\r\n                ctx2.lineWidth = 1;\r\n                ctx2.beginPath();\r\n                ctx2.moveTo(Yuki.data.cursor.x, Yuki.data.cursor.y);\r\n                ctx2.lineTo(Yuki.data.cursor.x + 16, Yuki.data.cursor.y + 16);\r\n                ctx2.lineTo(Yuki.data.cursor.x + 6, Yuki.data.cursor.y + 22);\r\n                ctx2.lineTo(Yuki.data.cursor.x, Yuki.data.cursor.y);\r\n                ctx2.stroke();\r\n            } else if (Shared.cursorState === \"pointer\") {\r\n                ctx2.strokeStyle = \"rgb(23,126,209)\";\r\n                ctx2.fillStyle = `rgba(136,220,254,${\r\n                    Math.abs(\r\n                        (new Date()).getTime() % 2000 - 1000\r\n                    ) % 1000 / 1000\r\n                })`;\r\n                ctx2.lineWidth = 1;\r\n                ctx2.beginPath();\r\n                ctx2.moveTo(Yuki.data.cursor.x, Yuki.data.cursor.y);\r\n                ctx2.lineTo(Yuki.data.cursor.x + 16, Yuki.data.cursor.y + 16);\r\n                ctx2.lineTo(Yuki.data.cursor.x + 6, Yuki.data.cursor.y + 22);\r\n                ctx2.lineTo(Yuki.data.cursor.x, Yuki.data.cursor.y);\r\n                ctx2.fill();\r\n                ctx2.stroke();\r\n            }\r\n        }\r\n\r\n        // 下一帧状态\r\n        Yuki.data.items = [...nextList];\r\n        Yuki.data.particals = [...nextParticals];\r\n        /** 再生成一个光球的概率指数 */\r\n        let possibility: number = (\r\n            max - Yuki.data.items.length\r\n        ) / max * 3 / Shared.animationFPS;\r\n\r\n        while (possibility > 0) {\r\n            possibility -= Math.random();\r\n\r\n            if (possibility > 0) {\r\n                Yuki.data.items.push({\r\n                    x: Math.random() * width,\r\n                    y: Math.random() * height * 0.2,\r\n                    r: (Math.random() * 0.25 + 0.09) * max,\r\n                    a: Math.random() * 0.03 + 0.02,\r\n                    dist: 0.7 - Math.random() * Math.random() * 0.3,\r\n                    prevDx: 0,\r\n                    prevDd: 0,\r\n                    active: true\r\n                });\r\n            }\r\n        }\r\n        \r\n        // 更新定时器\r\n        Yuki.next = setTimeout(() => {\r\n            Yuki.paint(ctx, ctx2);\r\n        }, span);\r\n    },\r\n    mouseListener: (e: JQuery.MouseEventBase) => {\r\n        if (e.type === \"mouseout\") {\r\n            Yuki.data.cursor = {\r\n                x: e.clientX,\r\n                y: e.clientY,\r\n                pressed: Yuki.data.cursor?.pressed || false\r\n            };\r\n        } else if (e.type === \"mouseover\" || e.type === \"mousemove\") {\r\n            Yuki.data.cursor = {\r\n                x: e.clientX,\r\n                y: e.clientY,\r\n                pressed: Yuki.data.cursor?.pressed || false\r\n            };\r\n        } else if (e.type === \"mousedown\") {\r\n            Yuki.data.cursor = {\r\n                x: e.clientX,\r\n                y: e.clientY,\r\n                pressed: true\r\n            };\r\n        } else if (e.type === \"mouseup\") {\r\n            Yuki.data.cursor = {\r\n                x: e.clientX,\r\n                y: e.clientY,\r\n                pressed: false\r\n            };\r\n        }\r\n        if (Yuki.data.cursor?.pressed) {\r\n            // 粒子效果\r\n            if (Shared.particalEffects) {\r\n                const x: number = e.clientX;\r\n                const y: number = e.clientY;\r\n                const color: string = Color.interpolate(\r\n                    `rgb(63,192,252)`,\r\n                    `rgb(193,62,69)`,\r\n                    (Math.random() * 0.2 + 0.8) * Math.min(\r\n                        1, Yuki.data.particals.length / 2400\r\n                    )\r\n                );\r\n                // 根据被选择的元素变更颜色\r\n                const selection: HTMLElement | null = getSelectedElement();\r\n                let color2: string = `rgb(63,192,252)`;\r\n                if (selection && (\r\n                    // 这里直接赋值给 color2，判断是否为空串\r\n                    color2 = (\r\n                        selection.nodeName === \"text\"\r\n                        || selection.nodeName === \"tspan\"\r\n                    ) ? getStyle(selection, \"fill\")\r\n                    : getStyle(selection, \"color\")\r\n                )) {\r\n                    // 操作已在 if 条件中完成\r\n                } else {\r\n                    color2 = color;\r\n                }\r\n                const lightness: number = Color.toHsl(color).l * 0.9;\r\n                const lightness2: number = Color.toHsl(color2).l * 0.9;\r\n    \r\n                for (let i: number = 0; i < (\r\n                    Shared.particalEffects === 1 ? 2\r\n                        : Shared.particalEffects === 2 ? 6\r\n                            : 10\r\n                ); i++) {\r\n                    /** x 方向运动速度(每秒移动距离) */\r\n                    let sx: number = (Math.random() * 2 - 1) * 120;\r\n                    sx += (sx > 0 ? 1 : -1) * 24 * Math.random();\r\n                    /** y 方向初始运动速度(每秒移动距离) */\r\n                    const sy: number = 0 - Math.random() * Math.random() * 256 - 128;\r\n    \r\n                    /** 颜色 */\r\n                    const c: string = Math.random() < 0.8 ? color : color2;\r\n                    const l: number = c === color ? lightness : lightness2;\r\n    \r\n                    Yuki.data.particals.push({\r\n                        color: c === color ? Color.getRgba(\r\n                            Color.setLightness(\r\n                                c,\r\n                                l + (1 - l) * Math.random() * 0.6\r\n                            )\r\n                        ) : c,\r\n                        animation: {\r\n                            x: ms => x + sx * ms / 1000,\r\n                            y: ms => y + sy * ms / 1000 + ms * ms / 1200,\r\n                            opacity: ms => 1 - 0.6 * ms / 400,\r\n                            size: ms => 6 - 1.5 * ms / 400\r\n                        },\r\n                        life: 400,\r\n                        ms: 0\r\n                    });\r\n                }\r\n                for (let i: number = 0; i < (\r\n                    Shared.particalEffects === 1 ? 3\r\n                        : Shared.particalEffects === 2 ? 9\r\n                            : 14\r\n                ); i++) {\r\n                    /** x 方向运动速度(每秒移动距离) */\r\n                    let sx: number = (Math.random() * 2 - 1) * 140;\r\n                    sx += (sx > 0 ? 1 : -1) * 28 * Math.random();\r\n                    /** y 方向初始运动速度(每秒移动距离) */\r\n                    const sy: number = 0 - Math.random() * Math.random() * 282 - 141;\r\n                    \r\n                    /** 颜色 */\r\n                    const c: string = Math.random() < 0.8 ? color : color2;\r\n                    const l: number = c === color ? lightness : lightness2;\r\n    \r\n                    Yuki.data.particals.push({\r\n                        color: c.startsWith(\"rgb\") ? Color.getRgba(\r\n                            Color.setLightness(\r\n                                c,\r\n                                l * 0.6 + (1 - l * 0.6) * Math.random() * 0.5\r\n                            )\r\n                        ) : c,\r\n                        animation: {\r\n                            x: ms => x + sx * ms / 1000,\r\n                            y: ms => y + sy * ms / 1000 + ms * ms / 2000,\r\n                            opacity: ms => 1 - 0.6 * ms / 400,\r\n                            size: ms => 4 - 1 * ms / 400\r\n                        },\r\n                        life: 400,\r\n                        ms: 0\r\n                    });\r\n                }\r\n            }\r\n\r\n            // 元素交互\r\n            for (let i: number = 0; i < Yuki.data.items.length; i++) {\r\n                if (!Yuki.data.items[i].active) {\r\n                    continue;\r\n                }\r\n                const d2: number = Math.pow(\r\n                    Yuki.data.items[i].x - e.clientX, 2\r\n                ) + Math.pow(\r\n                    Yuki.data.items[i].y - e.clientY, 2\r\n                );\r\n                if (d2 <= Math.pow(Yuki.data.items[i].r, 2)) {\r\n                    const item: SnowBall = Yuki.data.items[i];\r\n                    // 防抖\r\n                    item.active = false;\r\n                    setTimeout(() => {\r\n                        if (item) {\r\n                            item.active = true;\r\n                        }\r\n                    }, 2000);\r\n                    for (let t: number = 0; t < 2600; t += Math.floor(\r\n                        1000 / Shared.animationFPS\r\n                    )) {\r\n                        setTimeout(() => {\r\n                            if (item) {\r\n                                item.y -= (\r\n                                    1 + 4 * item.r * item.dist / Shared.animationFPS\r\n                                ) * Math.sqrt(2600 - t) * $(window).height()! / 40000;\r\n                            }\r\n                        }, t);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    touchListener: (e: JQuery.TouchEventBase) => {\r\n        Yuki.data.cursor = void 0;\r\n        if (e.touches.length) {\r\n            for (let j: number = 0; j < e.touches.length; j++) {\r\n                // 粒子效果\r\n                if (Shared.particalEffects) {\r\n                    const x: number = e.touches[j].clientX;\r\n                    const y: number = e.touches[j].clientY;\r\n                    for (let i: number = 0; i < (\r\n                        Shared.particalEffects === 1 ? 2\r\n                            : Shared.particalEffects === 2 ? 5\r\n                                : 8\r\n                    ); i++) {\r\n                        /** x 方向运动速度(每秒移动距离) */\r\n                        let sx: number = (Math.random() * 2 - 1) * 100;\r\n                        sx += (sx > 0 ? 1 : -1) * 20 * Math.random();\r\n                        /** y 方向初始运动速度(每秒移动距离) */\r\n                        const sy: number = 0 - Math.random() * Math.random() * 256 - 128;\r\n        \r\n                        Yuki.data.particals.push({\r\n                            color: {\r\n                                r: 63,\r\n                                g: 192 + Math.floor(Math.random() * 30),\r\n                                b: 252\r\n                            },\r\n                            animation: {\r\n                                x: ms => x + sx * ms / 1000,\r\n                                y: ms => y + sy * ms / 1000 + ms * ms / 1600,\r\n                                opacity: ms => 1 - 0.4 * ms / 400,\r\n                                size: ms => 6 - 1.5 * ms / 400\r\n                            },\r\n                            life: 400,\r\n                            ms: 0\r\n                        });\r\n                    }\r\n                    for (let i: number = 0; i < (\r\n                        Shared.particalEffects === 1 ? 3\r\n                            : Shared.particalEffects === 2 ? 7\r\n                                : 10\r\n                    ); i++) {\r\n                        /** x 方向运动速度(每秒移动距离) */\r\n                        let sx: number = (Math.random() * 2 - 1) * 120;\r\n                        sx += (sx > 0 ? 1 : -1) * 24 * Math.random();\r\n                        /** y 方向初始运动速度(每秒移动距离) */\r\n                        const sy: number = 0 - Math.random() * Math.random() * 282 - 141;\r\n        \r\n                        Yuki.data.particals.push({\r\n                            color: {\r\n                                r: 63,\r\n                                g: 172 + Math.floor(Math.random() * 40),\r\n                                b: 252\r\n                            },\r\n                            animation: {\r\n                                x: ms => x + sx * ms / 1000,\r\n                                y: ms => y + sy * ms / 1000 + ms * ms / 1200,\r\n                                opacity: ms => 1 - 0.6 * ms / 400,\r\n                                size: ms => 4 - 1 * ms / 400\r\n                            },\r\n                            life: 400,\r\n                            ms: 0\r\n                        });\r\n                    }\r\n                }\r\n                \r\n                // 元素交互\r\n                for (let i: number = 0; i < Yuki.data.items.length; i++) {\r\n                    if (!Yuki.data.items[i].active) {\r\n                        continue;\r\n                    }\r\n                    const d2: number = Math.pow(\r\n                        Yuki.data.items[i].x - e.touches[j].clientX, 2\r\n                    ) + Math.pow(\r\n                        Yuki.data.items[i].y - e.touches[j].clientY, 2\r\n                    );\r\n                    if (d2 <= Math.pow(Yuki.data.items[i].r, 2) + 11) {\r\n                        const item: SnowBall = Yuki.data.items[i];\r\n                        // 防抖\r\n                        item.active = false;\r\n                        setTimeout(() => {\r\n                            if (item) {\r\n                                item.active = true;\r\n                            }\r\n                        }, 2000);\r\n                        for (let t: number = 0; t < 2600; t += Math.floor(\r\n                            1000 / Shared.animationFPS\r\n                        )) {\r\n                            setTimeout(() => {\r\n                                if (item) {\r\n                                    item.y -= (\r\n                                        1 + 4 * item.r * item.dist / Shared.animationFPS\r\n                                    ) * Math.sqrt(2600 - t) * $(window).height()! / 40000;\r\n                                }\r\n                            }, t);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-08-29 00:17:10 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-12-05 20:53:32\r\n */\r\n\r\nimport { Theme } from \"./typedict\";\r\nimport { Yuki } from \"../themes/Yuki\";\r\nimport { Opening } from \"../kanata/Opening\";\r\n// import { NormalV3 } from \"../themes/NormalV3\";\r\n\r\n\r\nexport type SupportedVersion = \"2.x\" | \"3.x\";\r\n\r\nexport interface SharedItem {\r\n    version: SupportedVersion;\r\n    theme: Theme;\r\n    cursorState: \"normal\" | \"pointer\" | \"origin\";\r\n    animationFPS: number;\r\n    realFPS: number;\r\n    autoFPS: boolean;\r\n    particalEffects: 0 | 1 | 2 | 3;\r\n    particalOpacity: number;\r\n    opening?: Opening;\r\n};\r\n\r\nexport let Shared: SharedItem = {\r\n    version: \"2.x\",\r\n    theme: Yuki,\r\n    cursorState: \"normal\",\r\n    animationFPS: 60,\r\n    realFPS: 60,\r\n    autoFPS: true,\r\n    particalEffects: 2,\r\n    particalOpacity: 0.8\r\n};\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-09-09 18:37:14 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-09-30 10:20:04\r\n */\r\n\r\nimport React from \"react\";\r\nimport $ from \"jquery\";\r\nimport { Shared } from \"../methods/globals\";\r\nimport Color from \"../preference/Color\";\r\n\r\n\r\nexport const Navigator = (props: { children?: any }): JSX.Element => {\r\n    let display: boolean = false;\r\n    let timers: Array<NodeJS.Timeout> = [];\r\n    let width: number = 0;\r\n\r\n    return (\r\n        <div className=\"navi\"\r\n        style={{\r\n            position: \"fixed\",\r\n            top: \"20vh\",\r\n            fontSize: \"calc(14px + 0.5vw)\",\r\n            backgroundColor: Color.interpolate(\r\n                Shared.theme.colortab.background,\r\n                Shared.theme.colortab.base,\r\n                0.7\r\n            ),\r\n            color: Shared.theme.colortab.color,\r\n            display: \"flex\",\r\n            alignItems: \"stretch\",\r\n            zIndex: 999\r\n        }} >\r\n            <div key=\"menu\"\r\n            style={{\r\n                // minWidth: \"calc(64px + 1.5vw)\",\r\n                minWidth: \"0\",\r\n                maxWidth: \"0\",\r\n                padding: \"8px 0\",\r\n                fontSize: \"calc(14px + 0.5vw)\",\r\n                backgroundColor: Color.interpolate(\r\n                    Shared.theme.colortab.background,\r\n                    Shared.theme.colortab.base,\r\n                    0.7\r\n                ),\r\n                color: Shared.theme.colortab.color,\r\n                display: \"flex\",\r\n                flexDirection: \"column\",\r\n                justifyContent: \"space-between\",\r\n                alignItems: \"center\",\r\n                overflow: \"hidden\"\r\n            }} >\r\n                { props.children }\r\n            </div>\r\n            <div key=\"switch\"\r\n            style={{\r\n                padding: \"8px 6px\",\r\n                fontSize: \"calc(14px + 0.5vw)\",\r\n                backgroundColor: Color.interpolate(\r\n                    Shared.theme.colortab.background,\r\n                    Shared.theme.colortab.base,\r\n                    0.6\r\n                ),\r\n                color: Shared.theme.colortab.color,\r\n                display: \"flex\",\r\n                flexDirection: \"column\",\r\n                justifyContent: \"space-between\",\r\n                alignItems: \"center\"\r\n            }}\r\n            onMouseOver={\r\n                () => {\r\n                    Shared.cursorState = \"pointer\";\r\n                }\r\n            }\r\n            onMouseOut={\r\n                () => {\r\n                    Shared.cursorState = \"normal\";\r\n                }\r\n            }\r\n            onClick={\r\n                e => {\r\n                    timers.forEach(timer => {\r\n                        clearTimeout(timer);\r\n                    });\r\n                    timers = [];\r\n\r\n                    const element = e.currentTarget;\r\n                    const sibling: Element = element.previousElementSibling!;\r\n                    const child: JQuery<HTMLElement> = $(element).children(\"label\");\r\n\r\n                    if (display) {\r\n                        width = sibling.clientWidth;\r\n                        \r\n                        for (let ol: number = width, t: number = 1; true; ol-=2, t++) {\r\n                            const w: number = ol;\r\n\r\n                            timers.push(\r\n                                setTimeout(() => {\r\n                                    $(sibling).css(\r\n                                        \"min-width\", `${ Math.max(w, 0) }px`\r\n                                    ).css(\r\n                                        \"max-width\", `${ Math.max(w, 0) }px`\r\n                                    );\r\n                                }, 2 * t)\r\n                            );\r\n\r\n                            if (ol < 0) {\r\n                                break;\r\n                            }\r\n                        }\r\n                        \r\n                        child.text(\"❱\");\r\n                    } else {\r\n                        for (let ol: number = 0, t: number = 1; true; ol+=2, t++) {\r\n                            const w: number = ol;\r\n                            const W: number = width;\r\n\r\n                            timers.push(\r\n                                setTimeout(() => {\r\n                                    $(sibling).css(\r\n                                        \"min-width\", `${\r\n                                            w > W ? \"calc(64px + 1.5vw)\" : `${ w }px`\r\n                                        }`\r\n                                    ).css(\r\n                                        \"max-width\", `${\r\n                                            w > W ? \"unset\" : `${ w }px`\r\n                                        }`\r\n                                    );\r\n                                }, 2 * t)\r\n                            );\r\n\r\n                            if (ol > W) {\r\n                                break;\r\n                            }\r\n                        }\r\n                        \r\n                        child.text(\"❰\");\r\n                    }\r\n                    display = !display;\r\n                }\r\n            } >\r\n                <label\r\n                style={{\r\n                    cursor: \"none\",\r\n                    color: Shared.theme.colortab.color,\r\n                    pointerEvents: \"all\",\r\n                    transform: \"translateY(-50%)\",\r\n                    position: \"relative\",\r\n                    top: \"50%\"\r\n                }} >\r\n                    { display ? \"❰\" : \"❱\" }\r\n                </label>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-08-29 21:17:55 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-12-06 00:44:38\r\n */\r\n\r\nimport React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Shared } from \"../methods/globals\";\r\nimport Color from \"../preference/Color\";\r\n\r\n\r\nexport class SettingsButton extends Component<{}, {}> {\r\n\r\n    public constructor(props: {}) {\r\n        super(props);\r\n    }\r\n\r\n    public render(): JSX.Element {\r\n        return (\r\n            <Link to=\"/v2/settings\"\r\n            style={{\r\n                textDecoration: \"none\",\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                cursor: \"none\",\r\n                padding: \"8px 0\",\r\n                margin: \"0 12px 0 8px\"\r\n            }}\r\n            onMouseOver={\r\n                () => {\r\n                    Shared.cursorState = \"pointer\";\r\n                }\r\n            }\r\n            onMouseOut={\r\n                () => {\r\n                    Shared.cursorState = \"normal\";\r\n                }\r\n            } >\r\n                <svg viewBox=\"4 4 32 32\"\r\n                style={{\r\n                    width: \"calc(12px + 1vw)\",\r\n                    height: \"calc(12px + 1vw)\"\r\n                }} >\r\n                    <path d={\r\n                        \"M32,22 A16.5,16.5,0,0,0,32,18 L29,18 A13.5,13.5,0,0,0,28,15\"\r\n                        + \" L30,13 A16.5,16.5,0,0,0,27,10 L25,12 A13.5,13.5,0,0,0,22,11\"\r\n                        + \" L22,8 A16.5,16.5,0,0,0,18,8 L18,11 A13.5,13.5,0,0,0,15,12\"\r\n                        + \" L13,10 A16.5,16.5,0,0,0,10,13 L12,15 A13.5,13.5,0,0,0,11,18\"\r\n                        + \" L8,18 A16.5,16.5,0,0,0,8,22 L11,22 A13.5,13.5,0,0,0,12,25\"\r\n                        + \" L10,27 A16.5,16.5,0,0,0,13,30 L15,28 A13.5,13.5,0,0,0,18,29\"\r\n                        + \" L18,32 A16.5,16.5,0,0,0,22,32 L22,29 A13.5,13.5,0,0,0,25,28\"\r\n                        + \" L27,30 A16.5,16.5,0,0,0,30,27 L28,25 A13.5,13.5,0,0,0,29,22\"\r\n                    }\r\n                    style={{\r\n                        fill: Shared.theme.colortab.color,\r\n                        pointerEvents: \"all\",\r\n                        cursor: \"none\"\r\n                    }} />\r\n                    <circle\r\n                    cx={ 20 } cy={ 20 } r={ 5.6 }\r\n                    style={{\r\n                        fill: Color.interpolate(\r\n                            Shared.theme.colortab.background,\r\n                            Shared.theme.colortab.base,\r\n                            0.7\r\n                        )\r\n                    }} />\r\n                </svg>\r\n                <label\r\n                style={{\r\n                    letterSpacing: \"-0.05em\",\r\n                    fontSize: \"90%\",\r\n                    cursor: \"none\",\r\n                    color: Shared.theme.colortab.color,\r\n                    pointerEvents: \"all\",\r\n                    width: \"calc(48px + 1.5vw)\",\r\n                    padding: \"0 4px\"\r\n                }} >\r\n                    settings\r\n                </label>\r\n            </Link>\r\n        );\r\n    }\r\n\r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-09-01 03:44:39 \r\n * @Last Modified by: Antoine YANG\r\n * @Last Modified time: 2020-09-01 03:53:52\r\n */\r\n\r\nimport $ from \"jquery\";\r\nimport { debounced } from \"./decorator\";\r\n\r\n\r\nexport const toast: () => void | null = debounced((text: string) => {\r\n    const t = document.createElement(\"div\");\r\n    t.style.wordBreak = \"break-all\";\r\n    t.style.display = \"inline-block\";\r\n    t.style.position = \"absolute\";\r\n    t.style.top = \"18vh\";\r\n    t.style.left = \"32vw\";\r\n    t.style.width = \"36vw\";\r\n    t.style.textAlign = \"center\";\r\n    t.style.backgroundColor = \"rgb(22,22,22)\";\r\n    t.style.color = \"rgb(244,255,226)\";\r\n    t.style.padding = \"3vh 3vw\";\r\n    t.style.opacity = \"0.8\";\r\n    t.innerText = text;\r\n    document.body.appendChild(t);\r\n    \r\n    $(t).animate({\r\n        top: \"14vh\"\r\n    }, 800);\r\n\r\n    setTimeout(() => {\r\n        $(t).fadeOut(600);\r\n        setTimeout(() => {\r\n            $(t).remove();\r\n        }, 600);\r\n    }, 800);\r\n});\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-08-31 01:55:36 \r\n * @Last Modified by: Antoine YANG\r\n * @Last Modified time: 2020-08-31 02:27:02\r\n */\r\n\r\n/**\r\n * 获取一个函数的防抖引用.\r\n *\r\n * @template RT 原函数返回值\r\n * @param {(...args: Array<any>) => RT} f 原函数\r\n * @param {number} [span=200] 无效化间隔\r\n * @returns {(() => RT | null)}\r\n */\r\nexport const debounced = <RT>(\r\n    f: (...args: Array<any>) => RT, span: number = 200\r\n): () => RT | null => {\r\n    let flag: boolean = true;\r\n\r\n    return function () {\r\n        if (flag) {\r\n            flag = false;\r\n            setTimeout(() => {\r\n                flag = true;\r\n            }, span);\r\n            return f.apply({}, arguments as any);\r\n        }\r\n        return null;\r\n    };\r\n};\r\n\r\n/**\r\n * 获取一个函数的防抖异步引用，\r\n * 当这个函数被连续触发时，只有最后一次生效.\r\n *\r\n * @template RT 原函数返回值\r\n * @param {() => RT} f 原函数\r\n * @param {number} [span=200] 无效化间隔\r\n * @returns {Promise<() => Promise<RT | null>>}\r\n */\r\nexport const lastCalled = async <RT>(\r\n    f: () => RT, span: number = 200\r\n): Promise<() => Promise<RT | null>> => {\r\n    let curId: number = 0;\r\n\r\n    return async () => {\r\n        curId = (curId + 1) % 1e6;\r\n        const id: number = curId;\r\n        const p: Promise<RT | null> = new Promise<RT | null>((resolve, reject) => {\r\n            setTimeout(() => {\r\n                if (id !== curId) {\r\n                    resolve(null);\r\n                }\r\n                try {\r\n                    resolve(f());\r\n                } catch (e) {\r\n                    reject(e);\r\n                }\r\n            }, span);\r\n        });\r\n        return await p;\r\n    };\r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-09-01 03:44:26 \r\n * @Last Modified by: Antoine YANG\r\n * @Last Modified time: 2020-09-01 03:51:31\r\n */\r\n\r\nimport { toast } from \"./toast\";\r\n\r\n\r\nconst clip = document.createElement(\"div\");\r\n\r\nwindow.onload = () => {\r\n    clip.style.width = \"0\";\r\n    clip.style.height = \"0\";\r\n    clip.style.overflow = \"hidden\";\r\n    clip.style.userSelect = \"unset\";\r\n    document.body.appendChild(clip);\r\n};\r\n\r\nexport const execCopy = (text: string, callback?: () => void) => {\r\n    if (!navigator.userAgent.toLocaleLowerCase().includes(\"firefox\")) {\r\n        (toast as any)(\"This function doesnot work on navigators except for FireFox.\");\r\n        return;\r\n    }\r\n\r\n    clip.innerText = text;\r\n\r\n    const selection = window.getSelection()!;\r\n    selection.removeAllRanges();\r\n\r\n    const range = document.createRange();\r\n    range.selectNodeContents(clip);\r\n\r\n    selection.addRange(range);\r\n\r\n    document.execCommand('copy');\r\n\r\n    selection.removeAllRanges();\r\n\r\n    if (callback) {\r\n        callback();\r\n    } else {\r\n        (toast as any)(\"Copied successfully\");\r\n    }\r\n};\r\n\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-09-01 01:28:18 \r\n * @Last Modified by: Antoine YANG\r\n * @Last Modified time: 2020-09-05 15:25:20\r\n */\r\n\r\nimport React from \"react\";\r\nimport { Shared } from \"../methods/globals\";\r\nimport Color from \"../preference/Color\";\r\nimport { execCopy } from \"../methods/copy\";\r\n\r\n\r\nexport const InfoView = (): JSX.Element => {\r\n    return (\r\n        <div style={{\r\n            color: Shared.theme.colortab.color,\r\n            background: 'rgba(0, 0, 0, 0) url(\"./images/home.png\") no-repeat scroll 22% 0% / cover',\r\n            margin: \"calc(10px + 8vh) 5vw calc(10px + 2vh)\",\r\n            minHeight: \"calc(12vw - 10px)\",\r\n            padding: \"calc(-20px + 3vh) calc(6px + 1.5vw) calc(-20px + 3vh) 28%\",\r\n            fontSize: \"calc(8px + 0.6vmax)\",\r\n            border: `1px solid ${ Shared.theme.colortab.border }`,\r\n            boxShadow: `6px 5px 0 1px ${\r\n                Shared.theme.colortab.border.replace(\r\n                    \"(\", \"a(\"\r\n                ).replace(\r\n                    \")\", \",0.1)\"\r\n                )\r\n            }`\r\n        }} >\r\n            <div key=\"name\" style={{\r\n                maxWidth: \"36vw\",\r\n                fontSize: \"calc(10px + 1vmax)\",\r\n                margin: \"1em auto 0.6em\"\r\n            }} >\r\n                <label key=\"1\" style={{\r\n                    display: \"inline-block\",\r\n                    margin: \"0 auto\",\r\n                    cursor: \"none\"\r\n                }} >\r\n                    { `Zhendong Yang` }\r\n                </label>\r\n                <label key=\"2\" style={{\r\n                    display: \"inline-block\",\r\n                    margin: \"0 auto\",\r\n                    padding: \"0 0.5em\",\r\n                    cursor: \"none\",\r\n                    opacity: 0.9,\r\n                    fontSize: \"90%\"\r\n                }} >\r\n                    { `(Kanata You)` }\r\n                </label>\r\n            </div>\r\n            <label key=\"prof\" style={{\r\n                display: \"inline-block\",\r\n                padding: \"0.1em 0.6em\",\r\n                margin: \"0.2em auto\",\r\n                cursor: \"none\",\r\n                color: Color.setLightness(\r\n                    Shared.theme.colortab.color, 0.1\r\n                ),\r\n                backgroundColor: Color.setLightness(\r\n                    Shared.theme.colortab.color, 0.8\r\n                ).replace(\r\n                    \"(\", \"a(\"\r\n                ).replace(\r\n                    \")\", \",0.3)\"\r\n                )\r\n            }} >\r\n                { `Student, China` }\r\n            </label>\r\n            <br />\r\n            <label key=\"belong\" style={{\r\n                display: \"inline-block\",\r\n                fontSize: \"90%\",\r\n                padding: \"0.3em 0.6em\",\r\n                margin: \"0.2em auto 6vh\",\r\n                cursor: \"none\",\r\n                color: Color.setLightness(\r\n                    Shared.theme.colortab.color, 0.1\r\n                ),\r\n                backgroundColor: Color.setLightness(\r\n                    Shared.theme.colortab.color, 0.8\r\n                ).replace(\r\n                    \"(\", \"a(\"\r\n                ).replace(\r\n                    \")\", \",0.3)\"\r\n                )\r\n            }} >\r\n                School of Information Management and Artifitial Intelligence,\r\n                Zhejiang University of Finance and Economics\r\n            </label>\r\n            <br />\r\n            <label key=\"contact\" style={{\r\n                display: \"inline-block\",\r\n                padding: \"0.3em 0.6em 0.1em\",\r\n                margin: \"0.2em auto 0\",\r\n                cursor: \"none\",\r\n                fontSize: \"calc(12px + 0.4vmax)\",\r\n                color: Shared.theme.colortab.frontground\r\n            }} >\r\n                Contact Info\r\n            </label>\r\n            <br />\r\n            <div key=\"links\" style={{\r\n                margin: \"1vh 0 calc(4vh - 12px)\",\r\n                padding: \"0.6vh 1vw\",\r\n                display: \"inline-flex\",\r\n                backgroundColor: Shared.theme.colortab.frontground.replace(\r\n                    \"(\", \"a(\"\r\n                ).replace(\r\n                    \")\", \",0.1)\"\r\n                )\r\n            }} >\r\n                <div key=\"github\"\r\n                style={{\r\n                    margin: \"0 calc(1vw - 4px)\",\r\n                    padding: \"0 2px\",\r\n                    display: \"flex\",\r\n                    alignItems: \"center\"\r\n                }}\r\n                onMouseEnter={\r\n                    () => {\r\n                        Shared.cursorState = \"pointer\";\r\n                    }\r\n                }\r\n                onMouseLeave={\r\n                    () => {\r\n                        Shared.cursorState = \"normal\";\r\n                    }\r\n                } >\r\n                    <a href=\"https://github.com/AntoineYANG\" target=\"new\"\r\n                    style={{\r\n                        cursor: \"none\"\r\n                    }} >\r\n                        <svg height=\"28\" width=\"28\" viewBox=\"0 0 16 16\" version=\"1.1\"\r\n                        aria-hidden=\"true\"\r\n                        style={{\r\n                            transform: \"translateY(1.2px)\"\r\n                        }} >\r\n                            <path fillRule=\"evenodd\"\r\n                            d={\r\n                                \"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-\"\r\n                                + \".17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-\"\r\n                                + \".94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-\"\r\n                                + \".01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.8\"\r\n                                + \"7.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.\"\r\n                                + \"15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.3\"\r\n                                + \"2-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82\"\r\n                                + \".44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.8\"\r\n                                + \"7 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01\"\r\n                                + \" 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"\r\n                            }\r\n                            style={{\r\n                                fill: Shared.theme.colortab.frontground2,\r\n                                pointerEvents: \"none\"\r\n                            }} />\r\n                        </svg>\r\n                    </a>\r\n                </div>\r\n                <div key=\"npm\"\r\n                style={{\r\n                    margin: \"0 calc(1vw - 4px)\",\r\n                    padding: \"0 2px\",\r\n                    display: \"flex\",\r\n                    alignItems: \"center\"\r\n                }}\r\n                onMouseEnter={\r\n                    () => {\r\n                        Shared.cursorState = \"pointer\";\r\n                    }\r\n                }\r\n                onMouseLeave={\r\n                    () => {\r\n                        Shared.cursorState = \"normal\";\r\n                    }\r\n                } >\r\n                    <a href=\"https://www.npmjs.com/~kanatayou\" target=\"new\"\r\n                    style={{\r\n                        cursor: \"none\"\r\n                    }} >\r\n                        <svg height=\"28\" width=\"28\" viewBox=\"0 0 780 250\">\r\n                            <path d={\r\n                                \"M240,250h100v-50h100V0H240V250z M340,50h50v100h-50V50z \"\r\n                                + \"M480,0v200h100V50h50v150h50V50h50v150h50V0H480z \"\r\n                                + \"M0,200h100V50h50v150h50V0H0V200z\"\r\n                            }\r\n                            style={{\r\n                                fill: Shared.theme.colortab.frontground2\r\n                            }} />\r\n                        </svg>\r\n                    </a>\r\n                </div>\r\n                <div key=\"mail\" title=\"Click to copy\"\r\n                style={{\r\n                    margin: \"0 calc(1vw - 4px)\",\r\n                    padding: \"0 2px\",\r\n                    display: \"flex\",\r\n                    alignItems: \"center\"\r\n                }}\r\n                onMouseEnter={\r\n                    () => {\r\n                        Shared.cursorState = \"pointer\";\r\n                    }\r\n                }\r\n                onMouseLeave={\r\n                    () => {\r\n                        Shared.cursorState = \"normal\";\r\n                    }\r\n                } >\r\n                    <svg height=\"28\" width=\"28\" version=\"1.1\"\r\n                    aria-hidden=\"true\"\r\n                    style={{\r\n                        transform: \"translateY(1.2px)\"\r\n                    }}\r\n                    onClick={\r\n                        () => {\r\n                            execCopy(\"antoineyang99@gmail.com\");\r\n                        }\r\n                    } >\r\n                        <rect\r\n                        x={ 2 } y={ 5 } width={ 24 } height={ 18 }\r\n                        style={{\r\n                            fill: Shared.theme.colortab.color,\r\n                            pointerEvents: \"none\"\r\n                        }} />\r\n                        <path\r\n                        d=\"M3,23 L3,6 L14,14 L25,6 L25,23\"\r\n                        style={{\r\n                            fill: \"none\",\r\n                            stroke: Shared.theme.colortab.frontground2,\r\n                            strokeWidth: 2,\r\n                            pointerEvents: \"none\"\r\n                        }} /> />\r\n                    </svg>\r\n                </div>\r\n                <div key=\"zhihu\"\r\n                style={{\r\n                    margin: \"0 calc(1vw - 4px)\",\r\n                    padding: \"0 2px\",\r\n                    display: \"flex\",\r\n                    alignItems: \"center\"\r\n                }}\r\n                onMouseEnter={\r\n                    () => {\r\n                        Shared.cursorState = \"pointer\";\r\n                    }\r\n                }\r\n                onMouseLeave={\r\n                    () => {\r\n                        Shared.cursorState = \"normal\";\r\n                    }\r\n                } >\r\n                    <a href=\"https://www.zhihu.com/people/bu-yuan-86-22\" target=\"new\"\r\n                    style={{\r\n                        cursor: \"none\"\r\n                    }} >\r\n                        <img src=\"./images/zhihu.jpeg\" alt=\"知乎\" width=\"28\" height=\"28\"\r\n                        onDragStart={ e => e.preventDefault() }\r\n                        style={{\r\n                            transform: \"translateY(1.6px)\"\r\n                        }} />\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-08-30 22:42:24 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-12-06 00:53:19\r\n */\r\n\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Shared } from \"../methods/globals\";\r\n\r\n\r\nexport interface HomeButtonProps {\r\n    active: boolean;\r\n};\r\n\r\nexport const HomeButton = (props: HomeButtonProps): JSX.Element => {\r\n    const svg: JSX.Element = (\r\n        <label\r\n        style={{\r\n            letterSpacing: \"0.1em\",\r\n            cursor: \"none\",\r\n            color: Shared.theme.colortab.color,\r\n            pointerEvents: \"all\",\r\n            width: \"calc(48px + 1.5vw)\",\r\n            padding: \"calc(5px + 0.2vw) 12px\",\r\n            margin: \"0 12px\"\r\n        }}\r\n        onMouseOver={\r\n            () => {\r\n                Shared.cursorState = \"pointer\";\r\n            }\r\n        }\r\n        onMouseOut={\r\n            () => {\r\n                Shared.cursorState = \"normal\";\r\n            }\r\n        } >\r\n            HOME\r\n        </label>\r\n    );\r\n\r\n    return props.active ? (\r\n        <Link to=\"/v2\"\r\n        style={{\r\n            textDecoration: \"none\",\r\n            display: \"flex\",\r\n            cursor: \"none\"\r\n        }} >\r\n            { svg }\r\n        </Link>\r\n    ) : (\r\n        <>\r\n            { svg }\r\n        </>\r\n    );\r\n};\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-09-24 17:46:45 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-09-24 18:08:21\r\n */\r\n\r\nimport { Component } from \"react\";\r\n\r\n\r\nexport interface InitComponentProps<S> {\r\n    init: Partial<S>;\r\n};\r\n\r\nexport class InitComponent<P, S> extends Component<InitComponentProps<S> & P, S> {\r\n\r\n    public constructor(props: InitComponentProps<S> & P) {\r\n        super(props);\r\n    }\r\n\r\n    public componentDidMount(): void {\r\n        this.setState(this.props.init as unknown as Pick<S, keyof S>);\r\n    }\r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-09-01 19:34:27 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-09-30 09:48:35\r\n */\r\n\r\nimport React from \"react\";\r\nimport { Shared } from \"../methods/globals\";\r\nimport { Article } from \"../methods/typedict\";\r\nimport Color from \"../preference/Color\";\r\nimport { InitComponent, InitComponentProps } from \"./InitComponent\";\r\n\r\n\r\nexport interface ListViewProps<ItemType> {\r\n    title: string;\r\n    maxPerPage: number;\r\n    display: (item: ItemType, index: number) => JSX.Element;\r\n    style?: React.CSSProperties;\r\n};\r\n\r\nexport interface ListViewState<ItemType> {\r\n    items: Array<ItemType>;\r\n    pageId: number;\r\n};\r\n\r\n/**\r\n *\r\n *\r\n * @export\r\n * @class ListView\r\n * @extends {InitComponent<ListViewProps<ItemType>, ListViewState<ItemType>>}\r\n * @template ItemType\r\n */\r\nexport class ListView<ItemType=Article> extends InitComponent<\r\n    ListViewProps<ItemType>, ListViewState<ItemType>\r\n> {\r\n\r\n    protected pageInput: React.RefObject<HTMLInputElement>;\r\n\r\n    protected pageCount: number;\r\n\r\n    public constructor(props: ListViewProps<ItemType> & InitComponentProps<ItemType>) {\r\n        super(props);\r\n        this.state = {\r\n            items: [],\r\n            pageId: 0,\r\n            ...(this.props.init as unknown as Pick<\r\n                ListViewState<ItemType>, keyof ListViewState<ItemType>\r\n            >)\r\n        };\r\n        \r\n        this.pageInput = React.createRef<HTMLInputElement>();\r\n        this.pageCount = 0;\r\n    }\r\n\r\n    public render(): JSX.Element {\r\n        this.pageCount = Math.ceil(this.state.items.length / this.props.maxPerPage);\r\n\r\n        const data: Array<ItemType> = this.state.items.slice(\r\n            this.state.pageId * this.props.maxPerPage,\r\n            (this.state.pageId + 1) * this.props.maxPerPage\r\n        );\r\n\r\n        return (\r\n            <div style={{\r\n                color: Shared.theme.colortab.color,\r\n                margin: \"calc(10px + 4vh) 0 calc(10px + 2vh)\",\r\n                padding: \"1vh 5vw\",\r\n                textAlign: \"left\",\r\n                ...this.props.style\r\n            }} >\r\n                <div key=\"head\" style={{\r\n                    display: \"inline-block\",\r\n                    minWidth: \"40%\"\r\n                }} >\r\n                    <h3>\r\n                        { this.props.title }\r\n                    </h3>\r\n                </div>\r\n                <div key=\"tools\" style={{\r\n                    display: \"inline-flex\",\r\n                    minWidth: \"60%\",\r\n                    alignItems: \"stretch\",\r\n                    overflow: \"hidden\",\r\n                    justifyContent: \"end\"\r\n                }} >\r\n                {\r\n                    this.state.items.length ? (\r\n                        <>\r\n                            <button type=\"button\" key=\"btn_first\"\r\n                            onMouseOver={\r\n                                () => {\r\n                                    Shared.cursorState = \"pointer\";\r\n                                }\r\n                            }\r\n                            onMouseOut={\r\n                                () => {\r\n                                    Shared.cursorState = \"normal\";\r\n                                }\r\n                            }\r\n                            style={{\r\n                                margin: \"0 4px 0 auto\",\r\n                                padding: \"2px 6px\",\r\n                                color: Color.setLightness(\r\n                                    Shared.theme.colortab.background, 0.1\r\n                                ),\r\n                                cursor: \"none\",\r\n                                border: `1px solid ${ Shared.theme.colortab.frontground2 }`,\r\n                                backgroundColor: Shared.theme.colortab.frontground2\r\n                            }}\r\n                            onClick={\r\n                                () => {\r\n                                    const val: number = 0;\r\n                                    if (val !== this.state.pageId) {\r\n                                        this.setState({\r\n                                            pageId: val\r\n                                        });\r\n                                    }\r\n                                }\r\n                            } >\r\n                                «\r\n                            </button>\r\n                            <button type=\"button\" key=\"btn_prev\"\r\n                            onMouseOver={\r\n                                () => {\r\n                                    Shared.cursorState = \"pointer\";\r\n                                }\r\n                            }\r\n                            onMouseOut={\r\n                                () => {\r\n                                    Shared.cursorState = \"normal\";\r\n                                }\r\n                            }\r\n                            style={{\r\n                                margin: \"0 8px 0 2px\",\r\n                                padding: \"2px 8px\",\r\n                                color: Color.setLightness(\r\n                                    Shared.theme.colortab.background, 0.1\r\n                                ),\r\n                                cursor: \"none\",\r\n                                border: `1px solid ${ Shared.theme.colortab.frontground2 }`,\r\n                                backgroundColor: Shared.theme.colortab.frontground2\r\n                            }}\r\n                            onClick={\r\n                                () => {\r\n                                    const val: number = Math.max(\r\n                                        1, this.state.pageId\r\n                                    ) - 1;\r\n                                    if (val !== this.state.pageId) {\r\n                                        this.setState({\r\n                                            pageId: val\r\n                                        });\r\n                                    }\r\n                                }\r\n                            } >\r\n                                ‹\r\n                            </button>\r\n                            <input ref={ this.pageInput } type=\"number\"\r\n                            min={ 1 } max={ this.pageCount }\r\n                            onMouseOver={\r\n                                () => {\r\n                                    Shared.cursorState = \"pointer\";\r\n                                }\r\n                            }\r\n                            onMouseOut={\r\n                                () => {\r\n                                    Shared.cursorState = \"normal\";\r\n                                }\r\n                            }\r\n                            onKeyPress={\r\n                                e => {\r\n                                    if (e.which === 13) {\r\n                                        // Enter\r\n                                        const val: number = Math.max(\r\n                                            1, Math.min(\r\n                                                this.pageCount, parseInt(\r\n                                                    this.pageInput.current?.value || (\r\n                                                        this.state.pageId + 1\r\n                                                    ).toString()\r\n                                                )\r\n                                            )\r\n                                        ) - 1;\r\n                                        if (val === this.state.pageId && this.pageInput.current) {\r\n                                            this.pageInput.current.value = (val + 1).toString();\r\n                                        } else {\r\n                                            this.setState({\r\n                                                pageId: val\r\n                                            });\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                            style={{\r\n                                cursor: \"none\",\r\n                                width: \"3em\",\r\n                                textAlign: \"center\",\r\n                                letterSpacing: \"1px\",\r\n                                color: Shared.theme.colortab.frontground,\r\n                                padding: \"2px\",\r\n                                border: `1px solid ${ Shared.theme.colortab.frontground }`,\r\n                                backgroundColor: Shared.theme.colortab.color.replace(\r\n                                    \"(\", \"a(\"\r\n                                ).replace(\r\n                                    \")\", \",0.1)\"\r\n                                )\r\n                            }} />\r\n                            <button type=\"button\" key=\"btn\"\r\n                            onMouseOver={\r\n                                () => {\r\n                                    Shared.cursorState = \"pointer\";\r\n                                }\r\n                            }\r\n                            onMouseOut={\r\n                                () => {\r\n                                    Shared.cursorState = \"normal\";\r\n                                }\r\n                            }\r\n                            style={{\r\n                                margin: \"0 0.4em 0 0\",\r\n                                padding: \"1px 3px\",\r\n                                color: Color.setLightness(\r\n                                    Shared.theme.colortab.background, 0.1\r\n                                ),\r\n                                cursor: \"none\",\r\n                                border: `1px solid ${ Shared.theme.colortab.frontground }`,\r\n                                backgroundColor: Shared.theme.colortab.frontground\r\n                            }}\r\n                            onClick={\r\n                                () => {\r\n                                    const val: number = Math.max(\r\n                                        1, Math.min(\r\n                                            this.pageCount, parseInt(\r\n                                                this.pageInput.current?.value || (\r\n                                                    this.state.pageId + 1\r\n                                                ).toString()\r\n                                            )\r\n                                        )\r\n                                    ) - 1;\r\n                                    if (val === this.state.pageId && this.pageInput.current) {\r\n                                        this.pageInput.current.value = (val + 1).toString();\r\n                                    } else {\r\n                                        this.setState({\r\n                                            pageId: val\r\n                                        });\r\n                                    }\r\n                                }\r\n                            } >\r\n                                ➔\r\n                            </button>\r\n                            <label key=\"aft\" style={{\r\n                                cursor: \"none\",\r\n                                marginRight: \"6px\",\r\n                                whiteSpace: \"nowrap\"\r\n                            }} >\r\n                                { ` / ${ this.pageCount }` }\r\n                            </label>\r\n                            <button type=\"button\" key=\"btn_next\"\r\n                            onMouseOver={\r\n                                () => {\r\n                                    Shared.cursorState = \"pointer\";\r\n                                }\r\n                            }\r\n                            onMouseOut={\r\n                                () => {\r\n                                    Shared.cursorState = \"normal\";\r\n                                }\r\n                            }\r\n                            style={{\r\n                                margin: \"0 2px 0 8px\",\r\n                                padding: \"2px 8px\",\r\n                                color: Color.setLightness(\r\n                                    Shared.theme.colortab.background, 0.1\r\n                                ),\r\n                                cursor: \"none\",\r\n                                border: `1px solid ${ Shared.theme.colortab.frontground2 }`,\r\n                                backgroundColor: Shared.theme.colortab.frontground2\r\n                            }}\r\n                            onClick={\r\n                                () => {\r\n                                    const val: number = Math.min(\r\n                                        this.pageCount, this.state.pageId + 2\r\n                                    ) - 1;\r\n                                    if (val !== this.state.pageId) {\r\n                                        this.setState({\r\n                                            pageId: val\r\n                                        });\r\n                                    }\r\n                                }\r\n                            } >\r\n                                ›\r\n                            </button>\r\n                            <button type=\"button\" key=\"btn_last\"\r\n                            onMouseOver={\r\n                                () => {\r\n                                    Shared.cursorState = \"pointer\";\r\n                                }\r\n                            }\r\n                            onMouseOut={\r\n                                () => {\r\n                                    Shared.cursorState = \"normal\";\r\n                                }\r\n                            }\r\n                            style={{\r\n                                margin: \"0 4px\",\r\n                                padding: \"2px 6px\",\r\n                                color: Color.setLightness(\r\n                                    Shared.theme.colortab.background, 0.1\r\n                                ),\r\n                                cursor: \"none\",\r\n                                border: `1px solid ${ Shared.theme.colortab.frontground2 }`,\r\n                                backgroundColor: Shared.theme.colortab.frontground2\r\n                            }}\r\n                            onClick={\r\n                                () => {\r\n                                    const val: number = this.pageCount - 1;\r\n                                    if (val !== this.state.pageId) {\r\n                                        this.setState({\r\n                                            pageId: val\r\n                                        });\r\n                                    }\r\n                                }\r\n                            } >\r\n                                »\r\n                            </button>\r\n                        </>\r\n                    ) : (\r\n                        <></>\r\n                    )\r\n                }\r\n                </div>\r\n                <hr style={{\r\n                    padding: \"1px 0\",\r\n                    border: `1px solid ${ Shared.theme.colortab.border }`\r\n                }} />\r\n                <div style={{\r\n                    margin: \"20px 0\",\r\n                    minHeight: this.props.style?.minHeight || \"10vh\",\r\n                    fontSize: \"calc(8px + 1vmin)\"\r\n                }} >\r\n                {\r\n                    data.length === 0 && (\r\n                        <p>\r\n                            { \"No results to display.\" }\r\n                        </p>\r\n                    )\r\n                }\r\n                {\r\n                    data.map((article, idx) => {\r\n                        return (\r\n                            <div key={ `${ this.state.pageId },${ idx }` }\r\n                            style={{\r\n                                margin: \"20px 0 14px\",\r\n                                borderLeft: `1px solid ${ Shared.theme.colortab.frontground }`,\r\n                                borderBottom: `1px solid ${ Shared.theme.colortab.frontground3 }`\r\n                            }} >\r\n                                { this.props.display(\r\n                                    article,\r\n                                    this.state.pageId * this.props.maxPerPage + idx + 1\r\n                                ) }\r\n                            </div>\r\n                        );\r\n                    })\r\n                }\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    public componentDidMount(): void {\r\n        if (this.pageInput.current) {\r\n            this.pageInput.current.value = (this.state.pageId + 1).toString();\r\n        }\r\n    }\r\n\r\n    public componentDidUpdate(): void {\r\n        if (this.pageInput.current) {\r\n            this.pageInput.current.value = (this.state.pageId + 1).toString();\r\n        }\r\n    }\r\n\r\n}\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-09-01 20:31:35 \r\n * @Last Modified by: Antoine YANG\r\n * @Last Modified time: 2020-09-01 23:24:13\r\n */\r\n\r\nimport React from \"react\";\r\nimport { PaperInfo, Bookmark } from \"./typedict\";\r\nimport { Shared } from \"./globals\";\r\n\r\n\r\n/**\r\n * 将论文信息转化为渲染实体.\r\n *\r\n * @param {PaperInfo} item\r\n * @param {number} index\r\n * @returns {JSX.Element}\r\n */\r\nexport const displayPaperInfo = (item: PaperInfo, index: number): JSX.Element => {\r\n    return (\r\n        <div style={{\r\n            display: \"flex\",\r\n            padding: \"2px 0.5em 0.5em\"\r\n        }} >\r\n            <div key=\"id\" style={{\r\n                width: \"4em\",\r\n                paddingRight: \"0.8em\",\r\n                textAlign: \"end\"\r\n            }} >\r\n                <label style={{\r\n                    cursor: \"none\"\r\n                }} >\r\n                    { `[${ index }]` }\r\n                </label>\r\n            </div>\r\n            <div key=\"info\" style={{\r\n                textAlign: \"start\"\r\n            }} >\r\n                <label style={{\r\n                    cursor: \"none\"\r\n                }} >\r\n                    <span key=\"authors\" >\r\n                    {\r\n                        item.authors.map((author, i) => {\r\n                            if (author === \"Zhendong Yang\") {\r\n                                return i === item.authors.length - 1 ? (\r\n                                    `and ${ author }`\r\n                                ) : (\r\n                                    `${ author }`\r\n                                );\r\n                            }\r\n                            return i === item.authors.length - 1 ? (\r\n                                `and ${ author }`\r\n                            ) : (\r\n                                `${ author }`\r\n                            );\r\n                        }).join(\", \") + \". \"\r\n                    }\r\n                    </span>\r\n                    <span key=\"title\" >\r\n                        { item.title + \". \" }\r\n                    </span>\r\n                    <span key=\"publishingSpace\" style={{\r\n                        fontStyle: \"italic\"\r\n                    }} >\r\n                    {\r\n                        item.publishingPlace + (\r\n                            item.pageRange ? (\r\n                                <span key=\"pageRange\"\r\n                                style={{\r\n                                    fontStyle: \"normal\"\r\n                                }} >\r\n                                    { \", \" + item.pageRange }\r\n                                </span>\r\n                            ) : \"\"\r\n                        )\r\n                    }\r\n                    </span>\r\n                    <span key=\"year\" >\r\n                        { \", \" + item.year + \". \" }\r\n                    </span>\r\n                </label>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n/**\r\n * 将书签信息转化为渲染实体.\r\n *\r\n * @param {Bookmark} item\r\n * @returns {JSX.Element}\r\n */\r\nexport const displayBookmark = (item: Bookmark): JSX.Element => {\r\n    return (\r\n        <div style={{\r\n            display: \"flex\",\r\n            padding: \"2px 0.5em 0.5em\"\r\n        }} >\r\n            <div key=\"id\" style={{\r\n                width: \"4em\",\r\n                paddingRight: \"0.8em\",\r\n                textAlign: \"center\"\r\n            }} >\r\n                <label style={{\r\n                    cursor: \"none\",\r\n                    color: Shared.theme.colortab[\r\n                        item.type === \"tech\" ? \"frontground\"\r\n                            : item.type === \"design\" ? \"frontground2\"\r\n                                : \"frontground3\"\r\n                    ]\r\n                }} >\r\n                    { `${ item.type }` }\r\n                </label>\r\n            </div>\r\n            <div key=\"info\" style={{\r\n                textAlign: \"start\",\r\n                marginLeft: \"1em\"\r\n            }} >\r\n                <a href={ item.url } target=\"new\"\r\n                style={{\r\n                    cursor: \"none\",\r\n                    textDecoration: \"none\"\r\n                }}\r\n                onMouseOver={\r\n                    () => {\r\n                        Shared.cursorState = \"pointer\";\r\n                    }\r\n                }\r\n                onMouseOut={\r\n                    () => {\r\n                        Shared.cursorState = \"normal\";\r\n                    }\r\n                } >\r\n                    <label style={{\r\n                        cursor: \"none\",\r\n                        color: Shared.theme.colortab.color\r\n                    }} >\r\n                        { item.title }\r\n                    </label>\r\n                </a>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-09-02 14:18:31 \r\n * @Last Modified by: Antoine YANG\r\n * @Last Modified time: 2020-09-02 15:45:27\r\n */\r\n\r\nimport React from \"react\";\r\nimport { Shared } from \"../methods/globals\";\r\nimport Color from \"../preference/Color\";\r\n\r\n\r\nexport interface InterestViewProps {\r\n    style?: React.CSSProperties;\r\n};\r\n\r\nexport const InterestView = (props: InterestViewProps): JSX.Element => {\r\n    const techs: Array<string> = [\r\n        \"C\", \"C++\", \"CSS\", \"Express\", \"HTML\", \"JavaScript\", \"Node.js\", \"React\", \"typescript\",\r\n        \"python\"\r\n    ];\r\n\r\n    const fields: Array<string> = [\r\n        \"Data Visualization\", \"Deep Learning\", \"Front-end\", \"Machine Learning\", \"NLP\"\r\n    ];\r\n\r\n    return (\r\n        <div style={{\r\n            color: Shared.theme.colortab.color,\r\n            margin: \"calc(10px + 4vh) 0 calc(10px + 2vh)\",\r\n            padding: \"1vh 5vw\",\r\n            textAlign: \"left\",\r\n            ...props.style\r\n        }} >\r\n            <div key=\"techs-head\" >\r\n                <h3>\r\n                    { `Technologies of Interest` }\r\n                </h3>\r\n            </div>\r\n            <div key=\"techs-items\" style={{\r\n                display: \"flex\",\r\n                flexWrap: \"wrap\",\r\n                marginBottom: \"3.2em\"\r\n            }} >\r\n            {\r\n                techs.map((item, i) => {\r\n                    return (\r\n                        <label key={ i } style={{\r\n                            cursor: \"none\",\r\n                            margin: \"0.4em 0.8em\",\r\n                            color: Color.setLightness(\r\n                                Shared.theme.colortab.border, 0.9\r\n                            ),\r\n                            padding: \"0 0.4em\",\r\n                            borderRight: `1px solid ${ Shared.theme.colortab.border }`,\r\n                            borderLeft: `1px solid ${ Shared.theme.colortab.border }`,\r\n                            borderRadius: \"6px 2px\"\r\n                        }} >\r\n                            { item }\r\n                        </label>\r\n                    );\r\n                })\r\n            }\r\n            </div>\r\n\r\n            <div key=\"fields-head\" >\r\n                <h3>\r\n                    { `Fields of Interest` }\r\n                </h3>\r\n            </div>\r\n            <div key=\"fields-items\" style={{\r\n                display: \"flex\",\r\n                flexWrap: \"wrap\"\r\n            }} >\r\n            {\r\n                fields.map((item, i) => {\r\n                    return (\r\n                        <label key={ i } style={{\r\n                            cursor: \"none\",\r\n                            margin: \"0.4em 0.8em\",\r\n                            color: Color.setLightness(\r\n                                Shared.theme.colortab.frontground, 0.9\r\n                            ),\r\n                            padding: \"0 0.6em\",\r\n                            borderRight: `1px solid ${ Shared.theme.colortab.frontground }`,\r\n                            borderLeft: `1px solid ${ Shared.theme.colortab.frontground }`,\r\n                            borderRadius: \"6px 2px\"\r\n                        }} >\r\n                            { item }\r\n                        </label>\r\n                    );\r\n                })\r\n            }\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-09-05 16:46:27 \r\n * @Last Modified by: Antoine YANG\r\n * @Last Modified time: 2020-09-05 16:51:13\r\n */\r\n\r\n/**\r\n * 从数组中返回第一个匹配要求的元素, \r\n * 若找不到则返回 null. \r\n *\r\n * @template T 数组元素类型\r\n * @param {Array<T>} a 数组\r\n * @param {(item: T, index: number) => boolean} each 判断函数\r\n * @returns {(T | null)}\r\n */\r\nexport const find = <T>(a: Array<T>, each: (item: T, index: number) => boolean): T | null => {\r\n    for (let i: number = 0; i < a.length; i++) {\r\n        if (each(a[i], i)) {\r\n            return a[i];\r\n        }\r\n    }\r\n\r\n    return null;\r\n};\r\n\r\n/**\r\n * 从数组中返回所有匹配要求的元素.\r\n *\r\n * @template T 数组元素类型\r\n * @param {Array<T>} a 数组\r\n * @param {(item: T, index: number) => boolean} each 判断函数\r\n * @returns {Array<T>}\r\n */\r\nexport const findAll = <T>(a: Array<T>, each: (item: T, index: number) => boolean): Array<T> => {\r\n    let box: Array<T> = [];\r\n\r\n    a.forEach((e, i) => {\r\n        if (each(e, i)) {\r\n            box.push(e);\r\n        }\r\n    });\r\n\r\n    return box;\r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-09-05 15:33:17 \r\n * @Last Modified by: Antoine YANG\r\n * @Last Modified time: 2020-09-06 00:59:09\r\n */\r\n\r\nimport { PaperInfo, Bookmark, Product } from \"../methods/typedict\";\r\n\r\n\r\nexport const InfoSet = {\r\n    /**\r\n     * 论文信息列表.\r\n     * \r\n     * @type {Array<PaperInfo>}\r\n     */\r\n    papers: [{\r\n        authors: [\r\n            \"Zhiguang Zhou\", \"Xinlong Zhang\", \"Zhendong Yang\", \"Yuanyuan Chen\",\r\n            \"Yuhua Liu\", \"Jin Wen\", \"Binjie Chen\", \"Ying Zhao\", \"Wei Chen*\"\r\n        ],\r\n        title: \"Visual Abstraction of Geographical Point Data with Spatial Autocorrelations\",\r\n        publishingPlace: \"IEEE Conference on Visual Analytics Science and Technology\",\r\n        year: 2020\r\n    }] as Array<PaperInfo>,\r\n\r\n    /**\r\n     * 外链信息列表.\r\n     * \r\n     * @type {Array<Bookmark>}\r\n     */\r\n    bookmarks: [{\r\n        type: \"tech\",\r\n        title: \"[翻译] 神经网络的直观解释 - HackCV\",\r\n        url: \"https://hackcv.com/posts/%E7%BF%BB%E8%AF%91-%E7%A5%9E%E7%BB%8F%E7%BD%\"\r\n            + \"91%E7%BB%9C%E7%9A%84%E7%9B%B4%E8%A7%82%E8%A7%A3%E9%87%8A/\"\r\n    }, {\r\n        type: \"tech\",\r\n        title: \".md格式的markdown文件常用语法介绍 - 简书\",\r\n        url: \"https://www.jianshu.com/p/61e02a55f2a6\"\r\n    }, {\r\n        type: \"design\",\r\n        title: \"NIPPON COLORS - 日本の伝統色\",\r\n        url: \"http://nipponcolors.com/\"\r\n    }, {\r\n        type: \"tech\",\r\n        title: \"一文看懂25个神经网络模型_网络_不积跬步，无以至千里-CSDN博客\",\r\n        url: \"https://blog.csdn.net/dujiahei/article/details/80965661\"\r\n    }, {\r\n        type: \"tech\",\r\n        title: \"卷积核与特征提取 - 理想几岁 - 博客园\",\r\n        url: \"https://www.cnblogs.com/zongfa/p/9130167.html\"\r\n    }, {\r\n        type: \"tech\",\r\n        title: \"js实现将canvas保存成图片并下载到本地_JavaScript_u012246064的博客-CSDN博客\",\r\n        url: \"https://blog.csdn.net/u012246064/article/details/78032153/\"\r\n    }, {\r\n        type: \"tech\",\r\n        title: \"C++ STL 四种智能指针_C/C++_Dablelv的博客专栏-CSDN博客\",\r\n        url: \"https://blog.csdn.net/k346k346/article/details/81478223\"\r\n    }, {\r\n        type: \"tech\",\r\n        title: \"Nodejs+Express创建HTTPS服务器 - 阳光小白 - 博客园\",\r\n        url: \"https://www.cnblogs.com/handongyu/p/6260209.html\"\r\n    }, {\r\n        type: \"tech\",\r\n        title: \"npm包的发布+ts_pandoraqjk的博客-CSDN博客\",\r\n        url: \"https://blog.csdn.net/pandoraqjk/article/details/106398758\"\r\n    }, {\r\n        type: \"other\",\r\n        title: \"Carbon\",\r\n        url: \"https://carbon.now.sh/\"\r\n    }, {\r\n        type: \"design\",\r\n        title: \"算法可视化\",\r\n        url: \"https://bindog.github.io/blog/2014/08/09/visualizing-algorithms/\"\r\n    }, {\r\n        type: \"design\",\r\n        title: \"CNN Explainer\",\r\n        url: \"https://poloclub.github.io/cnn-explainer/\"\r\n    }, {\r\n        type: \"tech\",\r\n        title: \"正则表达式 - JavaScript | MDN\",\r\n        url: \"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/\"\r\n            + \"Regular_Expressions\"\r\n    }, {\r\n        type: \"tech\",\r\n        title: \"Machine Learning Mastery\",\r\n        url: \"https://machinelearningmastery.com/\"\r\n    }, {\r\n        type: \"tech\",\r\n        title: \"常用激活函数（激励函数）理解与总结_网络_StevenSun的博客空间-CSDN博客\",\r\n        url: \"https://blog.csdn.net/tyhj_sf/article/details/79932893\"\r\n    }, {\r\n        type: \"design\",\r\n        title: \"CSS-sprites，又叫精灵图 - 简书\",\r\n        url: \"https://www.jianshu.com/p/9b54e9d0e31a\"\r\n    }, {\r\n        type: \"tech\",\r\n        title: \"详解react、redux、react-redux之间的关系 - 简书\",\r\n        url: \"https://www.jianshu.com/p/728a1afce96d\"\r\n    }, {\r\n        type: \"tech\",\r\n        title: \"快速搭建你的 github pages 个人博客 —— 基于 Create-React-App 的单页面应用实践 - 简书\",\r\n        url: \"https://www.jianshu.com/p/4d8011e9c805\"\r\n    }, {\r\n        type: \"tech\",\r\n        title: \"Page Visibility API 教程 - 阮一峰的网络日志\",\r\n        url: \"http://www.ruanyifeng.com/blog/2018/10/page_visibility_api.html\"\r\n    }, {\r\n        type: \"tech\",\r\n        title: \"如何部署create-react-app项目到Github pages步骤 - 知乎\",\r\n        url: \"https://zhuanlan.zhihu.com/p/88481760\"\r\n    }] as Array<Bookmark>,\r\n\r\n    /**\r\n     * 展示作品列表.\r\n     * \r\n     * @type {Array<Product>}\r\n     */\r\n    products: [{\r\n        name: \"[ChinaVis2019 challenge] ZUFE-yzd-challenge2\",\r\n        id: \"000000\",\r\n        role: \"leader\",\r\n        languages: [{\r\n            name: \"JavaScript\",\r\n            rate: 0.583\r\n        }, {\r\n            name: \"C++\",\r\n            rate: 0.300\r\n        }, {\r\n            name: \"HTML\",\r\n            rate: 0.104\r\n        }, {\r\n            name: \"CSS\",\r\n            rate: 0.013\r\n        }],\r\n        techs: [\"Express\", \"JQuery\", \"Leaflet\", \"axios\"],\r\n        beginTime: [\"2019\", \"05\"],\r\n        closeTime: [\"2019\", \"08\"],\r\n        githubURL: \"https://github.com/zufe-yzd/workspace\",\r\n        avatarURL: \"https://avatars2.githubusercontent.com/u/50646985?s=60&v=4\",\r\n        description: (\r\n            \"This product is made by team ZUFE-yzd, submitted to <i>ChinaVis2019</i> and \"\r\n            + \"ended up earning the team an Award of Excellence. \"\r\n        )\r\n    }, {\r\n        name: \"Unused Product 2019.9\",\r\n        id: \"000001\",\r\n        role: \"engineer\",\r\n        languages: [{\r\n            name: \"TypeScript\",\r\n            rate: 0.884\r\n        }, {\r\n            name: \"CSS\",\r\n            rate: 0.072\r\n        }, {\r\n            name: \"Python\",\r\n            rate: 0.037\r\n        }, {\r\n            name: \"Other\",\r\n            rate: 0.007\r\n        }],\r\n        techs: [\"React\", \"MapBox\", \"JQuery\", \"axios\"],\r\n        beginTime: [\"2019\", \"09\"],\r\n        closeTime: [\"2019\", \"12\"],\r\n        githubURL: \"\",\r\n        avatarURL: \"https://avatars1.githubusercontent.com/u/55677972?s=60&v=4\",\r\n        description: (\r\n            \"<b>[NOT OPEN SOURCE]</b><br/>\"\r\n            + \"This product is made by Professor Zhou's research group <i>Studio119</i>. \"\r\n        )\r\n    }, {\r\n        name: \"BiliVis\",\r\n        id: \"000002\",\r\n        role: \"individual\",\r\n        languages: [{\r\n            name: \"TypeScript\",\r\n            rate: 0.912\r\n        }, {\r\n            name: \"Python\",\r\n            rate: 0.052\r\n        }, {\r\n            name: \"HTML\",\r\n            rate: 0.014\r\n        }, {\r\n            name: \"JavaScript\",\r\n            rate: 0.011\r\n        }, {\r\n            name: \"CSS\",\r\n            rate: 0.011\r\n        }],\r\n        techs: [\"React\", \"JQuery\", \"axios\"],\r\n        beginTime: [\"2019\", \"12\"],\r\n        closeTime: [\"2020\", \"01\"],\r\n        githubURL: \"https://github.com/AntoineYANG/BiliVis\",\r\n        avatarURL: \"https://avatars3.githubusercontent.com/u/48707735?\"\r\n            + \"s=88&u=6a81260924552d398cbbd4d919caf5a4bb6a7416&v=4\",\r\n        description: (\r\n            \"Uses web crawler (programmed by python3, depending on beautifulsoup) \"\r\n            + \"to get Danmaku of a video on <b>Bilibili</b>. <br />\"\r\n            + \"This system allow you to search for any videos by the <b>av-</b> id \"\r\n            + \"<i>(Unfortunately, <b>Bilibili</b> started to use <b>bv-</b> code \"\r\n            + \"instead from March 23, 2020, which did cause some inconvenience)</i>. \"\r\n            + \"An SVG animation is set to give a 1-min quick play of all the Danmaku. \"\r\n            + \"Moreover, each piece of Danmaku are counted, showing which part of the \"\r\n            + \"video got the most amount of Danmaku, and the number of Danmaku counted \"\r\n            + \"by date, to show how the popularity of the video was changing during the time. \"\r\n        )\r\n    }, {\r\n        name: \"[IEEE_VIS_VAST] zhou2020(vast)\",\r\n        id: \"000003\",\r\n        role: \"engineer\",\r\n        languages: [{\r\n            name: \"TypeScript\",\r\n            rate: 0.665\r\n        }, {\r\n            name: \"Python\",\r\n            rate: 0.162\r\n        }, {\r\n            name: \"C++\",\r\n            rate: 0.058\r\n        }, {\r\n            name: \"CSS\",\r\n            rate: 0.056\r\n        }, {\r\n            name: \"JavaScript\",\r\n            rate: 0.032\r\n        }, {\r\n            name: \"HTML\",\r\n            rate: 0.027\r\n        }],\r\n        techs: [\"React\", \"MapBox\", \"JQuery\", \"axios\"],\r\n        beginTime: [\"2020\", \"02\"],\r\n        closeTime: [\"2020\", \"08\"],\r\n        githubURL: \"https://github.com/Studio119/zhou2020-vast-\",\r\n        videoURL: \"./videos/product_000003.mp4\",\r\n        avatarURL: \"https://avatars1.githubusercontent.com/u/55677972?s=60&v=4\",\r\n        description: (\r\n            \"This product is made by Professor Zhou's research group <i>Studio119</i>. <br/>\"\r\n            + \"The related paper <b>[Visual Abstraction of Geographical Point Data \"\r\n            + \"with Spatial Autocorrelations]</b> was accepted by <i>IEEE Conference on \"\r\n            + \"Visual Analytics Science and Technology (<b>VAST</b>)<i>, 2020. \"\r\n        )\r\n    }, {\r\n        name: \"Anonymous project forked from ***\",\r\n        id: \"000004\",\r\n        role: \"contributor\",\r\n        languages: [{\r\n            name: \"TypeScript\",\r\n            rate: 0.640\r\n        }, {\r\n            name: \"Python\",\r\n            rate: 0.161\r\n        }, {\r\n            name: \"JavaScript\",\r\n            rate: 0.117\r\n        }, {\r\n            name: \"HTML\",\r\n            rate: 0.044\r\n        }, {\r\n            name: \"CSS\",\r\n            rate: 0.038\r\n        }],\r\n        techs: [\"React\", \"JQuery\"],\r\n        beginTime: [\"2019\", \"09\"],\r\n        closeTime: [\"2019\", \"09\"],\r\n        githubURL: \"\",\r\n        avatarURL: \"./images/product_000004.png\",\r\n        description: (\r\n            \"<b>[NOT OPEN SOURCE]</b><br/>\"\r\n            + \"This product is made by Professor Zhou's research group <i>Studio119</i>. <br/>\"\r\n            + \"No more public description is available. \"\r\n        )\r\n    }, {\r\n        name: \"Unused Product 2020.5\",\r\n        id: \"000005\",\r\n        role: \"leader\",\r\n        languages: [{\r\n            name: \"TypeScript\",\r\n            rate: 0.919\r\n        }, {\r\n            name: \"Python\",\r\n            rate: 0.056\r\n        }, {\r\n            name: \"JavaScript\",\r\n            rate: 0.015\r\n        }, {\r\n            name: \"Other\",\r\n            rate: 0.010\r\n        }],\r\n        techs: [\"React\", \"JQuery\"],\r\n        beginTime: [\"2020\", \"05\"],\r\n        closeTime: [\"2020\", \"06\"],\r\n        githubURL: \"\",\r\n        avatarURL: \"https://avatars1.githubusercontent.com/u/55677972?s=60&v=4\",\r\n        description: (\r\n            \"This product is made by Professor Zhou's research group <i>Studio119</i>. <br/>\"\r\n            + \"No more public description is available. \"\r\n        )\r\n    }] as Array<Product>,\r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-09-05 18:40:08 \r\n * @Last Modified by: Antoine YANG\r\n * @Last Modified time: 2020-09-05 18:45:54\r\n */\r\n\r\nimport React, { Component } from \"react\";\r\n\r\n\r\nexport interface InlineHTMLProps {\r\n    html: string;\r\n};\r\n/**\r\n * 这个组件用于新建一个 div 元素内联 html, \r\n * 将 html 字符串转化为 DOM 元素.\r\n *\r\n * @export\r\n * @class InlineHTML\r\n * @extends {Component<InlineHTMLProps, {}>}\r\n */\r\nexport class InlineHTML extends Component<InlineHTMLProps, {}> {\r\n\r\n    protected ref: React.RefObject<HTMLDivElement>;\r\n    \r\n    public constructor(props: InlineHTMLProps) {\r\n        super(props);\r\n        this.state = {};\r\n\r\n        this.ref = React.createRef<HTMLDivElement>();\r\n    }\r\n\r\n    public render(): JSX.Element {\r\n        return (\r\n            <div ref={ this.ref } ></div>\r\n        );\r\n    }\r\n\r\n    public componentDidMount(): void {\r\n        if (!this.ref.current) {\r\n            console.error(\"InlineHTML element did not mount successfully.\")\r\n            return;\r\n        }\r\n\r\n        this.ref.current.innerHTML = this.props.html;\r\n    }\r\n\r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-09-05 19:56:44 \r\n * @Last Modified by: Antoine YANG\r\n * @Last Modified time: 2020-09-05 20:41:10\r\n */\r\n\r\nimport React from \"react\";\r\nimport { LanguageInfo } from \"../methods/typedict\";\r\nimport { Shared } from \"../methods/globals\";\r\n\r\n\r\nexport interface LanguageChartProps {\r\n    data: Array<LanguageInfo>;\r\n};\r\n\r\n/**\r\n * 函数式组件: 绘制语言使用统计图.\r\n *\r\n * @param {LanguageChartProps} props\r\n * @returns {JSX.Element}\r\n */\r\nexport const LanguageChart = (props: LanguageChartProps): JSX.Element => {\r\n    let offset: number = 0;\r\n    const b: number = 99 + props.data.length;\r\n\r\n    const proj: Array<{\r\n        x: number;\r\n        w: number;\r\n        label: string;\r\n        value: number;\r\n    }> = props.data.map(d => {\r\n        offset += d.rate * b + 1;\r\n        return {\r\n            x: offset - d.rate * b - 1,\r\n            w: d.rate * b,\r\n            label: d.name,\r\n            value: d.rate\r\n        };\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <svg key=\"1\" style={{\r\n                display: \"block\",\r\n                width: \"96%\",\r\n                height: \"6px\",\r\n                margin: \"4px 2% 2px\",\r\n                borderRadius: \"3px\"\r\n            }} >\r\n            {\r\n                proj.map((d, i) => {\r\n                    return (\r\n                        <rect key={ i }\r\n                        x={ `${ d.x }%` } y=\"0\"\r\n                        width={ `${ d.w }%` } height=\"6px\"\r\n                        style={{\r\n                            fill: Shared.theme.colortab[(\r\n                                i % 3 === 0 ? \"frontground\"\r\n                                    : i % 3 === 1 ? \"frontground2\"\r\n                                        : \"frontground3\"\r\n                            )]\r\n                        }} />\r\n                    );\r\n                })\r\n            }\r\n            </svg>\r\n            <div key=\"2\" style={{\r\n                display: \"block\",\r\n                fontSize: \"10px\",\r\n                width: \"96%\",\r\n                height: \"12px\",\r\n                margin: \"2px 2% 4px\",\r\n                overflow: \"hidden\",\r\n                textAlign: \"left\"\r\n            }} >\r\n            {\r\n                proj.map((d, i) => {\r\n                    return d.w >= 8 ? (\r\n                        <label key={ i }\r\n                        style={{\r\n                            cursor: \"none\",\r\n                            color: Shared.theme.colortab[(\r\n                                i % 3 === 0 ? \"frontground\"\r\n                                    : i % 3 === 1 ? \"frontground2\"\r\n                                        : \"frontground3\"\r\n                            )],\r\n                            textOverflow: \"ellipsis\",\r\n                            position: \"relative\",\r\n                            top: 0,\r\n                            left: `${ i * 3 }%`,\r\n                            width: `${ d.w - 2 }%`,\r\n                            overflow: \"hidden\",\r\n                            display: \"inline-block\"\r\n                        }} >\r\n                            { d.label }\r\n                        </label>\r\n                    ) : null;\r\n                })\r\n            }\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-08-29 21:47:03 \r\n * @Last Modified by: Antoine YANG\r\n * @Last Modified time: 2020-09-05 20:53:12\r\n */\r\n\r\nimport React, { Component } from \"react\";\r\nimport $ from \"jquery\";\r\nimport { Shared } from \"../methods/globals\";\r\nimport Color from \"../preference/Color\";\r\n\r\n\r\nexport interface SettingItemProps {\r\n    name: string;\r\n    valueChanged: (value: any) => void;\r\n};\r\n\r\nexport interface SettingItemState {};\r\n\r\n/**\r\n * 这个组件用来作为设置页面中的单个选项.\r\n *\r\n * @export\r\n * @class SettingItem\r\n * @extends {Component<P, S>}\r\n * @template P\r\n * @template S\r\n */\r\nexport class SettingItem<P extends SettingItemProps, S extends SettingItemState> extends Component<P, S> {\r\n\r\n    public constructor(props: P) {\r\n        super(props);\r\n    }\r\n\r\n};\r\n\r\n\r\nexport interface SettingValueBarProps extends SettingItemProps {\r\n    min: number;\r\n    max: number;\r\n    setter: (val: number) => number;\r\n    formatter: (val: number) => (string | number);\r\n    default: number;\r\n    valueChanged: (value: number) => void;\r\n    previewChanging: (value: number) => void;\r\n};\r\n\r\nexport interface SettingValueBarState extends SettingItemState {\r\n    value: number;\r\n};\r\n\r\n/**\r\n * 数字类型的拖动条.\r\n *\r\n * @export\r\n * @class SettingValueBar\r\n * @extends {SettingItem<SettingValueBarProps, SettingValueBarState>}\r\n */\r\nexport class SettingValueBar extends SettingItem<SettingValueBarProps, SettingValueBarState> {\r\n\r\n    protected svg: React.RefObject<SVGSVGElement>;\r\n    protected resizeListener: () => void;\r\n\r\n    protected dragging: boolean;\r\n    protected curVal: number;\r\n\r\n    public constructor(props: SettingValueBarProps) {\r\n        super(props);\r\n        this.state = {\r\n            value: this.props.default\r\n        };\r\n\r\n        this.svg = React.createRef<SVGSVGElement>();\r\n        this.resizeListener = this.resize.bind(this);\r\n\r\n        this.dragging = false;\r\n        this.curVal = this.props.default;\r\n    }\r\n\r\n    public render(): JSX.Element {\r\n        return (\r\n            <div style={{\r\n                display: \"inline-flex\",\r\n                margin: \"2vh 2vw\",\r\n                fontSize: \"105%\",\r\n                alignItems: \"center\"\r\n            }} >\r\n                <label style={{\r\n                    cursor: \"none\",\r\n                    display: \"inline-block\",\r\n                    width: \"20vw\",\r\n                    maxWidth: \"260px\",\r\n                    marginLeft: \"auto\",\r\n                    marginRight: \"calc(4px + 0.1vw)\",\r\n                    wordBreak: \"break-all\",\r\n                    wordWrap: \"break-word\"\r\n                }} >\r\n                    { this.props.name }\r\n                </label>\r\n                <svg ref={ this.svg } height=\"40px\" style={{\r\n                    maxWidth: \"68vw\",\r\n                    minWidth: \"34vw\",\r\n                    marginRight: \"auto\"\r\n                }} >\r\n                    <rect key=\"background\" className=\"background\"\r\n                    x={ 0 } y={ 15 } width={ 40 } height={ 10 }\r\n                    rx={ 4 } ry={ 4 }\r\n                    style={{\r\n                        fill: Color.setLightness(\r\n                            Shared.theme.colortab.background, 0.2\r\n                        ),\r\n                        stroke: Color.setLightness(\r\n                            Shared.theme.colortab.background, 0.8\r\n                        ),\r\n                        strokeWidth: 2,\r\n                        pointerEvents: \"none\"\r\n                    }} />\r\n                    <rect key=\"target\" className=\"target\"\r\n                    x={ 0 } y={ 20 } width={ 22 } height={ 22 }\r\n                    rx={ 4 } ry={ 4 }\r\n                    style={{\r\n                        fill: Color.setLightness(\r\n                            Shared.theme.colortab.frontground,\r\n                            0.88\r\n                        ),\r\n                        fillOpacity: 0.8,\r\n                        stroke: Shared.theme.colortab.frontground2,\r\n                        strokeWidth: 4,\r\n                        transform: \"translate(-11px,-11px)\"\r\n                    }}\r\n                    onMouseOver={\r\n                        e => {\r\n                            Shared.cursorState = \"pointer\";\r\n                            e.currentTarget.style.fillOpacity = \"1.0\";\r\n                        }\r\n                    }\r\n                    onMouseOut={\r\n                        e => {\r\n                            Shared.cursorState = \"normal\";\r\n                            e.currentTarget.style.fillOpacity = \"0.8\";\r\n                        }\r\n                    }\r\n                    onMouseDown={\r\n                        ev => {\r\n                            this.dragging = true;\r\n\r\n                            const target: EventTarget = ev.target;\r\n                            const w: number = $(target).parent(\"svg\").width()!;\r\n                            const x1: number = 4 + 0.05 * w;\r\n                            const x2: number = 0.7 * w - 16;\r\n                            const offset: number = $(target).parent(\"svg\").offset()?.left || 0;\r\n\r\n                            const mouseMoveListener = (e: MouseEvent) => {\r\n                                const x: number = Math.max(\r\n                                    x1, Math.min(\r\n                                        x2, e.clientX - offset\r\n                                    )\r\n                                );\r\n                                this.curVal = this.props.min + (x - x1) / (x2 - x1) * (\r\n                                    this.props.max - this.props.min\r\n                                );\r\n                                $(target).attr(\r\n                                    \"x\", x\r\n                                );\r\n                                const val: number = this.props.setter(this.curVal);\r\n                                $(target).parent(\"svg\").children(\"text\").css(\r\n                                    \"fill\", Shared.theme.colortab.frontground\r\n                                ).text(\r\n                                    this.props.formatter(val)\r\n                                );\r\n                                this.props.previewChanging(val);\r\n                            };\r\n\r\n                            const mouseUpListener = () => {\r\n                                this.dragging = false;\r\n                                $(target).parent(\"svg\").children(\"text\").css(\r\n                                    \"fill\", Shared.theme.colortab.border\r\n                                );\r\n                                const val: number = this.props.setter(this.curVal);\r\n                                if (val !== this.state.value) {\r\n                                    this.props.valueChanged(val);\r\n                                    this.setState({\r\n                                        value: val\r\n                                    })\r\n                                }\r\n\r\n                                document.body.removeEventListener(\r\n                                    \"mousemove\", mouseMoveListener\r\n                                );\r\n                                document.body.removeEventListener(\r\n                                    \"mouseup\", mouseUpListener\r\n                                );\r\n                            };\r\n\r\n                            document.body.addEventListener(\r\n                                \"mousemove\", mouseMoveListener\r\n                            );\r\n                            document.body.addEventListener(\r\n                                \"mouseup\", mouseUpListener\r\n                            );\r\n                        }\r\n                    }\r\n                    onTouchMove={\r\n                        async e => {\r\n                            if (e.touches[0]) {\r\n                                const w: number = $(\r\n                                    e.currentTarget.parentElement!\r\n                                ).width()!;\r\n                                const x1: number = 4 + 0.05 * w;\r\n                                const x2: number = 0.7 * w - 16;\r\n                                const x: number = Math.max(\r\n                                    x1, Math.min(\r\n                                        x2, e.touches[0].clientX - (\r\n                                            e.currentTarget.parentElement!.getBoundingClientRect().left\r\n                                        )\r\n                                    )\r\n                                );\r\n                                this.curVal = this.props.min + (x - x1) / (x2 - x1) * (\r\n                                    this.props.max - this.props.min\r\n                                );\r\n                                $(e.currentTarget.parentElement!).children(\"rect.target\").attr(\r\n                                    \"x\", x\r\n                                );\r\n                                const val: number = this.props.setter(this.curVal);\r\n                                $(e.currentTarget.parentElement!).children(\"text\").text(\r\n                                    this.props.formatter(val)\r\n                                );\r\n                                if (val !== this.state.value) {\r\n                                    this.props.valueChanged(val);\r\n                                    this.setState({\r\n                                        value: val\r\n                                    })\r\n                                }\r\n                            }\r\n                        }\r\n                    } />\r\n                    <text x={ 100 } y={ 20 } textAnchor=\"middle\"\r\n                    style={{\r\n                        fill: Shared.theme.colortab.border,\r\n                        transform: \"translate(-0.5em,0.2em)\"\r\n                    }} >\r\n                        { this.props.formatter(this.state.value) }\r\n                    </text>\r\n                </svg>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    protected resize(): void {\r\n        const svg: JQuery<SVGSVGElement> = $(this.svg.current!);\r\n\r\n        const w: number = svg.width()!;\r\n\r\n        const background: JQuery<SVGRectElement> = svg.children(\"rect.background\") as unknown as JQuery<SVGRectElement>;\r\n        const target: JQuery<SVGRectElement> = svg.children(\"rect.target\") as unknown as JQuery<SVGRectElement>;\r\n        const text: JQuery<SVGTextElement> = svg.children(\"text\") as unknown as JQuery<SVGTextElement>;\r\n\r\n        const x1: number = 4 + 0.05 * w;\r\n        const x2: number = 0.7 * w - 16;\r\n\r\n        background.attr(\"x\", x1).attr(\"width\", x2 - x1);\r\n        target.attr(\r\n            \"x\", (\r\n                this.state.value - this.props.min\r\n            ) / (\r\n                this.props.max - this.props.min\r\n            ) * (x2 - x1) + x1\r\n        );\r\n        text.attr(\"x\", x2 + (w - x2) / 2);\r\n    }\r\n\r\n    public componentDidMount(): void {\r\n        this.resize();\r\n        $(window).on(\"resize\", this.resizeListener);\r\n    }\r\n\r\n    public componentWillUnmount(): void {\r\n        $(window).off(\"resize\", this.resizeListener);\r\n    }\r\n\r\n    public componentDidUpdate(): void {\r\n        this.curVal = this.props.default;\r\n        this.dragging = false;\r\n        this.resize();\r\n    }\r\n\r\n};\r\n\r\nexport interface SettingRadioProps extends SettingItemProps {\r\n    formatter: (val: boolean) => (string | number);\r\n    default: boolean;\r\n    valueChanged: (value: boolean) => void;\r\n};\r\n\r\nexport interface SettingRadioState extends SettingItemState {\r\n    value: boolean;\r\n};\r\n\r\n/**\r\n * 单选框.\r\n *\r\n * @export\r\n * @class SettingRadio\r\n * @extends {SettingItem<SettingRadioProps, SettingRadioState>}\r\n */\r\nexport class SettingRadio extends SettingItem<SettingRadioProps, SettingRadioState> {\r\n\r\n    protected svg: React.RefObject<SVGSVGElement>;\r\n    protected resizeListener: () => void;\r\n\r\n    public constructor(props: SettingRadioProps) {\r\n        super(props);\r\n        this.state = {\r\n            value: this.props.default\r\n        };\r\n\r\n        this.svg = React.createRef<SVGSVGElement>();\r\n        this.resizeListener = this.resize.bind(this);\r\n    }\r\n\r\n    public render(): JSX.Element {\r\n        return this.props.name ? (\r\n            <div style={{\r\n                display: \"inline-flex\",\r\n                margin: \"2vh 2vw\",\r\n                fontSize: \"105%\",\r\n                alignItems: \"center\"\r\n            }} >\r\n                <label style={{\r\n                    cursor: \"none\",\r\n                    display: \"inline-block\",\r\n                    width: \"20vw\",\r\n                    maxWidth: \"260px\",\r\n                    marginLeft: \"auto\",\r\n                    marginRight: \"calc(4px + 0.1vw)\",\r\n                    wordBreak: \"break-all\",\r\n                    wordWrap: \"break-word\"\r\n                }} >\r\n                    { this.props.name }\r\n                </label>\r\n                <svg ref={ this.svg } height=\"40px\" style={{\r\n                    maxWidth: \"68vw\",\r\n                    minWidth: \"34vw\",\r\n                    marginRight: \"auto\"\r\n                }} >\r\n                    <rect key=\"background\" className=\"background\"\r\n                    x={ 0 } y={ 6 } width={ 28 } height={ 28 }\r\n                    rx={ 6 } ry={ 6 }\r\n                    style={{\r\n                        fill: Color.setLightness(\r\n                            Shared.theme.colortab.background, 0.2\r\n                        ),\r\n                        stroke: Color.setLightness(\r\n                            Shared.theme.colortab.background, 0.8\r\n                        ),\r\n                        strokeWidth: 3\r\n                    }}\r\n                    onMouseOver={\r\n                        e => {\r\n                            Shared.cursorState = \"pointer\";\r\n                            e.currentTarget.style.fill = Color.setLightness(\r\n                                Shared.theme.colortab.background, 0.08\r\n                            );\r\n                        }\r\n                    }\r\n                    onMouseOut={\r\n                        e => {\r\n                            Shared.cursorState = \"normal\";\r\n                            e.currentTarget.style.fill = Color.setLightness(\r\n                                Shared.theme.colortab.background, 0.2\r\n                            );\r\n                        }\r\n                    }\r\n                    onClick={\r\n                        () => {\r\n                            const val: boolean = !this.state.value;\r\n                            this.props.valueChanged(val);\r\n                            this.setState({\r\n                                value: val\r\n                            });\r\n                        }\r\n                    } />\r\n                    <circle key=\"target\" className=\"target\"\r\n                    cx={ 20 } cy={ 20 } r={ 9 }\r\n                    style={{\r\n                        display: this.state.value ? \"initial\" : \"none\",\r\n                        fill: \"none\",\r\n                        stroke: Color.setLightness(\r\n                            Shared.theme.colortab.frontground2, 0.7\r\n                        ),\r\n                        strokeWidth: 3.6,\r\n                        pointerEvents: \"none\"\r\n                    }} />\r\n                    <text x={ 100 } y={ 20 } textAnchor=\"middle\"\r\n                    style={{\r\n                        fill: Shared.theme.colortab.border,\r\n                        transform: \"translate(-0.5em,0.2em)\"\r\n                    }} >\r\n                        { this.props.formatter(this.state.value) }\r\n                    </text>\r\n                </svg>\r\n            </div>\r\n        ) : (\r\n            <div style={{\r\n                display: \"inline-flex\",\r\n                margin: \"2vh 2vw\",\r\n                fontSize: \"105%\",\r\n                alignItems: \"center\"\r\n            }} >\r\n                <svg ref={ this.svg } height=\"40px\" style={{\r\n                    width: \"36px\",\r\n                    height: \"36px\"\r\n                }} >\r\n                    <rect key=\"background\" className=\"background\"\r\n                    x={ 0 } y={ 6 } width={ 28 } height={ 28 }\r\n                    rx={ 6 } ry={ 6 }\r\n                    style={{\r\n                        fill: Color.setLightness(\r\n                            Shared.theme.colortab.background, 0.2\r\n                        ),\r\n                        stroke: Color.setLightness(\r\n                            Shared.theme.colortab.background, 0.8\r\n                        ),\r\n                        strokeWidth: 3\r\n                    }}\r\n                    onMouseOver={\r\n                        e => {\r\n                            Shared.cursorState = \"pointer\";\r\n                            e.currentTarget.style.fill = Color.setLightness(\r\n                                Shared.theme.colortab.background, 0.08\r\n                            );\r\n                        }\r\n                    }\r\n                    onMouseOut={\r\n                        e => {\r\n                            Shared.cursorState = \"normal\";\r\n                            e.currentTarget.style.fill = Color.setLightness(\r\n                                Shared.theme.colortab.background, 0.2\r\n                            );\r\n                        }\r\n                    }\r\n                    onClick={\r\n                        () => {\r\n                            const val: boolean = !this.state.value;\r\n                            this.props.valueChanged(val);\r\n                            this.setState({\r\n                                value: val\r\n                            });\r\n                        }\r\n                    } />\r\n                    <circle key=\"target\" className=\"target\"\r\n                    cx={ 20 } cy={ 20 } r={ 9 }\r\n                    style={{\r\n                        display: this.state.value ? \"initial\" : \"none\",\r\n                        fill: \"none\",\r\n                        stroke: Color.setLightness(\r\n                            Shared.theme.colortab.frontground2, 0.7\r\n                        ),\r\n                        strokeWidth: 3.6,\r\n                        pointerEvents: \"none\"\r\n                    }} />\r\n                    <text x={ 100 } y={ 20 } textAnchor=\"middle\"\r\n                    style={{\r\n                        fill: Shared.theme.colortab.border,\r\n                        transform: \"translate(-0.5em,0.2em)\"\r\n                    }} >\r\n                        { this.props.formatter(this.state.value) }\r\n                    </text>\r\n                </svg>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    protected resize(): void {\r\n        const svg: JQuery<SVGSVGElement> = $(this.svg.current!);\r\n\r\n        const w: number = svg.width()!;\r\n\r\n        const background: JQuery<SVGRectElement> = svg.children(\"rect.background\") as unknown as JQuery<SVGRectElement>;\r\n        const target: JQuery<SVGCircleElement> = svg.children(\"circle.target\") as unknown as JQuery<SVGCircleElement>;\r\n        const text: JQuery<SVGTextElement> = svg.children(\"text\") as unknown as JQuery<SVGTextElement>;\r\n\r\n        const x1: number = 4 + 0.05 * w;\r\n        const x2: number = 0.7 * w - 16;\r\n\r\n        background.attr(\"x\", x1);\r\n        target.attr(\"cx\", x1 + 14);\r\n        text.attr(\"x\", x2 + (w - x2) / 2);\r\n    }\r\n\r\n    public componentDidMount(): void {\r\n        this.resize();\r\n        $(window).on(\"resize\", this.resizeListener);\r\n    }\r\n\r\n    public componentWillUnmount(): void {\r\n        $(window).off(\"resize\", this.resizeListener);\r\n    }\r\n\r\n    public componentDidUpdate(): void {\r\n        this.resize();\r\n    }\r\n\r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-09-05 15:10:09 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-12-06 00:39:19\r\n */\r\n\r\nimport React from \"react\";\r\nimport { Shared } from \"../methods/globals\";\r\nimport { ProductId, Role } from \"../methods/typedict\";\r\nimport { find } from \"../methods/arrayhelper\";\r\nimport { InfoSet } from \"../constant/InfoSet\";\r\nimport Color from \"../preference/Color\";\r\nimport { InlineHTML } from \"./InlineHTML\";\r\nimport { LanguageChart } from \"./LanguageChart\";\r\nimport { SettingRadio } from \"./SettingItem\";\r\nimport { InitComponent, InitComponentProps } from \"./InitComponent\";\r\n\r\n\r\nexport interface ProductViewProps {\r\n    title: string;\r\n    style?: React.CSSProperties;\r\n};\r\n\r\nexport interface ProductViewState {\r\n    items: Array<ProductId>;\r\n    detail: boolean;\r\n};\r\n\r\n/**\r\n * 这个组件由于渲染作品集合.\r\n *\r\n * @export\r\n * @class ProductView\r\n * @extends {InitComponent<ProductViewProps, ProductViewState>}\r\n */\r\nexport class ProductView extends InitComponent<ProductViewProps, ProductViewState> {\r\n\r\n    public constructor(props: ProductViewProps & InitComponentProps<ProductViewState>) {\r\n        super(props);\r\n        this.state = {\r\n            items: [],\r\n            detail: true\r\n        };\r\n    }\r\n\r\n    public render(): JSX.Element {\r\n        const colorf = (role: Role): string => {\r\n            return role === \"individual\" ? \"rgb(255,176,255)\"\r\n                : role === \"leader\" ? \"rgb(254,241,135)\"\r\n                    : role === \"engineer\" ? \"rgb(235,81,82)\"\r\n                        : role === \"contributor\" ? \"rgb(148,243,237)\"\r\n                            : \"rgb(176,217,246)\"\r\n        };\r\n\r\n        return (\r\n            <div style={{\r\n                color: Shared.theme.colortab.color,\r\n                margin: \"calc(10px + 4vh) 0 calc(10px + 2vh)\",\r\n                padding: \"1vh 5vw\",\r\n                ...this.props.style\r\n            }} >\r\n                <div key=\"header\" style={{\r\n                    display: \"flex\"\r\n                }} >\r\n                    <div key=\"head\" style={{\r\n                        display: \"inline-block\",\r\n                        minWidth: \"40%\"\r\n                    }} >\r\n                        <h3 style={{\r\n                            textAlign: \"left\"\r\n                        }}\r\n                        onMouseOver={\r\n                            () => {\r\n                                Shared.cursorState = \"pointer\";\r\n                            }\r\n                        }\r\n                        onMouseOut={\r\n                            () => {\r\n                                Shared.cursorState = \"normal\";\r\n                            }\r\n                        } >\r\n                            { this.props.title }\r\n                        </h3>\r\n                    </div>\r\n                    <div key=\"tools\" style={{\r\n                        display: \"inline-flex\",\r\n                        minWidth: \"60%\",\r\n                        alignItems: \"center\",\r\n                        overflow: \"hidden\",\r\n                        justifyContent: \"end\"\r\n                    }} >\r\n                        <label style={{\r\n                            cursor: \"none\",\r\n                            marginLeft: \"auto\"\r\n                        }} >\r\n                            Detail\r\n                        </label>\r\n                        <SettingRadio name=\"\" default={ this.state.detail }\r\n                        formatter={ () => \"\" }\r\n                        valueChanged={\r\n                            b => {\r\n                                this.setState({\r\n                                    detail: b\r\n                                });\r\n                            }\r\n                        } />\r\n                    </div>\r\n                </div>\r\n                <hr style={{\r\n                    padding: \"1px 0\",\r\n                    border: `1px solid ${ Shared.theme.colortab.border }`,\r\n                    marginTop: 0\r\n                }} />\r\n                <div style={{\r\n                    margin: \"20px 0\",\r\n                    minHeight: this.props.style?.minHeight || \"300px\",\r\n                    fontSize: \"calc(8px + 1vmin)\",\r\n                    display: \"flex\",\r\n                    flexWrap: \"wrap\",\r\n                    justifyContent: \"space-around\" // 分散对齐\r\n                }} >\r\n                {\r\n                    this.state.items.map(id => {\r\n                        const item = find(InfoSet.products, e => e.id === id);\r\n                        if (!item) {\r\n                            return (\r\n                                <></>\r\n                            );\r\n                        }\r\n                        return (\r\n                            <div key={ id } style={{\r\n                                display: \"inline-block\",\r\n                                width: \"calc(200px + 18vmin)\",\r\n                                margin: \"1.2vmax 1.6vmin\",\r\n                                padding: \"3vmin 4vmin\"\r\n                            }} >\r\n                                <img src={ `./images/product_${ id }.png` }\r\n                                alt={ `product_${ id }` }\r\n                                onDragStart={ e => e.preventDefault() }\r\n                                style={{\r\n                                    display: \"block\",\r\n                                    width: \"calc(200px + 18vmin)\",\r\n                                    height: \"calc(109.09px + 9.81vmin)\",\r\n                                    marginBottom: \"calc(4px + 0.5em)\",\r\n                                    objectFit: \"contain\",\r\n                                    backgroundColor: \"#000000\"\r\n                                }}\r\n                                onMouseOver={\r\n                                    () => {\r\n                                        Shared.cursorState = \"pointer\";\r\n                                    }\r\n                                }\r\n                                onMouseOut={\r\n                                    () => {\r\n                                        Shared.cursorState = \"normal\";\r\n                                    }\r\n                                }\r\n                                onClick={\r\n                                    () => {\r\n                                        this.jumpTo(item.id);\r\n                                    }\r\n                                } />\r\n                                <div key=\"head\" style={{\r\n                                    display: \"flex\"\r\n                                }} >\r\n                                    <div key=\"avatar\"\r\n                                    style={{\r\n                                        display: \"inline-block\",\r\n                                        width: \"28px\"\r\n                                    }} >\r\n                                        <img src={ item.avatarURL }\r\n                                        alt={ `avatar` }\r\n                                        onDragStart={ e => e.preventDefault() }\r\n                                        style={{\r\n                                            display: \"block\",\r\n                                            width: \"28px\",\r\n                                            height: \"28px\",\r\n                                            objectFit: \"contain\",\r\n                                            backgroundColor: \"#000000\",\r\n                                            borderRadius: \"14px\"\r\n                                        }} />\r\n                                    </div>\r\n                                    <div key=\"info\"\r\n                                    style={{\r\n                                        display: \"inline-block\",\r\n                                        width: \"calc(112px + 16vmin)\",\r\n                                        marginLeft: \"8px\"\r\n                                    }} >\r\n                                        <label key=\"name\" style={{\r\n                                            cursor: \"none\",\r\n                                            fontWeight: \"bold\",\r\n                                            height: \"2.5em\",\r\n                                            display: \"-webkit-box\",\r\n                                            WebkitBoxOrient: \"vertical\",\r\n                                            WebkitLineClamp: 2,\r\n                                            overflow: \"hidden\",\r\n                                            textAlign: \"left\"\r\n                                        }}\r\n                                        onMouseOver={\r\n                                            () => {\r\n                                                Shared.cursorState = \"pointer\";\r\n                                            }\r\n                                        }\r\n                                        onMouseOut={\r\n                                            () => {\r\n                                                Shared.cursorState = \"normal\";\r\n                                            }\r\n                                        }\r\n                                        onClick={\r\n                                            () => {\r\n                                                this.jumpTo(item.id);\r\n                                            }\r\n                                        } >\r\n                                            { item.name }\r\n                                        </label>\r\n                                    </div>\r\n                                </div>\r\n                            {\r\n                                this.state.detail ? (\r\n                                    <div key=\"more\" >\r\n                                        <div key=\"base\" style={{\r\n                                            display: \"flex\",\r\n                                            margin: \"0.1em 0 0.4em\",\r\n                                            justifyContent: \"space-between\" // 两端对齐\r\n                                        }} >\r\n                                            <label key=\"role\" style={{\r\n                                                cursor: \"none\",\r\n                                                fontSize: \"80%\",\r\n                                                display: \"inline-block\",\r\n                                                color: colorf(item.role),\r\n                                                border: \"1px solid \" + colorf(item.role),\r\n                                                borderRadius: \"6px\",\r\n                                                overflow: \"hidden\",\r\n                                                padding: \"0 0.3em\",\r\n                                                margin: \"0 0.4em\"\r\n                                            }} >\r\n                                                { item.role }\r\n                                            </label>\r\n                                            <label key=\"time\" style={{\r\n                                                cursor: \"none\",\r\n                                                fontSize: \"80%\",\r\n                                                display: \"inline-block\",\r\n                                                color: Color.setLightness(\r\n                                                    Shared.theme.colortab.color,\r\n                                                    0.5\r\n                                                ),\r\n                                                overflow: \"hidden\",\r\n                                                opacity: 0.8\r\n                                            }} >\r\n                                            {\r\n                                                `${ item.beginTime[0] }/${ item.beginTime[1] }`\r\n                                                + \" ~ \"\r\n                                                + (\r\n                                                    item.closeTime === \"-\" ? \"\" : (\r\n                                                        `${ item.closeTime[0] }/${ item.closeTime[1] }`\r\n                                                    )\r\n                                                )\r\n                                            }\r\n                                            </label>\r\n                                        </div>\r\n                                        <div key=\"techs\" style={{\r\n                                            fontSize: \"80%\",\r\n                                            color: Color.setLightness(\r\n                                                Shared.theme.colortab.color,\r\n                                                0.5\r\n                                            ),\r\n                                            height: \"1.3em\",\r\n                                            margin: \"0.1em 0\",\r\n                                            textAlign: \"left\",\r\n                                            overflow: \"hidden\"\r\n                                        }} >\r\n                                        {\r\n                                            item.techs.map((tech, i) => {\r\n                                                return (\r\n                                                    <label key={ i }\r\n                                                    style={{\r\n                                                        display: \"inline-block\",\r\n                                                        cursor: \"none\",\r\n                                                        margin: \"0 0.5em 0.1em\",\r\n                                                        color: Color.setLightness(\r\n                                                            Shared.theme.colortab.frontground,\r\n                                                            0.9\r\n                                                        ),\r\n                                                        padding: \"0 0.4em\",\r\n                                                        borderRight: `1px solid ${\r\n                                                            Shared.theme.colortab.frontground\r\n                                                        }`,\r\n                                                        borderLeft: `1px solid ${\r\n                                                            Shared.theme.colortab.frontground\r\n                                                        }`,\r\n                                                        borderRadius: \"6px 2px\"\r\n                                                    }} >\r\n                                                        { tech }\r\n                                                    </label>\r\n                                                );\r\n                                            })\r\n                                        }\r\n                                        </div>\r\n                                        <LanguageChart data={ item.languages } />\r\n                                        <label key=\"description\" style={{\r\n                                            cursor: \"none\",\r\n                                            fontSize: \"90%\",\r\n                                            color: Color.setLightness(\r\n                                                Shared.theme.colortab.color,\r\n                                                0.5\r\n                                            ),\r\n                                            height: \"3.5em\",\r\n                                            display: \"-webkit-box\",\r\n                                            WebkitBoxOrient: \"vertical\",\r\n                                            WebkitLineClamp: 3,\r\n                                            overflow: \"hidden\",\r\n                                            textAlign: \"left\"\r\n                                        }} >\r\n                                            <InlineHTML\r\n                                            html={ item.description.split(\r\n                                                /<br *\\/?>/\r\n                                            ).join(\"&nbsp;&nbsp;\") } />\r\n                                        </label>\r\n                                    </div>\r\n                                ) : null\r\n                            }\r\n                            </div>\r\n                        );\r\n                    })\r\n                }\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * 跳转页面查看详情.\r\n     *\r\n     * @protected\r\n     * @param {string} id\r\n     * @memberof ProductView\r\n     */\r\n    protected jumpTo(id: string): void {\r\n        const root: string = /.*\\//.exec(window.location.href)![0];\r\n        window.location.href = root + \"v2/product/\" + id;\r\n    }\r\n\r\n};\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-09-09 22:08:47 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-09-09 22:20:29\r\n */\r\n\r\nimport React from \"react\";\r\nimport $ from \"jquery\";\r\nimport { Shared } from \"../methods/globals\";\r\n\r\n\r\nexport const ScrollTop = (props: {}): JSX.Element => {\r\n    return (\r\n        <div\r\n        style={{\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            cursor: \"none\",\r\n            padding: \"8px 24px\",\r\n            margin: \"0 12px\"\r\n        }}\r\n        onMouseOver={\r\n            () => {\r\n                Shared.cursorState = \"pointer\";\r\n            }\r\n        }\r\n        onMouseOut={\r\n            () => {\r\n                Shared.cursorState = \"normal\";\r\n            }\r\n        }\r\n        onClick={\r\n            () => {\r\n                $(window).scrollTop(0);\r\n            }\r\n        } >\r\n            <svg viewBox=\"0 0 40 40\"\r\n            style={{\r\n                width: \"calc(14px + 1vw)\",\r\n                height: \"calc(14px + 1vw)\"\r\n            }} >\r\n                <path d={\r\n                    \"M14,38 L14,20 L4,20 L20,2 L36,20 L26,20 L26,38 Z\"\r\n                }\r\n                style={{\r\n                    fill: Shared.theme.colortab.color,\r\n                    pointerEvents: \"all\",\r\n                    cursor: \"none\"\r\n                }} />\r\n            </svg>\r\n        </div>\r\n    );\r\n};\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-09-09 22:17:14 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-09-09 22:24:38\r\n */\r\n\r\nimport React from \"react\";\r\nimport { Shared } from \"../methods/globals\";\r\n\r\n\r\nexport const ContactMe = (props: {}): JSX.Element => {\r\n    return (\r\n        <div key=\"links\" style={{\r\n            margin: \"1.2vh 0 0.3vh\",\r\n            padding: \"1.6vh 1vw 0\",\r\n            display: \"inline-flex\",\r\n            borderTop: `1px solid ${ Shared.theme.colortab.color }`\r\n        }} >\r\n            <div key=\"github\"\r\n            style={{\r\n                margin: \"0 calc(1vw + 4px)\",\r\n                padding: \"0 2px\",\r\n                display: \"flex\",\r\n                alignItems: \"center\"\r\n            }}\r\n            onMouseEnter={\r\n                () => {\r\n                    Shared.cursorState = \"pointer\";\r\n                }\r\n            }\r\n            onMouseLeave={\r\n                () => {\r\n                    Shared.cursorState = \"normal\";\r\n                }\r\n            } >\r\n                <a href=\"https://github.com/AntoineYANG\" target=\"new\"\r\n                style={{\r\n                    cursor: \"none\"\r\n                }} >\r\n                    <svg viewBox=\"0 0 16 16\" version=\"1.1\"\r\n                    aria-hidden=\"true\"\r\n                    style={{\r\n                        width: \"calc(8px + 1vw)\",\r\n                        height: \"calc(8px + 1vw)\",\r\n                        transform: \"translateY(1.2px)\"\r\n                    }} >\r\n                        <path fillRule=\"evenodd\"\r\n                        d={\r\n                            \"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-\"\r\n                            + \".17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-\"\r\n                            + \".94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-\"\r\n                            + \".01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.8\"\r\n                            + \"7.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.\"\r\n                            + \"15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.3\"\r\n                            + \"2-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82\"\r\n                            + \".44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.8\"\r\n                            + \"7 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01\"\r\n                            + \" 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"\r\n                        }\r\n                        style={{\r\n                            fill: Shared.theme.colortab.color,\r\n                            pointerEvents: \"none\"\r\n                        }} />\r\n                    </svg>\r\n                </a>\r\n            </div>\r\n            <div key=\"npm\"\r\n            style={{\r\n                margin: \"0 calc(1vw + 4px)\",\r\n                padding: \"0 2px\",\r\n                display: \"flex\",\r\n                alignItems: \"center\"\r\n            }}\r\n            onMouseEnter={\r\n                () => {\r\n                    Shared.cursorState = \"pointer\";\r\n                }\r\n            }\r\n            onMouseLeave={\r\n                () => {\r\n                    Shared.cursorState = \"normal\";\r\n                }\r\n            } >\r\n                <a href=\"https://www.npmjs.com/~kanatayou\" target=\"new\"\r\n                style={{\r\n                    cursor: \"none\"\r\n                }} >\r\n                    <svg viewBox=\"0 0 780 250\"\r\n                    style={{\r\n                        width: \"calc(8px + 1vw)\",\r\n                        height: \"calc(8px + 1vw)\"\r\n                    }} >\r\n                        <path d={\r\n                            \"M240,250h100v-50h100V0H240V250z M340,50h50v100h-50V50z \"\r\n                            + \"M480,0v200h100V50h50v150h50V50h50v150h50V0H480z \"\r\n                            + \"M0,200h100V50h50v150h50V0H0V200z\"\r\n                        }\r\n                        style={{\r\n                            fill: Shared.theme.colortab.color\r\n                        }} />\r\n                    </svg>\r\n                </a>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-09-24 14:06:26 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-09-30 10:02:18\r\n */\r\n\r\nimport React, { Component } from \"react\";\r\nimport { Shared } from \"../methods/globals\";\r\n\r\n\r\nexport interface PageFlowProps {\r\n    height: string | number;\r\n    children: Array<JSX.Element>;\r\n    style?: React.CSSProperties;\r\n};\r\n\r\nexport interface PageFlowState {\r\n    idx: number;\r\n};\r\n\r\nexport class PageFlow extends Component<PageFlowProps, PageFlowState> {\r\n\r\n    protected wheelEvent: (this: HTMLElement, ev: WheelEvent) => any;\r\n\r\n    protected container: React.RefObject<HTMLDivElement>;\r\n\r\n    protected cdHolder: boolean;\r\n    protected aniDirection: \"up\" | \"down\";\r\n    protected timers: Array<NodeJS.Timeout>;\r\n\r\n    public constructor(props: PageFlowProps) {\r\n        super(props);\r\n        this.state = {\r\n            idx: 0\r\n        };\r\n\r\n        this.wheelEvent = () => void 0;\r\n\r\n        this.container = React.createRef<HTMLDivElement>();\r\n\r\n        this.cdHolder = false;\r\n        this.aniDirection = \"down\";\r\n        this.timers = [];\r\n    }\r\n\r\n    public render(): JSX.Element {\r\n        return (\r\n            <div ref={ this.container }\r\n            style={{\r\n                padding: this.props.style?.margin\r\n            }} >\r\n                <div\r\n                style={{\r\n                    // border: \"1px solid white\",\r\n                    ...this.props.style,\r\n                    height: this.props.height,\r\n                    overflow: \"hidden auto\",\r\n                    margin: 0\r\n                }} >\r\n                {\r\n                    this.props.children[this.state.idx]\r\n                }\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    protected clearTimers(): void {\r\n        this.timers.forEach(timer => {\r\n            clearTimeout(timer);\r\n        });\r\n\r\n        this.timers = [];\r\n    }\r\n\r\n    protected resetListener(): void {\r\n        document.body.removeEventListener(\r\n            \"wheel\",\r\n            this.wheelEvent\r\n        );\r\n\r\n        this.wheelEvent = (e: WheelEvent) => {\r\n            if (this.container.current) {\r\n                const top: number = this.container.current.offsetTop - window.scrollY;\r\n                const bottom: number = top + this.container.current.offsetHeight;\r\n\r\n                if (Math.abs(this.container.current.offsetTop - window.scrollY) < 1) {\r\n                    const content = this.container.current.firstElementChild!.firstElementChild! as HTMLElement;\r\n                    \r\n                    if (this.container.current.offsetHeight < content.offsetHeight) {\r\n                        const scrollTop: number = this.container.current.firstElementChild!.scrollTop;\r\n\r\n                        if (scrollTop === 0 && e.deltaY < 0) {\r\n                            // 已在最上，继续向上\r\n                        } else if (scrollTop + this.container.current.offsetHeight > (\r\n                            content.offsetHeight + 60\r\n                        ) && e.deltaY > 0) {\r\n                            // 已在最下，继续向下\r\n                        } else {\r\n                            return;\r\n                        }\r\n                    }\r\n\r\n                    if (this.cdHolder) {\r\n                        e.preventDefault();\r\n                        return;\r\n                    }\r\n                    \r\n                    if (this.props.children.length === 1) {\r\n                        // 跳过\r\n                        return;\r\n                    } else if (this.state.idx === 0 && e.deltaY < 0) {\r\n                        // 第一个，向上\r\n                        return;\r\n                    } else if (this.state.idx === this.props.children.length - 1 && e.deltaY > 0) {\r\n                        // 最后一个，向下\r\n                        return;\r\n                    } else if (e.deltaY < 0) {\r\n                        // 上一页\r\n                        e.preventDefault();\r\n                        this.prevPage();\r\n                        return;\r\n                    } else if (e.deltaY > 0) {\r\n                        // 下一页\r\n                        e.preventDefault();\r\n                        this.nextPage();\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                /* 看得见的高度 */\r\n                const visible: number = Math.min(\r\n                    window.innerHeight, bottom\r\n                ) - Math.max(\r\n                    0, top\r\n                );\r\n\r\n                if (visible >= Math.min(\r\n                    this.container.current.offsetHeight, window.innerHeight\r\n                ) * 0.4) {\r\n                    if (e.deltaY > 0 && window.scrollY < this.container.current.offsetTop) {\r\n                        e.preventDefault();\r\n                        window.scrollTo(\r\n                            window.scrollX,\r\n                            this.container.current.offsetTop\r\n                        );\r\n                    } else if (e.deltaY < 0 && window.scrollY > this.container.current.offsetTop) {\r\n                        e.preventDefault();\r\n                        window.scrollTo(\r\n                            window.scrollX,\r\n                            this.container.current.offsetTop\r\n                        );\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        \r\n        document.body.addEventListener(\r\n            \"wheel\",\r\n            this.wheelEvent, {\r\n                passive: false\r\n            }\r\n        );\r\n    }\r\n\r\n    public componentDidMount(): void {\r\n        document.body.addEventListener(\r\n            \"wheel\",\r\n            this.wheelEvent, {\r\n                passive: false\r\n            }\r\n        );\r\n        this.resetListener();\r\n        \r\n    }\r\n\r\n    public componentDidUpdate(): void {\r\n        this.resetListener();\r\n\r\n        if (this.container.current) {\r\n            const content = this.container.current.firstElementChild!.firstElementChild! as HTMLElement;\r\n            content.style.opacity = `0`;\r\n            for (let t: number = 0; t < 240; t += Math.floor(1000 / Shared.animationFPS)) {\r\n                this.timers.push(\r\n                    setTimeout(() => {\r\n                        if (content) {\r\n                            content.style.transform = `translateY(${ (\r\n                                this.aniDirection === \"up\" ? 1 : -1\r\n                            ) * (240 - Math.min(\r\n                                240, t + Math.floor(1000 / Shared.animationFPS)\r\n                            )) }px)`;\r\n                            content.style.opacity = `${ Math.min(1, Math.max(t - 50, 0) / 180) }`;\r\n                        }\r\n                    }, t)\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    public componentWillUnmount(): void {\r\n        this.clearTimers();\r\n        document.body.removeEventListener(\"wheel\", this.wheelEvent);\r\n    }\r\n\r\n    public shiftTo(idx: number): number {\r\n        const to: number = Math.min(\r\n            this.props.children.length - 1,\r\n            Math.max(\r\n                0, idx\r\n            )\r\n        );\r\n\r\n        this.cdHolder = true;\r\n        this.timers.push(\r\n            setTimeout(() => {\r\n                this.cdHolder = false;\r\n            }, 600)\r\n        );\r\n\r\n        if (this.container.current) {\r\n            const content = this.container.current.firstElementChild!.firstElementChild! as HTMLElement;\r\n            for (let t: number = 0; t < 240; t += Math.floor(1000 / Shared.animationFPS)) {\r\n                this.timers.push(\r\n                    setTimeout(() => {\r\n                        if (content) {\r\n                            content.style.transform = `translateY(${ (\r\n                                this.aniDirection === \"up\" ? -1 : 1\r\n                            ) * t * 2 }px)`;\r\n                            content.style.opacity = `${ 1 - t / 240 }`;\r\n                        }\r\n                    }, t)\r\n                );\r\n            }\r\n        }\r\n\r\n        this.timers.push(\r\n            setTimeout(() => {\r\n                this.setState({\r\n                    idx: to\r\n                });\r\n            }, 250)\r\n        );\r\n\r\n        return to;\r\n    }\r\n\r\n    public nextPage(): number {\r\n        this.aniDirection = \"up\";\r\n        const to: number = this.state.idx + 1;\r\n        return this.shiftTo(to);\r\n    }\r\n\r\n    public prevPage(): number {\r\n        this.aniDirection = \"down\";\r\n        const to: number = this.state.idx - 1;\r\n        return this.shiftTo(to);\r\n    }\r\n\r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-08-28 21:07:40 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-09-30 10:53:34\r\n */\r\n\r\nimport React from \"react\";\r\nimport { PageBody, PaperInfo, Bookmark } from \"../methods/typedict\";\r\nimport { Shared } from \"../methods/globals\";\r\nimport { Navigator } from \"../compo/Navigator\";\r\nimport { SettingsButton } from \"../compo/SettingsButton\";\r\nimport { InfoView } from \"../compo/InfoView\";\r\nimport { HomeButton } from \"../compo/HomeButton\";\r\nimport { ListView } from \"../compo/ListView\";\r\nimport { displayPaperInfo, displayBookmark } from \"../methods/display\";\r\nimport { InterestView } from \"../compo/InterestView\";\r\nimport { ProductView } from \"../compo/ProductView\";\r\nimport { InfoSet } from \"../constant/InfoSet\";\r\nimport { ScrollTop } from \"../compo/ScrollTop\";\r\nimport { ContactMe } from \"../compo/ContactMe\";\r\nimport { PageFlow } from \"../compo/PageFlow\";\r\n\r\n\r\n/**\r\n * 这个页面级组件渲染对应地址 / .\r\n * \r\n * @export\r\n * @class Home\r\n * @extends {PageBody<{}>}\r\n */\r\nexport class Home extends PageBody<{}> {\r\n\r\n    public constructor(props: {}) {\r\n        super(props);\r\n        this.state = {};\r\n    }\r\n    \r\n    public render(): JSX.Element {\r\n        return (\r\n            <>\r\n                <Navigator >\r\n                    <HomeButton active={ false } />\r\n                    <ScrollTop />\r\n                    <SettingsButton />\r\n                    <ContactMe />\r\n                </Navigator>\r\n                <InfoView />\r\n                <PageFlow height=\"calc(90vh - 20px)\"\r\n                style={{\r\n                    margin: \"calc(10px + 5vh) 0\"\r\n                }} >\r\n                    <InterestView />\r\n                    <ProductView title=\"Products\" init={\r\n                        { items: InfoSet.products.map(d => d.id) }\r\n                    } />\r\n                    <ListView<PaperInfo> title=\"Paper Publications\" key=\"1\"\r\n                    maxPerPage={ 8 } display={ displayPaperInfo } init={\r\n                        { items: InfoSet.papers }\r\n                    } />\r\n                    <ListView<Bookmark> title=\"Bookmarks (external links)\" key=\"2\"\r\n                    maxPerPage={ 8 } display={ displayBookmark } init={\r\n                        { items: InfoSet.bookmarks }\r\n                    } />\r\n                </PageFlow>\r\n            </>\r\n        );\r\n    }\r\n\r\n    public componentDidMount(): void {\r\n        Shared.cursorState = \"normal\";\r\n\r\n        // Shared.opening?.play();\r\n    }\r\n\r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-08-28 20:50:07 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-09-09 22:34:34\r\n */\r\n\r\nimport React from \"react\";\r\nimport { PageBody } from \"../methods/typedict\";\r\nimport { Shared } from \"../methods/globals\";\r\nimport { HomeButton } from \"../compo/HomeButton\";\r\nimport { Navigator } from \"../compo/Navigator\";\r\nimport { SettingsButton } from \"../compo/SettingsButton\";\r\nimport { ContactMe } from \"../compo/ContactMe\";\r\n\r\n\r\n/**\r\n * 这个页面级组件在无法访问对应网址时渲染.\r\n * \r\n * @export\r\n * @class BadUrl\r\n * @extends {PageBody<{}>}\r\n */\r\nexport class BadUrl extends PageBody<{}> {\r\n\r\n    public constructor(props: {}) {\r\n        super(props);\r\n        this.state = {};\r\n    }\r\n    \r\n    public render(): JSX.Element {\r\n        return (\r\n            <>\r\n                <Navigator>\r\n                    <HomeButton active={ true } />\r\n                    <SettingsButton />\r\n                    <ContactMe />\r\n                </Navigator>\r\n                <div style={{\r\n                    color: Shared.theme.colortab.color,\r\n                    margin: \"calc(10px + 6vh) 0 calc(10px + 3vh)\",\r\n                    padding: \"calc(12px + 5vh) calc(20px + 5vw)\",\r\n                    border: `1px solid ${ Shared.theme.colortab.border }`,\r\n                    boxShadow: `6px 5px 0 1px ${\r\n                        Shared.theme.colortab.border.replace(\r\n                            \"(\", \"a(\"\r\n                        ).replace(\r\n                            \")\", \",0.1)\"\r\n                        )\r\n                    }`\r\n                }} >\r\n                    <h1 style={{\r\n                        color: Shared.theme.colortab.color,\r\n                        margin: \"calc(20px + 3vh)\"\r\n                    }} >\r\n                        404 - Bad Gateway\r\n                    </h1>\r\n                    <br />\r\n                    <span style={{ color: Shared.theme.colortab.frontground }} >\r\n                        Sorry, the URL you required is not valid.\r\n                    </span>\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n\r\n    public componentDidMount(): void {\r\n        Shared.cursorState = \"normal\";\r\n    }\r\n\r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-08-29 21:41:10 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-09-09 20:05:06\r\n */\r\n\r\nimport React from \"react\";\r\nimport { PageBody } from \"../methods/typedict\";\r\nimport { Shared } from \"../methods/globals\";\r\nimport { SettingValueBar, SettingRadio } from \"../compo/SettingItem\";\r\nimport { HomeButton } from \"../compo/HomeButton\";\r\nimport { Navigator } from \"../compo/Navigator\";\r\n\r\n\r\n/**\r\n * 这个页面级组件渲染对应地址 /settings .\r\n * \r\n * @export\r\n * @class Settings\r\n * @extends {PageBody<{}>}\r\n */\r\nexport class Settings extends PageBody<{}> {\r\n\r\n    protected fpsSetter: React.RefObject<SettingValueBar>;\r\n    protected fpsRadio: React.RefObject<SettingRadio>;\r\n    protected fpsUpdater: NodeJS.Timeout;\r\n\r\n    public constructor(props: {}) {\r\n        super(props);\r\n        this.state = {};\r\n\r\n        this.fpsSetter = React.createRef<SettingValueBar>();\r\n        this.fpsRadio = React.createRef<SettingRadio>();\r\n        this.fpsUpdater = Shared.autoFPS ? setInterval(() => {\r\n            this.fpsSetter.current?.setState({\r\n                value: Shared.animationFPS\r\n            });\r\n        }, 400) : setTimeout(() => {}, 0);\r\n    }\r\n    \r\n    public render(): JSX.Element {\r\n        return (\r\n            <>\r\n                <Navigator>\r\n                    <HomeButton active={ true } />\r\n                </Navigator>\r\n                <h1 style={{\r\n                    color: Shared.theme.colortab.color,\r\n                    margin: \"calc(10px + 8vh) 0 calc(10px + 2vh)\",\r\n                    padding: \"1vh 5vw\"\r\n                }} >\r\n                    Settings\r\n                </h1>\r\n                <div style={{\r\n                    color: Shared.theme.colortab.color,\r\n                    width: \"86vw\",\r\n                    margin: \"calc(10px + 4vh) 0 calc(10px + 2vh)\",\r\n                    padding: \"1vh 5vw\",\r\n                    display: \"block\"\r\n                }} >\r\n                    <SettingValueBar ref={ this.fpsSetter } name=\"Animation FPS\"\r\n                    min={ 10 } max={ 120 } default={ Shared.animationFPS }\r\n                    formatter={\r\n                        (val: number) => val\r\n                    }\r\n                    setter={\r\n                        (val: number) => Math.floor(val / 5) * 5\r\n                    }\r\n                    previewChanging={\r\n                        (val: number) => {\r\n                            clearInterval(this.fpsUpdater);\r\n                            this.fpsUpdater = setTimeout(() => {}, 0);\r\n                            if (Shared.autoFPS) {\r\n                                Shared.autoFPS = false;\r\n                                this.fpsRadio.current?.setState({\r\n                                    value: false\r\n                                });\r\n                            }\r\n                            Shared.animationFPS = val;\r\n                        }\r\n                    }\r\n                    valueChanged={\r\n                        (val: number) => {\r\n                            Shared.animationFPS = val;\r\n                        }\r\n                    } />\r\n                    <SettingRadio ref={ this.fpsRadio } name=\"Auto FPS\"\r\n                    default={ Shared.autoFPS }\r\n                    formatter={\r\n                        (val: boolean) => val ? \"on\" : \"off\"\r\n                    }\r\n                    valueChanged={\r\n                        (val: boolean) => {\r\n                            Shared.autoFPS = val;\r\n\r\n                            clearInterval(this.fpsUpdater);\r\n\r\n                            this.fpsUpdater = Shared.autoFPS ? setInterval(() => {\r\n                                this.fpsSetter.current?.setState({\r\n                                    value: Shared.animationFPS\r\n                                });\r\n                            }, 400) : setTimeout(() => {}, 0);\r\n                        }\r\n                    } />\r\n                    <SettingValueBar name=\"Partical Effects\"\r\n                    formatter={\r\n                        (val: number) => (\r\n                            val === 3 ? \"high\"\r\n                                : val === 2 ? \"normal\"\r\n                                    : val === 1 ? \"low\"\r\n                                        : \"off\"\r\n                        )\r\n                    }\r\n                    min={ 0 } max={ 3 } default={ Shared.particalEffects }\r\n                    setter={\r\n                        (val: number) => Math.round(val)\r\n                    }\r\n                    previewChanging={\r\n                        (val: number) => {\r\n                            Shared.particalEffects = val as 0 | 1 | 2 | 3;\r\n                        }\r\n                    }\r\n                    valueChanged={\r\n                        (val: number) => {\r\n                            Shared.particalEffects = val as 0 | 1 | 2 | 3;\r\n                        }\r\n                    } />\r\n                    <SettingValueBar name=\"Partical Opacity\"\r\n                    formatter={\r\n                        (val: number) => val.toFixed(2)\r\n                    }\r\n                    min={ 0.1 } max={ 1 } default={ Shared.particalOpacity }\r\n                    setter={\r\n                        (val: number) => val\r\n                    }\r\n                    previewChanging={\r\n                        (val: number) => {\r\n                            Shared.particalOpacity = val;\r\n                        }\r\n                    }\r\n                    valueChanged={\r\n                        (val: number) => {\r\n                            Shared.particalOpacity = val;\r\n                        }\r\n                    } />\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n\r\n    public componentDidMount(): void {\r\n        Shared.cursorState = \"normal\";\r\n    }\r\n\r\n    public componentWillUnmount(): void {\r\n        clearInterval(this.fpsUpdater);\r\n    }\r\n\r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-09-06 13:09:49 \r\n * @Last Modified by: Antoine YANG\r\n * @Last Modified time: 2020-09-06 14:25:42\r\n */\r\n\r\nimport { Component } from \"react\";\r\n\r\n\r\n/**\r\n * A base class extending React.Component. \r\n * \r\n * This kind of components will automatically called a method `componentWillResize` \r\n * after the window resized. \r\n * \r\n * To make sure the component works, DO NOT override method \r\n * `componentDidMount` or `componentWillUnmount`, use \r\n * `componentDidMountRE` and `componentWillUnmountRE` instead. \r\n *\r\n * @export\r\n * @class ResponsiveComponent\r\n * @extends {Component<P, S, SS>}\r\n * @template P type of props\r\n * @template S type of state\r\n * @template SS type of children\r\n */\r\nexport class ResponsiveComponent<P = {}, S = {}, SS = any> extends Component<P, S, SS> {\r\n\r\n    /**\r\n     * This is the listener of the resizing event.\r\n     *\r\n     * @private\r\n     * @memberof ResponsiveComponent\r\n     */\r\n    private readonly _windowResizeListener = (): void => {\r\n        if (this.componentWillResize(window.innerWidth, window.innerHeight)) {\r\n            this.forceUpdate();\r\n        }\r\n    };\r\n\r\n    public constructor(props: P) {\r\n        super(props);\r\n    }\r\n    \r\n    /**\r\n     * Override this method when declaring a class extending ResponsiveComponent.\r\n     * \r\n     * This method is automatically called when the window resizes.\r\n     * \r\n     * If it returns `true`, `forceUpdate` will be called to update the elements.\r\n     * \r\n     * You need to realize that this process will NOT cause a `setState` or \r\n     * a `getSnapshotBeforeUpdate` call.\r\n     *\r\n     * @param {number} WIDTH width of the window\r\n     * @param {number} HEIGHT height of the window\r\n     * @returns {boolean | void}\r\n     * @memberof ResponsiveComponent\r\n     */\r\n    public componentWillResize(WIDTH: number, HEIGHT: number): boolean | void {}\r\n\r\n    /**\r\n     * UNSUGGESTED - use `componentDidMountRE` instead.\r\n     *\r\n     * @memberof ResponsiveComponent\r\n     */\r\n    public readonly componentDidMount = (): void => {\r\n        this.componentDidMountRE();\r\n        window.addEventListener(\"resize\", this._windowResizeListener);\r\n        this._windowResizeListener();\r\n    }\r\n\r\n    /**\r\n     * UNSUGGESTED - use `componentWillUnmountRE` instead.\r\n     *\r\n     * @memberof ResponsiveComponent\r\n     */\r\n    public readonly componentWillUnmount = (): void => {\r\n        window.removeEventListener(\"resize\", this._windowResizeListener);\r\n    }\r\n\r\n    /**\r\n     * Working as React cycling `componentDidMount`. \r\n     * \r\n     * Called immediately after a component is mounted. \r\n     * Setting state here will trigger re-rendering.\r\n     *\r\n     * @protected\r\n     * @memberof ResponsiveComponent\r\n     */\r\n    protected componentDidMountRE(): void {}\r\n\r\n    /**\r\n     * Working as React cycling `componentWillUnmount`. \r\n     * \r\n     * Called immediately before a component is destroyed. \r\n     * Perform any necessary cleanup in this method, \r\n     * such as cancelled network requests, \r\n     * or cleaning up any DOM elements created in componentDidMountRE.\r\n     *\r\n     * @protected\r\n     * @memberof ResponsiveComponent\r\n     */\r\n    protected componentWillUnmountRE(): void {}\r\n    \r\n};\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-09-06 21:58:07 \r\n * @Last Modified by: Antoine YANG\r\n * @Last Modified time: 2020-09-06 22:04:36\r\n */\r\n\r\nexport const isFullScreen = (): boolean => {\r\n    return (\r\n        document.fullscreenElement && true\r\n    ) || (\r\n        document.body.scrollHeight === window.screen.height\r\n        && document.body.scrollWidth === window.screen.width\r\n    );\r\n};\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-09-08 01:41:51 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-09-15 11:30:34\r\n */\r\n\r\nimport React from \"react\";\r\nimport $ from \"jquery\";\r\nimport flvjs from \"flv.js\";\r\nimport { ResponsiveComponent } from \"./ResponsiveComponent\";\r\nimport { isFullScreen } from \"../methods/screen\";\r\n\r\n\r\nexport interface BilibiliFlvProps {\r\n    /** 视频是否在加载完成后自动播放 */\r\n    autoPlay?: boolean;\r\n    /** 组件所使用的初始控件栏外观替换件 */\r\n    control?: BilibiliFlvControlAppearance;\r\n    /** 播放结束的动作 */\r\n    onPlayEnd?: (video: HTMLVideoElement) => void;\r\n    /** 视频类型 */\r\n    type: \"flv\" | \"mp4\";\r\n    /** 视频资源地址 */\r\n    url: string;\r\n    /** 最大日志记录长度 */\r\n    maxLogLength?: number;\r\n};\r\n\r\nexport interface BilibiliFlvState {\r\n    /** 组件所使用的当前控件栏外观替换件 */\r\n    control: BilibiliFlvControlAppearance;\r\n    /** 视频的播放状态 */\r\n    state: \"playing\" | \"paused\";\r\n    /** 视频音量，0-1 */\r\n    volume: number;\r\n    /**\r\n     * 视频播放速度 id\r\n     * - 0: 0.5\r\n     * - 1: 1\r\n     * - 2: 1.5\r\n     * - 3: 2\r\n     */\r\n    speedId: number;\r\n    /** 视频是否静音 */\r\n    muted: boolean;\r\n    /** 视频总长度（秒） */\r\n    duration: number;\r\n    /** 视频已缓冲长度（秒） */\r\n    buffered: number;\r\n    /** 视频当前播放位置（秒） */\r\n    curTime: number;\r\n    /** 播放器内宽（像素） */\r\n    w: number;\r\n};\r\n\r\n/**\r\n * 基于 bilibili/flv.js 制作的组件.\r\n *\r\n * @export\r\n * @class BilibiliFlv\r\n * @extends {ResponsiveComponent<BilibiliFlvProps, BilibiliFlvState>}\r\n */\r\nexport class BilibiliFlv extends ResponsiveComponent<BilibiliFlvProps, BilibiliFlvState> {\r\n    \r\n    // 类属性\r\n\r\n    /**\r\n     * 播放器的播放速度选项列表.\r\n     * - 0: 0.5\r\n     * - 1: 1\r\n     * - 2: 1.5\r\n     * - 3: 2\r\n     *\r\n     * @static\r\n     * @type {Array<number>}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    public static readonly PLAYBACKRATE: Array<number> = [0.5, 1, 1.5, 2];\r\n\r\n\r\n    // 对象属性：引用和上下文\r\n\r\n    /**\r\n     * 原生播放器元素的引用.\r\n     *\r\n     * @protected\r\n     * @type {React.RefObject<HTMLVideoElement>}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected dom: React.RefObject<HTMLVideoElement>;\r\n\r\n    /**\r\n     * 无交互进度条的容器的引用.\r\n     *\r\n     * @protected\r\n     * @type {React.RefObject<SVGSVGElement>}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected prog: React.RefObject<SVGSVGElement>;\r\n\r\n    /**\r\n     * 无交互进度条的引用.\r\n     *\r\n     * @protected\r\n     * @type {React.RefObject<SVGRectElement>}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected progBar: React.RefObject<SVGRectElement>;\r\n\r\n    /**\r\n     * 控件组容器元素的引用.\r\n     *\r\n     * @protected\r\n     * @type {React.RefObject<HTMLDivElement>}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected control: React.RefObject<HTMLDivElement>;\r\n\r\n    /**\r\n     * 控件：表示进度条背景的元素的引用.\r\n     *\r\n     * @protected\r\n     * @type {React.RefObject<SVGRectElement>}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected progBase: React.RefObject<SVGRectElement>;\r\n\r\n    /**\r\n     * 控件：表示缓冲进度的元素的引用.\r\n     *\r\n     * @protected\r\n     * @type {React.RefObject<SVGRectElement>}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected progBuffer: React.RefObject<SVGRectElement>;\r\n\r\n    /**\r\n     * 控件：表示播放进度的元素的引用.\r\n     *\r\n     * @protected\r\n     * @type {React.RefObject<SVGRectElement>}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected progCurrent: React.RefObject<SVGRectElement>;\r\n\r\n    /**\r\n     * 控件：表示进度图标的元素容器（G）的引用.\r\n     *\r\n     * @protected\r\n     * @type {React.RefObject<SVGGElement>}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected progFlag: React.RefObject<SVGGElement>;\r\n\r\n    /**\r\n     * 控件：时间轴预览的元素容器（div）的引用.\r\n     *\r\n     * @protected\r\n     * @type {React.RefObject<HTMLDivElement>}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected timetip: React.RefObject<HTMLDivElement>;\r\n\r\n    /**\r\n     * 控件：播放速度设置框的元素容器（div）的引用.\r\n     *\r\n     * @protected\r\n     * @type {React.RefObject<HTMLDivElement>}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected speedmenu: React.RefObject<HTMLDivElement>;\r\n\r\n    /**\r\n     * 控件：额外绘制内容的画布元素（canvas）的引用.\r\n     *\r\n     * @protected\r\n     * @type {React.RefObject<HTMLCanvasElement>}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected canvas: React.RefObject<HTMLCanvasElement>;\r\n\r\n    /**\r\n     * 绘制上下文：额外绘制内容的画布元素（canvas）的绘制上下文.\r\n     *\r\n     * @protected\r\n     * @type {CanvasRenderingContext2D | null}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected ctx: CanvasRenderingContext2D | null;\r\n\r\n\r\n    // 对象属性：外观设置\r\n\r\n    /**\r\n     * 控件栏外观.\r\n     *\r\n     * @protected\r\n     * @type {BilibiliFlvControlInterface}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected controller: BilibiliFlvControlInterface;\r\n\r\n    \r\n    // 对象属性：绘制时属性\r\n\r\n    /**\r\n     * 进度条显示宽度（像素）.\r\n     *\r\n     * @private\r\n     * @type {number}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    private progW: number;\r\n\r\n    /**\r\n     * 缩放比例（以1为基准）.\r\n     *\r\n     * @private\r\n     * @type {number}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    private scaling: number;\r\n\r\n    /**\r\n     * 预览时间位置（秒）.\r\n     * \r\n     * 若未处于时间轴预览交互，该值为 null.\r\n     *\r\n     * @private\r\n     * @type {(number | null)}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    private focus: number | null;\r\n\r\n    /**\r\n     * 播放器元素的拷贝，不接受任何交互，用于呈现目标时间的预览.\r\n     *\r\n     * @private\r\n     * @type {HTMLVideoElement}\r\n     * @memberof BilibiliFlv\r\n     * \r\n     * @summary 你可以在定义控件外观\r\n     * （BilibiliFlvControlInterface | BilibiliFlvControlAppearance）时使用它：\r\n     * @example\r\n     *  {\r\n     *      getSnapshot: (time: number, o: HTMLVideoElement) => {\r\n     *          const randomId: string = (Math.random() * 1e6).toFixed(0);\r\n     *\r\n     *          setTimeout(() => {\r\n     *              $(`#${ randomId }`).append(o);\r\n     *          }, 20);\r\n     *\r\n     *          return (\r\n     *              <div style={{\r\n     *                  width: \"16vmin\",\r\n     *                  backgroundColor: \"rgb(30,30,30)\",\r\n     *                  padding: \"4px\"\r\n     *              }} >\r\n     *                  <div id={ randomId }\r\n     *                  style={{\r\n     *                      display: \"block\"\r\n     *                  }} />\r\n     *                  <label\r\n     *                  style={{\r\n     *                      display: \"block\",\r\n     *                      fontSize: \"12px\"\r\n     *                  }} >\r\n     *                      { BilibiliFlv.toTimeString(time) }\r\n     *                  </label>\r\n     *              </div>\r\n     *          );\r\n     *      }\r\n     *  }\r\n     */\r\n    private copy: HTMLVideoElement;\r\n\r\n    /**\r\n     * 当前视频的资源加载状况.\r\n     *\r\n     * @protected\r\n     * @type {VideoState}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected videoState: VideoState;\r\n\r\n\r\n    // 对象属性：定时器\r\n    \r\n    /**\r\n     * 延时器：用于管理控件组元素的淡出动作.\r\n     *\r\n     * @private\r\n     * @type {NodeJS.Timeout}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    private timer: NodeJS.Timeout;\r\n\r\n    /**\r\n     * 循环器：用于周期调用关联接口进行画布绘制.\r\n     *\r\n     * @private\r\n     * @type {NodeJS.Timeout}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    private timerCanvas: NodeJS.Timeout;\r\n\r\n\r\n    // 对象属性：交互时属性\r\n\r\n    /**\r\n     * 交互锁：用于防止 keyPress 事件重复触发.\r\n     *\r\n     * @private\r\n     * @type {boolean}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    private keyDownLock: boolean;\r\n\r\n    /**\r\n     * 当前进度图标是否处于拖动状态.\r\n     *\r\n     * @private\r\n     * @type {boolean}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    private dragging: boolean;\r\n\r\n    /**\r\n     * 当前视频交互手势.\r\n     * \r\n     * - 若没有手势交互在进行中，该值为 null.\r\n     * - 若手势交互仍在判断阶段，该值为 \"unknown\".\r\n     * - \"lightness\" 为保留入口，暂无对应交互.\r\n     *\r\n     * @private\r\n     * @type {(null | \"unknown\" | \"dragging\" | \"volume\" | \"lightness\")}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    private gesture: null | \"unknown\" | \"dragging\" | \"volume\" | \"lightness\";\r\n\r\n\r\n    // 对象属性：交互管理信息\r\n\r\n    /**\r\n     * 组件的日志记录.\r\n     *\r\n     * @protected\r\n     * @type {Array<BilibiliFlvEventLog>}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected logs: Array<BilibiliFlvEventLog>;\r\n\r\n    /**\r\n     * 最大日志记录长度.\r\n     *\r\n     * @protected\r\n     * @type {number}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected maxLogLength: number;\r\n\r\n\r\n    \r\n    // 静态工具方法\r\n    \r\n    /**\r\n     * 以 \"mm:ss\" 的格式转化生成时间字符串.\r\n     *\r\n     * @static\r\n     * @param {number} sec 时间（秒）\r\n     * @returns {string}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    public static toTimeString(sec: number): string {\r\n        const minutes: number = Math.floor(sec / 60);\r\n        const seconds: number = Math.floor(sec % 60);\r\n\r\n        return `${\r\n            minutes.toString().padStart(2, \"0\")\r\n        }:${\r\n            seconds.toString().padStart(2, \"0\")\r\n        }`;\r\n    }\r\n\r\n\r\n    // 生命周期\r\n\r\n    public constructor(props: BilibiliFlvProps) {\r\n        // 组件初始化\r\n        super(props);\r\n        this.state = {\r\n            control: this.props.control || BilibiliFlvControlDefault,\r\n            state: this.props.autoPlay ? \"playing\" : \"paused\",\r\n            duration: 0,\r\n            buffered: 0,\r\n            curTime: 0,\r\n            volume: 0.4,\r\n            muted: false,\r\n            speedId: 1,\r\n            w: 0\r\n        };\r\n\r\n        // 构造引用，初始化上下文\r\n        this.dom = React.createRef<HTMLVideoElement>();\r\n        this.prog = React.createRef<SVGSVGElement>();\r\n        this.progBar = React.createRef<SVGRectElement>();\r\n        this.control = React.createRef<HTMLDivElement>();\r\n        this.progBase = React.createRef<SVGRectElement>();\r\n        this.progBuffer = React.createRef<SVGRectElement>();\r\n        this.progCurrent = React.createRef<SVGRectElement>();\r\n        this.progFlag = React.createRef<SVGGElement>();\r\n        this.timetip = React.createRef<HTMLDivElement>();\r\n        this.speedmenu = React.createRef<HTMLDivElement>();\r\n        this.canvas = React.createRef<HTMLCanvasElement>();\r\n        this.ctx = null;\r\n\r\n        // 初始化控件组外观\r\n        this.controller = this.loadController();\r\n\r\n        // 初始化绘制时字段，创建用于展示预览的拷贝\r\n        this.progW = 100;\r\n        this.scaling = 1;\r\n        this.focus = null;\r\n        this.copy = document.createElement(\"video\");\r\n        this.copy.style.width = \"100%\";\r\n        this.copy.style.height = \"100%\";\r\n        this.videoState = \"HAVE_NOTHING\";\r\n\r\n        // 初始化定时器\r\n        this.timer = setTimeout(() => void 0, 0);\r\n        this.timerCanvas = setInterval(() => {\r\n            this.handleCanvasRender();\r\n        }, 62);\r\n        \r\n        // 初始化交互时字段\r\n        this.keyDownLock = false;\r\n        this.dragging = false;\r\n        this.gesture = null;\r\n\r\n        // 初始化交互记录\r\n        this.logs = [];\r\n        this.maxLogLength = this.props.maxLogLength || 20;\r\n    }\r\n\r\n    public render(): JSX.Element {\r\n        // 更新缩放比例\r\n        this.scaling = Math.pow(this.state.w / 1200, 0.3);\r\n\r\n        return (\r\n            // 最外层容器，同时也是全屏显示的作用对象\r\n            <div\r\n            onMouseMove={\r\n                () => {\r\n                    // 淡入显示控件组\r\n                    this.showController(\"fadein\");\r\n                }\r\n            }\r\n            onKeyPress={\r\n                e => {\r\n                    if (this.handleKeyPress(e.which)) {\r\n                        // 响应交互后，阻止默认事件\r\n                        e.preventDefault();\r\n                    }\r\n                    // 阻止冒泡\r\n                    e.stopPropagation();\r\n                }\r\n            }\r\n            onKeyDown={\r\n                e => {\r\n                    if (this.handleKeyDown(e.which)) {\r\n                        // 响应交互后，阻止默认事件\r\n                        e.preventDefault();\r\n                    }\r\n                    // 阻止冒泡\r\n                    e.stopPropagation();\r\n                }\r\n            }\r\n            onKeyUp={\r\n                () => {\r\n                    // 关闭交互锁\r\n                    this.keyDownLock = false;\r\n                }\r\n            }\r\n            style={{\r\n                overflow: \"hidden\"  // 这个元素的高度将会实时计算，\r\n                                    // 设置隐藏超出部分以防止交互引起下方元素发生偏移\r\n            }} >\r\n                {/* 原生播放器 */}\r\n                <video key=\"video\" ref={ this.dom } autoPlay={ this.props.autoPlay }\r\n                style={{\r\n                    display: \"block\",   // 填充父元素\r\n                    width: \"100%\"       // 高度自动等比例调整\r\n                }}\r\n                onMouseOver={\r\n                    () => {\r\n                        // 让元素获得焦点，以便于其父结点监听键盘交互和阻止默认键盘事件\r\n                        $(this.dom.current!).focus();\r\n                    }\r\n                }\r\n                onMouseDown={\r\n                    (ev: React.MouseEvent) => {\r\n                        // 可能将开始新的手势交互，进入判断阶段\r\n                        this.gesture = \"unknown\";\r\n\r\n                        /** 交互起始位置 x 坐标 */\r\n                        const x0: number = ev.clientX;\r\n                        /** 交互起始位置 y 坐标 */\r\n                        const y0: number = ev.clientY;\r\n                        \r\n                        /** 窗口内宽度 */\r\n                        const W: number = window.innerWidth;\r\n                        /** 播放器高度 */\r\n                        const H: number = (\r\n                            this.dom.current?.clientHeight\r\n                        ) || (\r\n                            window.innerHeight / 2\r\n                        );\r\n\r\n                        /** 交互操作对应目标的原始值 */\r\n                        let value0: number = 0;\r\n                        \r\n                        /** 临时 mouseMove 监听 */\r\n                        const mouseMoveListener = (e: MouseEvent) => {\r\n                            /** 当前 x 坐标 */\r\n                            const x: number = e.clientX;\r\n                            /** 当前 y 坐标 */\r\n                            const y: number = e.clientY;\r\n\r\n                            if (this.gesture === \"unknown\") {\r\n                                // 判断一个未识别的手势操作\r\n\r\n                                /** x 方向位移 */\r\n                                const dmx: number = Math.abs(x - x0);\r\n                                /** y 方向位移 */\r\n                                const dmy: number = Math.abs(y - y0);\r\n\r\n                                if (dmx + dmy >= W / 60 + 10) {\r\n                                    // 位移的曼哈顿距离大于一定值，本次手势操作有效，开始识别\r\n\r\n                                    // 显示控件组\r\n                                    this.showController(\"show-nofadeout\");\r\n                                    \r\n                                    if (dmx > dmy) {\r\n                                        // 水平方向位移较大，识别为时间轴拖拽交互\r\n                                        this.gesture = \"dragging\";\r\n                                        \r\n                                        // 记录当前播放位置\r\n                                        value0 = this.dom.current!.currentTime;\r\n\r\n                                        // 输出到日志\r\n                                        this.writeLog({\r\n                                            type: \"relocate\",\r\n                                            prev: value0,\r\n                                            next: value0\r\n                                        });\r\n                                    } else if (x0 >= W / 2) {\r\n                                        // 从屏幕右侧开始且垂直方向位移较大，识别为音量调整交互\r\n                                        this.gesture = \"volume\";\r\n\r\n                                        // 记录当前音量\r\n                                        value0 = this.dom.current!.volume;\r\n\r\n                                        // 输出到日志\r\n                                        this.writeLog({\r\n                                            type: \"setVolume\",\r\n                                            prev: value0,\r\n                                            next: value0\r\n                                        });\r\n                                    } else {\r\n                                        // 从屏幕左侧开始且垂直方向位移较大，识别为保留交互 \"lightness\"\r\n                                        this.gesture = \"lightness\";\r\n\r\n                                        // 没有实际意义的初始化\r\n                                        value0 = 1;\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                // 已识别手势\r\n                                switch (this.gesture) {\r\n\r\n                                    case \"dragging\":\r\n                                        // 移动时间轴\r\n\r\n                                        /** 目标位置（秒） */\r\n                                        const time: number = Math.max(\r\n                                            0, Math.min(\r\n                                                (this.dom.current?.duration || 1) - 0.1,\r\n                                                value0 + (\r\n                                                    x - x0\r\n                                                ) / W * (\r\n                                                    this.dom.current?.duration || 1\r\n                                                )\r\n                                            )\r\n                                        );\r\n\r\n                                        if (this.dom.current) {\r\n                                            // 设置播放时间\r\n                                            this.dom.current.currentTime = time;\r\n\r\n                                            // 更新日志\r\n                                            this.writeLog({\r\n                                                type: \"relocate\",\r\n                                                prev: (\r\n                                                    this.logs.length && this.logs[\r\n                                                        this.logs.length - 1\r\n                                                    ].type === \"relocate\"\r\n                                                ) ? this.logs[\r\n                                                    this.logs.length - 1\r\n                                                ].prev: this.dom.current.currentTime,\r\n                                                next: this.dom.current.currentTime\r\n                                            });\r\n\r\n                                            // 更新状态\r\n                                            this.setState({\r\n                                                curTime: this.dom.current.currentTime\r\n                                            });\r\n                                        }\r\n\r\n                                        break;\r\n\r\n                                    case \"volume\":\r\n                                        // 调整音量\r\n                                        \r\n                                        /** 目标音量 */\r\n                                        const v: number = Math.max(\r\n                                            0, Math.min(\r\n                                                1,\r\n                                                value0 + (\r\n                                                    y0 - y\r\n                                                ) / H / 2\r\n                                            )\r\n                                        );\r\n\r\n                                        if (this.dom.current) {\r\n                                            // 仅在解除静音或音量变化时触发更新\r\n                                            if (\r\n                                                this.dom.current.muted\r\n                                                || this.dom.current.volume !== v\r\n                                            ) {\r\n                                                if (this.dom.current.muted) {\r\n                                                    // 解除静音\r\n                                                    this.dom.current.muted = false;\r\n\r\n                                                    this.writeLog({\r\n                                                        type: \"unmute\",\r\n                                                        prev: 1,\r\n                                                        next: 0\r\n                                                    });\r\n                                                }\r\n\r\n                                                // 设置音量\r\n                                                this.dom.current.volume = v;\r\n\r\n                                                // 更新日志\r\n                                                this.writeLog({\r\n                                                    type: \"setVolume\",\r\n                                                    prev: (\r\n                                                        this.logs.length && this.logs[\r\n                                                            this.logs.length - 1\r\n                                                        ].type === \"setVolume\"\r\n                                                    ) ? this.logs[\r\n                                                        this.logs.length - 1\r\n                                                    ].prev: this.dom.current.volume,\r\n                                                    next: this.dom.current.volume\r\n                                                });\r\n\r\n                                                // 更新状态\r\n                                                this.setState({\r\n                                                    muted: false,\r\n                                                    volume: this.dom.current.volume\r\n                                                });\r\n                                            }\r\n                                        }\r\n\r\n                                        break;\r\n\r\n                                    case \"lightness\":\r\n                                        break;\r\n                                }\r\n                            }\r\n                        };\r\n\r\n                        /** 临时 mouseUp 监听 */\r\n                        const mouseUpListener = () => {\r\n                            // 短暂延迟后重置手势\r\n                            setTimeout(() => {\r\n                                this.gesture = null;\r\n                            }, 10);\r\n\r\n                            // 显示控件组\r\n                            this.showController(\"show\");\r\n                            \r\n                            // 卸载临时监听\r\n                            document.body.removeEventListener(\r\n                                \"mousemove\", mouseMoveListener\r\n                            );\r\n                            document.body.removeEventListener(\r\n                                \"mouseup\", mouseUpListener\r\n                            );\r\n                        };\r\n\r\n                        // 全局绑定临时监听\r\n                        document.body.addEventListener(\r\n                            \"mousemove\", mouseMoveListener\r\n                        );\r\n                        document.body.addEventListener(\r\n                            \"mouseup\", mouseUpListener\r\n                        );\r\n                    }\r\n                }\r\n                onTouchMove={\r\n                    (ev: React.TouchEvent) => {\r\n                        if (!this.gesture && ev.touches.length) {\r\n                            // 为了兼容 touchStart 不能正确触发的情况，以此状态代替\r\n\r\n                            // 可能将开始新的手势交互，进入判断阶段\r\n                            this.gesture = \"unknown\";\r\n\r\n                            /** 交互起始位置 x 坐标 */\r\n                            const x0: number = ev.touches[0].clientX;\r\n                            /** 交互起始位置 y 坐标 */\r\n                            const y0: number = ev.touches[0].clientY;\r\n                            \r\n                            /** 窗口内宽度 */\r\n                            const W: number = window.innerWidth;\r\n                            /** 播放器高度 */\r\n                            const H: number = (\r\n                                this.dom.current?.clientHeight\r\n                            ) || (\r\n                                window.innerHeight / 2\r\n                            );\r\n                                    \r\n                            /** 交互操作对应目标的原始值 */\r\n                            let value0: number = 0;\r\n\r\n                            /** 临时 touchMove 监听 */\r\n                            const touchMoveListener = (e: TouchEvent) => {\r\n                                if (e.touches.length) {\r\n                                    /** 当前 x 坐标 */\r\n                                    const x: number = e.touches[0].clientX;\r\n                                    /** 当前 y 坐标 */\r\n                                    const y: number = e.touches[0].clientY;\r\n\r\n                                    if (this.gesture === \"unknown\") {\r\n                                        // 判断一个未识别的手势操作\r\n\r\n                                        /** x 方向位移 */\r\n                                        const dmx: number = Math.abs(x - x0);\r\n                                        /** y 方向位移 */\r\n                                        const dmy: number = Math.abs(y - y0);\r\n\r\n                                        if (dmx + dmy >= W / 60 + 10) {\r\n                                            // 位移的曼哈顿距离大于一定值，本次手势操作有效，开始识别\r\n\r\n                                            // 显示控件组\r\n                                            this.showController(\"show-nofadeout\");\r\n                                            \r\n                                            if (dmx > dmy) {\r\n                                                // 水平方向位移较大，识别为时间轴拖拽交互\r\n                                                this.gesture = \"dragging\";\r\n                                                \r\n                                                // 记录当前播放位置\r\n                                                value0 = this.dom.current!.currentTime;\r\n\r\n                                                // 输出到日志\r\n                                                this.writeLog({\r\n                                                    type: \"relocate\",\r\n                                                    prev: value0,\r\n                                                    next: value0\r\n                                                });\r\n                                            } else if (x0 >= W / 2) {\r\n                                                // 从屏幕右侧开始且垂直方向位移较大，识别为音量调整交互\r\n                                                this.gesture = \"volume\";\r\n\r\n                                                // 记录当前音量\r\n                                                value0 = this.dom.current!.volume;\r\n\r\n                                                // 输出到日志\r\n                                                this.writeLog({\r\n                                                    type: \"setVolume\",\r\n                                                    prev: value0,\r\n                                                    next: value0\r\n                                                });\r\n                                            } else {\r\n                                                // 从屏幕左侧开始且垂直方向位移较大，识别为保留交互 \"lightness\"\r\n                                                this.gesture = \"lightness\";\r\n\r\n                                                // 没有实际意义的初始化\r\n                                                value0 = 1;\r\n                                            }\r\n                                        }\r\n                                    } else {\r\n                                        // 已识别手势\r\n                                        switch (this.gesture) {\r\n\r\n                                            case \"dragging\":\r\n                                                // 移动时间轴\r\n\r\n                                                /** 目标位置（秒） */\r\n                                                const time: number = Math.max(\r\n                                                    0, Math.min(\r\n                                                        (this.dom.current?.duration || 1) - 0.1,\r\n                                                        value0 + (\r\n                                                            x - x0\r\n                                                        ) / W * (\r\n                                                            this.dom.current?.duration || 1\r\n                                                        )\r\n                                                    )\r\n                                                );\r\n\r\n                                                if (this.dom.current) {\r\n                                                    // 设置播放时间\r\n                                                    this.dom.current.currentTime = time;\r\n\r\n                                                    // 更新日志\r\n                                                    this.writeLog({\r\n                                                        type: \"relocate\",\r\n                                                        prev: (\r\n                                                            this.logs.length && this.logs[\r\n                                                                this.logs.length - 1\r\n                                                            ].type === \"relocate\"\r\n                                                        ) ? this.logs[\r\n                                                            this.logs.length - 1\r\n                                                        ].prev: this.dom.current.currentTime,\r\n                                                        next: this.dom.current.currentTime\r\n                                                    });\r\n\r\n                                                    // 更新状态\r\n                                                    this.setState({\r\n                                                        curTime: this.dom.current.currentTime\r\n                                                    });\r\n                                                }\r\n\r\n                                                break;\r\n\r\n                                            case \"volume\":\r\n                                                // 调整音量\r\n                                                \r\n                                                /** 目标音量 */\r\n                                                const v: number = Math.max(\r\n                                                    0, Math.min(\r\n                                                        1,\r\n                                                        value0 + (\r\n                                                            y0 - y\r\n                                                        ) / H / 2\r\n                                                    )\r\n                                                );\r\n\r\n                                                if (this.dom.current) {\r\n                                                    // 仅在解除静音或音量变化时触发更新\r\n                                                    if (\r\n                                                        this.dom.current.muted\r\n                                                        || this.dom.current.volume !== v\r\n                                                    ) {\r\n                                                        if (this.dom.current.muted) {\r\n                                                            // 解除静音\r\n                                                            this.dom.current.muted = false;\r\n\r\n                                                            this.writeLog({\r\n                                                                type: \"setVolume\",\r\n                                                                prev: (\r\n                                                                    this.logs.length && this.logs[\r\n                                                                        this.logs.length - 1\r\n                                                                    ].type === \"setVolume\"\r\n                                                                ) ? this.logs[\r\n                                                                    this.logs.length - 1\r\n                                                                ].prev: this.dom.current.volume,\r\n                                                                next: this.dom.current.volume\r\n                                                            });\r\n                                                        }\r\n\r\n                                                        // 设置音量\r\n                                                        this.dom.current.volume = v;\r\n\r\n                                                        // 更新日志\r\n                                                        this.writeLog({\r\n                                                            type: \"setVolume\",\r\n                                                            prev: (\r\n                                                                this.logs.length && this.logs[\r\n                                                                    this.logs.length - 1\r\n                                                                ].type === \"setVolume\"\r\n                                                            ) ? this.logs[\r\n                                                                this.logs.length - 1\r\n                                                            ].prev: this.dom.current.volume,\r\n                                                            next: this.dom.current.volume\r\n                                                        });\r\n\r\n                                                        // 更新状态\r\n                                                        this.setState({\r\n                                                            muted: false,\r\n                                                            volume: this.dom.current.volume\r\n                                                        });\r\n                                                    }\r\n                                                }\r\n\r\n                                                break;\r\n\r\n                                            case \"lightness\":\r\n                                                break;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            };\r\n\r\n                            /** 临时 touchEnd & touchCancel 监听 */\r\n                            const touchEndListener = () => {\r\n                                // 短暂延迟后重置手势\r\n                                setTimeout(() => {\r\n                                    this.gesture = null;\r\n                                }, 10);\r\n\r\n                                // 显示控件组\r\n                                this.showController(\"show\");\r\n                                \r\n                                // 卸载临时监听\r\n                                document.body.removeEventListener(\r\n                                    \"touchmove\", touchMoveListener\r\n                                );\r\n                                document.body.removeEventListener(\r\n                                    \"touchend\", touchEndListener\r\n                                );\r\n                                document.body.removeEventListener(\r\n                                    \"touchcancel\", touchEndListener\r\n                                );\r\n                            };\r\n\r\n                            // 全局绑定临时监听\r\n                            document.body.addEventListener(\r\n                                \"touchmove\", touchMoveListener\r\n                            );\r\n                            document.body.addEventListener(\r\n                                \"touchend\", touchEndListener\r\n                            );\r\n                            document.body.addEventListener(\r\n                                \"touchcancel\", touchEndListener\r\n                            );\r\n                        }\r\n                    }\r\n                }\r\n                onContextMenu={\r\n                    e => {\r\n                        // 禁止默认右键菜单\r\n                        e.preventDefault();\r\n                    }\r\n                }\r\n                onDoubleClick={\r\n                    () => {\r\n                        // 播放 / 暂停\r\n                        this.playOrPause();\r\n                    }\r\n                }\r\n                onCanPlay={\r\n                    () => {\r\n                        // 更新资源状态\r\n                        this.videoState = parseVideoState((\r\n                            this.dom.current?.readyState || 0\r\n                        ) as 0 | 1 | 2 | 3 | 4);\r\n                        \r\n                        // 更新视频信息\r\n                        this.setState({\r\n                            duration: this.dom.current!.duration,\r\n                            buffered: this.dom.current!.buffered.end(0),\r\n                            curTime: this.dom.current!.currentTime,\r\n                            volume: this.dom.current!.volume,\r\n                            muted: this.dom.current!.muted\r\n                        });\r\n                    }\r\n                }\r\n                onTimeUpdate={\r\n                    () => {\r\n                        // 更新资源状态\r\n                        this.videoState = parseVideoState((\r\n                            this.dom.current?.readyState || 0\r\n                        ) as 0 | 1 | 2 | 3 | 4);\r\n\r\n                        if (this.dom.current!.currentTime === this.dom.current!.duration) {\r\n                            // 播完动作\r\n                            (this.props.onPlayEnd || (() => {\r\n                                // 默认动作：暂停视频并跳转到起点位置\r\n                                this.dom.current!.pause();\r\n                                this.dom.current!.currentTime = 0;\r\n                                \r\n                                // 显示控件组\r\n                                this.showController(\"show\");\r\n\r\n                                // 更新播放状态\r\n                                this.setState({\r\n                                    state: \"paused\",\r\n                                    curTime: 0\r\n                                });\r\n                            }))(this.dom.current!);\r\n                        } else {\r\n                            // 更新播放状态\r\n                            this.setState({\r\n                                duration: this.dom.current!.duration,\r\n                                buffered: 0,\r\n                                curTime: this.dom.current!.currentTime\r\n                            });\r\n                        }\r\n                    }\r\n                } >\r\n                    Please update your browser to enable HTML5 video.\r\n                </video>\r\n                {/* 播放动画的canvas */}\r\n                <canvas key=\"canvas\" ref={ this.canvas }\r\n                style={{\r\n                    pointerEvents: \"none\",  // 阻止任何交互\r\n                    position: \"absolute\",   // 加载完成和窗口缩放时会自动计算新的位置和宽高\r\n                    display: \"none\"\r\n                }} />\r\n                {/* 静态进度条 */}\r\n                <svg key=\"prog\" ref={ this.prog }\r\n                style={{\r\n                    width: `${ this.state.w + 2 }px`,\r\n                    height: \"2px\",\r\n                    position: \"relative\",\r\n                    top: `-20px`,\r\n                    marginBottom: \"-2px\",\r\n                    pointerEvents: \"none\"\r\n                }} >\r\n                    <rect ref={ this.progBar }\r\n                    x=\"0\" y=\"0\" width=\"0\" height=\"2px\"\r\n                    style={{\r\n                        fill: this.controller.progStyle\r\n                    }} />\r\n                </svg>\r\n                {/* 组件栏 */}\r\n                <div key=\"control\" ref={ this.control }\r\n                style={{\r\n                    width: `${ this.state.w - 10 }px`,\r\n                    background: this.controller.background,\r\n                    height: `${ 36 * this.scaling }px`,\r\n                    padding: \"0 6px\",\r\n                    position: \"relative\",\r\n                    top: `-${ 36 * this.scaling + 22 }px`,\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    justifyContent: \"center\",\r\n                    flexWrap: \"wrap\",\r\n                    marginBottom: `-${ 36 * this.scaling }px`\r\n                }}\r\n                onMouseOver={\r\n                    () => {\r\n                        // 淡入\r\n                        this.showController(\"fadein-nofadeout\");\r\n                    }\r\n                }\r\n                onMouseOut={\r\n                    () => {\r\n                        // 淡出\r\n                        this.showController(\"show\");\r\n                    }\r\n                }\r\n                onMouseMove={\r\n                    e => {\r\n                        // 阻止冒泡\r\n                        e.stopPropagation();\r\n                        \r\n                        // 淡入\r\n                        this.showController(\"fadein-nofadeout\");\r\n                    }\r\n                } >\r\n                    {/* 播放/暂停按钮 */}\r\n                    <svg key=\"play\" viewBox=\"0 0 36 36\"\r\n                    style={{\r\n                        width: `${ 36 * this.scaling }px`,\r\n                        height: `${ 36 * this.scaling }px`\r\n                    }} >\r\n                        { this.state.state === \"playing\" ? (\r\n                            // 暂停按钮\r\n                            this.controller.btnStop.map((d, i) => {\r\n                                return {\r\n                                    ...d,\r\n                                    props: i ? {\r\n                                        ...d.props,\r\n                                        style: {\r\n                                            ...d.props.style,\r\n                                            pointerEvents: \"none\"\r\n                                        }\r\n                                    } : {\r\n                                        onClick: () => this.pause(),\r\n                                        ...d.props\r\n                                    },\r\n                                    key: i\r\n                                };\r\n                            })\r\n                        ) : (\r\n                            // 播放按钮\r\n                            this.controller.btnPlay.map((d, i) => {\r\n                                return {\r\n                                    ...d,\r\n                                    props: i ? {\r\n                                        ...d.props,\r\n                                        style: {\r\n                                            ...d.props.style,\r\n                                            pointerEvents: \"none\"\r\n                                        }\r\n                                    } : {\r\n                                        onClick: () => this.play(),\r\n                                        ...d.props\r\n                                    },\r\n                                    key: i\r\n                                };\r\n                            })\r\n                        ) }\r\n                    </svg>\r\n                    {/* 当前时间 */}\r\n                    <label key=\"curTime\" style={{\r\n                        display: \"inline-block\",\r\n                        fontSize: `${ 12 * Math.sqrt(this.scaling) }px`,\r\n                        width: `${ 48 * this.scaling }px`,\r\n                        maxHeight: `${ 36 * this.scaling }px`,\r\n                        color: this.controller.color\r\n                    }} >\r\n                        { BilibiliFlv.toTimeString(this.state.curTime) }\r\n                    </label>\r\n                    {/* 进度条 */}\r\n                    <svg key=\"progress\"\r\n                    style={{\r\n                        height: `${ 36 * this.scaling }px`,\r\n                        flex: 1     // 自动拉伸适应宽度\r\n                    }} >\r\n                    {/* 背景 */}\r\n                    {\r\n                        {\r\n                            ...this.controller.progressBase,\r\n                            props: {\r\n                                ...this.scaleY(this.controller.progressBase.props),\r\n                                onMouseOver: (e: React.MouseEvent<SVGRectElement, MouseEvent>) => {\r\n                                    const x: number = e.clientX - (\r\n                                        $(e.currentTarget).offset()?.left || 0\r\n                                    );\r\n                                    const time: number = this.state.duration / (\r\n                                        $(e.currentTarget).width()!\r\n                                    ) * x;\r\n                                    this.focus = time;\r\n                                    this.forceUpdate();\r\n                                    if (!this.timetip.current) {\r\n                                        return;\r\n                                    }\r\n                                    this.timetip.current.style.top = `${\r\n                                        ($(e.currentTarget).offset()?.top || 0) - (\r\n                                            $(window).scrollTop() || 0\r\n                                        )\r\n                                    }px`;\r\n                                    this.timetip.current.style.left = `${\r\n                                        e.clientX\r\n                                    }px`;\r\n                                },\r\n                                onMouseMove: (e: React.MouseEvent<SVGRectElement, MouseEvent>) => {\r\n                                    const x: number = e.clientX - (\r\n                                        $(e.currentTarget).offset()?.left || 0\r\n                                    );\r\n                                    const time: number = this.state.duration / (\r\n                                        $(e.currentTarget).width()!\r\n                                    ) * x;\r\n                                    this.focus = time;\r\n                                    this.forceUpdate();\r\n                                    if (!this.timetip.current) {\r\n                                        return;\r\n                                    }\r\n                                    this.timetip.current.style.top = `${\r\n                                        ($(e.currentTarget).offset()?.top || 0) - (\r\n                                            $(window).scrollTop() || 0\r\n                                        )\r\n                                    }px`;\r\n                                    this.timetip.current.style.left = `${\r\n                                        e.clientX\r\n                                    }px`;\r\n                                },\r\n                                onMouseOut: () => {\r\n                                    this.focus = null;\r\n                                    this.forceUpdate();\r\n                                },\r\n                                onClick: (e: React.MouseEvent<SVGRectElement, MouseEvent>) => {\r\n                                    if (!this.dom.current) {\r\n                                        return;\r\n                                    }\r\n                                    \r\n                                    const x: number = e.clientX - (\r\n                                        $(e.currentTarget).offset()?.left || 0\r\n                                    );\r\n                                    const time: number = this.state.duration / (\r\n                                        $(e.currentTarget).width()!\r\n                                    ) * x;\r\n                                    this.dom.current.currentTime = time;\r\n                                    this.setState({\r\n                                        curTime: time\r\n                                    });\r\n                                },\r\n                                x: 20 * this.scaling\r\n                            },\r\n                            key: \"base\",\r\n                            ref: this.progBase\r\n                        }\r\n                    }\r\n                    {/* 已缓冲 */}\r\n                    {\r\n                        {\r\n                            ...this.controller.progressBuffer,\r\n                            props: {\r\n                                ...this.scaleY(this.controller.progressBuffer.props),\r\n                                style: {\r\n                                    ...this.controller.progressBuffer.props.style,\r\n                                    pointerEvents: \"none\"\r\n                                },\r\n                                x: 20 * this.scaling\r\n                            },\r\n                            key: \"buffer\",\r\n                            ref: this.progBuffer\r\n                        }\r\n                    }\r\n                    {/* 当前进度 */}\r\n                    {\r\n                        {\r\n                            ...this.controller.progressCurrent,\r\n                            props: {\r\n                                ...this.scaleY(this.controller.progressCurrent.props),\r\n                                style: {\r\n                                    ...this.controller.progressCurrent.props.style,\r\n                                    pointerEvents: \"none\"\r\n                                },\r\n                                x: 20 * this.scaling\r\n                            },\r\n                            key: \"current\",\r\n                            ref: this.progCurrent\r\n                        }\r\n                    }\r\n                    {/* 图标 */}\r\n                    {\r\n                        {\r\n                            ...this.controller.progressFlag,\r\n                            props: {\r\n                                ...this.scaleY(this.controller.progressFlag.props),\r\n                                style: {\r\n                                    ...this.controller.progressFlag.props.style,\r\n                                    transform: `translate(-100vw, 50%)`\r\n                                },\r\n                                onMouseDown: (\r\n                                    () => {\r\n                                        this.dragging = true;\r\n\r\n                                        const target: SVGRectElement = this.progBase.current!;\r\n                                        const w: number = this.progW;\r\n                                        const offset: number = (\r\n                                            $(target).offset()?.left || 0\r\n                                        );\r\n\r\n                                        const k = setInterval(\r\n                                            () => {\r\n                                                this.showController(\"show-nofadeout\");\r\n                                            }, 1000\r\n                                        );\r\n\r\n                                        if (this.dom.current?.paused === false) {\r\n                                            this.writeLog({\r\n                                                type: \"pause\",\r\n                                                prev: 0,\r\n                                                next: 1\r\n                                            });\r\n                                        }\r\n\r\n                                        this.writeLog({\r\n                                            type: \"relocate\",\r\n                                            prev: this.dom.current!.currentTime,\r\n                                            next: this.dom.current!.currentTime\r\n                                        });\r\n                                        \r\n                                        const mouseMoveListener = (e: MouseEvent) => {\r\n                                            const x: number = e.clientX - offset;\r\n                                            const time: number = Math.max(\r\n                                                0, Math.min(\r\n                                                    this.dom.current?.duration || 1,\r\n                                                    this.state.duration / w * x\r\n                                                )\r\n                                            );\r\n                                            if (this.dom.current) {\r\n                                                this.dom.current.pause();\r\n                                                this.dom.current.currentTime = time;\r\n\r\n                                                this.writeLog({\r\n                                                    type: \"relocate\",\r\n                                                    prev: (\r\n                                                        this.logs.length && this.logs[\r\n                                                            this.logs.length - 1\r\n                                                        ].type === \"relocate\"\r\n                                                    ) ? this.logs[\r\n                                                        this.logs.length - 1\r\n                                                    ].prev: this.dom.current.currentTime,\r\n                                                    next: this.dom.current.currentTime\r\n                                                });\r\n                                            }\r\n                                            this.setState({\r\n                                                state: \"paused\",\r\n                                                curTime: this.dom.current?.currentTime || time\r\n                                            });\r\n                                        };\r\n            \r\n                                        const mouseUpListener = () => {\r\n                                            this.dragging = false;\r\n                                            document.body.removeEventListener(\r\n                                                \"mousemove\", mouseMoveListener\r\n                                            );\r\n                                            document.body.removeEventListener(\r\n                                                \"mouseup\", mouseUpListener\r\n                                            );\r\n                                            clearInterval(k);\r\n                                        };\r\n            \r\n                                        document.body.addEventListener(\r\n                                            \"mousemove\", mouseMoveListener\r\n                                        );\r\n                                        document.body.addEventListener(\r\n                                            \"mouseup\", mouseUpListener\r\n                                        );\r\n                                    }\r\n                                )\r\n                            },\r\n                            onTouchMove: (\r\n                                () => {\r\n                                    if (!this.dragging) {\r\n                                        this.dragging = true;\r\n\r\n                                        const target: SVGRectElement = this.progBase.current!;\r\n                                        const w: number = this.progW;\r\n                                        const offset: number = (\r\n                                            $(target).offset()?.left || 0\r\n                                        );\r\n\r\n                                        if (this.dom.current?.paused === false) {\r\n                                            this.writeLog({\r\n                                                type: \"pause\",\r\n                                                prev: 0,\r\n                                                next: 1\r\n                                            });\r\n                                        }\r\n\r\n                                        this.writeLog({\r\n                                            type: \"relocate\",\r\n                                            prev: this.dom.current!.currentTime,\r\n                                            next: this.dom.current!.currentTime\r\n                                        });\r\n\r\n                                        const touchMoveListener = (e: TouchEvent) => {\r\n                                            if (e.touches.length) {\r\n                                                this.showController(\"show-nofadeout\");\r\n                                                const x: number = e.touches[0].clientX - offset;\r\n                                                const time: number = Math.max(\r\n                                                    0, Math.min(\r\n                                                        this.dom.current?.duration || 1,\r\n                                                        this.state.duration / w * x\r\n                                                    )\r\n                                                );\r\n                                                if (this.dom.current) {\r\n                                                    this.dom.current.pause();\r\n                                                    this.dom.current.currentTime = time;\r\n\r\n                                                    this.writeLog({\r\n                                                        type: \"relocate\",\r\n                                                        prev: (\r\n                                                            this.logs.length && this.logs[\r\n                                                                this.logs.length - 1\r\n                                                            ].type === \"relocate\"\r\n                                                        ) ? this.logs[\r\n                                                            this.logs.length - 1\r\n                                                        ].prev: this.dom.current.currentTime,\r\n                                                        next: this.dom.current.currentTime\r\n                                                    });\r\n                                                }\r\n                                                this.setState({\r\n                                                    state: \"paused\",\r\n                                                    curTime: this.dom.current?.currentTime || time\r\n                                                });\r\n                                            }\r\n                                        };\r\n\r\n                                        const touchEndListener = () => {\r\n                                            this.dragging = false;\r\n                                            document.body.removeEventListener(\r\n                                                \"touchmove\", touchMoveListener\r\n                                            );\r\n                                            document.body.removeEventListener(\r\n                                                \"touchend\", touchEndListener\r\n                                            );\r\n                                            document.body.removeEventListener(\r\n                                                \"touchcancel\", touchEndListener\r\n                                            );\r\n                                        };\r\n            \r\n                                        document.body.addEventListener(\r\n                                            \"touchmove\", touchMoveListener\r\n                                        );\r\n                                        document.body.addEventListener(\r\n                                            \"touchend\", touchEndListener\r\n                                        );\r\n                                        document.body.addEventListener(\r\n                                            \"touchcancel\", touchEndListener\r\n                                        );\r\n                                    }\r\n                                }\r\n                            ),\r\n                            key: \"flag\",\r\n                            ref: this.progFlag      // 绑定引用\r\n                        }\r\n                    }\r\n                    </svg>\r\n                    {/* 总时间 */}\r\n                    <label key=\"duration\" style={{\r\n                        display: \"inline-block\",\r\n                        fontSize: `${ 12 * Math.sqrt(this.scaling) }px`,\r\n                        width: `${ 48 * this.scaling }px`,\r\n                        maxHeight: `${ 36 * this.scaling }px`,\r\n                        color: this.controller.color\r\n                    }} >\r\n                        { BilibiliFlv.toTimeString(this.state.duration) }\r\n                    </label>\r\n                    {/* 倍速 */}\r\n                    <svg key=\"speed\" viewBox=\"0 0 48 36\"\r\n                    style={{\r\n                        width: `${ 48 * this.scaling }px`,\r\n                        height: `${ 36 * this.scaling }px`\r\n                    }} >\r\n                    {\r\n                        this.controller.displaySpeed(\r\n                            BilibiliFlv.PLAYBACKRATE[this.state.speedId]\r\n                        ).map((d, i) => {\r\n                            return {\r\n                                ...d,\r\n                                props: i ? {\r\n                                    ...d.props,\r\n                                    style: {\r\n                                        ...d.props.style,\r\n                                        pointerEvents: \"none\"\r\n                                    }\r\n                                } : {\r\n                                    onClick: (e: React.MouseEvent) => {\r\n                                        if (this.speedmenu.current) {\r\n                                            // 更新速度设置控件位置\r\n                                            this.speedmenu.current.style.top = `${\r\n                                                ($(\r\n                                                    e.currentTarget.parentElement!\r\n                                                ).offset()?.top || 0) - (\r\n                                                    $(window).scrollTop() || 0\r\n                                                )\r\n                                            }px`;\r\n                                            this.speedmenu.current.style.left = `${\r\n                                                ($(e.currentTarget).offset()?.left || 0) + (\r\n                                                    $(e.currentTarget).width() || 0\r\n                                                ) / 2\r\n                                            }px`;\r\n\r\n                                            // 显示隐藏速度设置控件\r\n                                            if ($(this.speedmenu.current).css(\r\n                                                \"display\"\r\n                                            ) === \"none\") {\r\n                                                $(this.speedmenu.current).show();\r\n                                            } else {\r\n                                                $(this.speedmenu.current).hide();\r\n                                            }\r\n                                        }\r\n                                    },\r\n                                    ...d.props\r\n                                },\r\n                                key: i\r\n                            };\r\n                        })\r\n                    }\r\n                    </svg>\r\n                    {/* 速度设置 */}\r\n                    <div key=\"speedmenu\" ref={ this.speedmenu }\r\n                    style={{\r\n                        position: \"fixed\",\r\n                        top: -100,\r\n                        left: -100,\r\n                        transform: \"translate(-50%,-100%)\"\r\n                    }}\r\n                    onMouseOver={\r\n                        () => {\r\n                            clearTimeout(this.timer);\r\n                        }\r\n                    } >\r\n                    {\r\n                        this.controller.displaySpeedDialog(\r\n                            BilibiliFlv.PLAYBACKRATE,\r\n                            this.state.speedId,\r\n                            (id: number) => {\r\n                                if (this.dom.current && id !== this.state.speedId) {\r\n                                    this.writeLog({\r\n                                        type: \"setSpeed\",\r\n                                        prev: this.dom.current.playbackRate,\r\n                                        next: BilibiliFlv.PLAYBACKRATE[id]\r\n                                    });\r\n                                    this.dom.current.playbackRate = (\r\n                                        BilibiliFlv.PLAYBACKRATE[id]\r\n                                    );\r\n                                    this.setState({\r\n                                        speedId: id\r\n                                    });\r\n                                }\r\n                            }\r\n                        )\r\n                    }\r\n                    </div>\r\n                    {/* 音量 */}\r\n                    <svg key=\"volume\" viewBox=\"0 0 36 36\"\r\n                    style={{\r\n                        width: `${ 36 * this.scaling }px`,\r\n                        height: `${ 36 * this.scaling }px`\r\n                    }} >\r\n                    {\r\n                        this.controller.displayVolume(\r\n                            this.state.muted,\r\n                            this.state.volume\r\n                        ).map((d, i) => {\r\n                            return {\r\n                                ...d,\r\n                                props: i ? {\r\n                                    ...d.props,\r\n                                    style: {\r\n                                        ...d.props.style,\r\n                                        pointerEvents: \"none\"\r\n                                    }\r\n                                } : {\r\n                                    onClick: () => {\r\n                                        const v: boolean = !this.dom.current!.muted;\r\n                                        this.dom.current!.muted = v;\r\n                                        this.writeLog({\r\n                                            type: v ? \"mute\" : \"unmute\",\r\n                                            prev: this.dom.current!.muted ? 0 : 1,\r\n                                            next: v ? 1 : 0\r\n                                        });\r\n                                        this.setState({\r\n                                            muted: v\r\n                                        });\r\n                                    },\r\n                                    ...d.props\r\n                                },\r\n                                key: i\r\n                            };\r\n                        })\r\n                    }\r\n                    </svg>\r\n                    {/* 全屏按钮 */}\r\n                    <svg key=\"fullscreen\" viewBox=\"0 0 36 36\"\r\n                    style={{\r\n                        width: `${ 36 * this.scaling }px`,\r\n                        height: `${ 36 * this.scaling }px`\r\n                    }} >\r\n                    {\r\n                        (isFullScreen() ? this.controller.btnExitFullScreen\r\n                            : this.controller.btnFullScreen\r\n                        ).map((d, i) => {\r\n                            return {\r\n                                ...d,\r\n                                props: i ? {\r\n                                    ...d.props,\r\n                                    style: {\r\n                                        ...d.props.style,\r\n                                        pointerEvents: \"none\"\r\n                                    }\r\n                                } : {\r\n                                    onClick: () => this.fullScreen(),\r\n                                    ...d.props\r\n                                },\r\n                                key: i\r\n                            };\r\n                        })\r\n                    }\r\n                    </svg>\r\n                </div>\r\n                {/* 预览器 */}\r\n                <div key=\"timetip\" ref={ this.timetip }\r\n                style={{\r\n                    pointerEvents: \"none\",\r\n                    display: typeof this.focus === \"number\" ? \"unset\" : \"none\",\r\n                    position: \"fixed\",\r\n                    top: -100,\r\n                    left: -100,\r\n                    transform: \"translate(-50%,-100%)\"\r\n                }} >\r\n                {\r\n                    this.dom.current && typeof this.focus === \"number\" ? (\r\n                        (() => {\r\n                            this.copy.currentTime = this.focus;\r\n\r\n                            return this.controller.getSnapshot(this.focus, this.copy);\r\n                        })()\r\n                    ) : null\r\n                }\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * 在组件被挂载后调用.\r\n     *\r\n     * @memberof BilibiliFlv\r\n     */\r\n    public componentDidMountRE(): void {\r\n        if (this.canvas.current) {\r\n            // 获取 canvas 上下文\r\n            this.ctx = this.canvas.current.getContext(\"2d\");\r\n        }\r\n\r\n        if (flvjs.isSupported() && this.dom.current) {\r\n            // 加载视频资源\r\n            const flvPlayer = flvjs.createPlayer({\r\n                type: this.props.type,\r\n                url: this.props.url\r\n            });\r\n            flvPlayer.attachMediaElement(this.dom.current);\r\n            flvPlayer.load();\r\n            this.videoState = parseVideoState((\r\n                this.dom.current?.readyState || 0\r\n            ) as 0 | 1 | 2 | 3 | 4);\r\n\r\n            // 初始化设置\r\n            this.dom.current.muted = this.state.muted;\r\n            this.dom.current.volume = this.state.volume;\r\n            this.dom.current.playbackRate = BilibiliFlv.PLAYBACKRATE[this.state.speedId];\r\n\r\n            // 加载视频拷贝\r\n            const flvPlayerSS = flvjs.createPlayer({\r\n                type: this.props.type,\r\n                url: this.props.url\r\n            });\r\n            flvPlayerSS.attachMediaElement(this.copy);\r\n            flvPlayerSS.load();\r\n\r\n            // 异步更新进度条外观\r\n            setTimeout(() => {\r\n                this.adjustBox();\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 在窗口触发大小改变监听后调用.\r\n     *\r\n     * @memberof BilibiliFlv\r\n     */\r\n    public componentWillResize(): void {\r\n        if (this.speedmenu.current) {\r\n            // 隐藏播放速度设置界面\r\n            if ($(this.speedmenu.current).css(\"display\") !== \"none\") {\r\n                $(this.speedmenu.current).hide();\r\n            }\r\n        }\r\n\r\n        if (this.dom.current) {\r\n            const w: number = this.dom.current.offsetWidth;\r\n            \r\n            $(this.dom.current).ready(() => {\r\n                if (this.canvas.current) {\r\n                    // 更新画布定位\r\n                    this.canvas.current.style.display = \"unset\";\r\n                    this.canvas.current.width = w;\r\n                    this.canvas.current.height = this.dom.current!.offsetHeight;\r\n                    this.canvas.current.style.top = `${\r\n                        this.dom.current!.offsetTop - (\r\n                            $(window).scrollTop() || 0\r\n                        ) * 0\r\n                    }px`;\r\n                    this.canvas.current.style.left = `${\r\n                        this.dom.current!.offsetLeft\r\n                    }px`;\r\n                }\r\n            });\r\n    \r\n            if (w !== this.state.w) {\r\n                setTimeout(() => {\r\n                    // 异步更新进度条外观\r\n                    this.adjustBox();\r\n                }, 0);\r\n\r\n                // 更新状态\r\n                this.setState({\r\n                    w: w\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    public componentDidUpdate(): void {\r\n        // 更新控件组外观\r\n        this.controller = this.loadController();\r\n        // 更新进度条显示\r\n        this.adjustProgress();\r\n    }\r\n\r\n    /**\r\n     * 组件被卸载前调用.\r\n     *\r\n     * @memberof BilibiliFlv\r\n     */\r\n    public componentWillUnmountRE(): void {\r\n        // 清除定时器\r\n        clearTimeout(this.timer);\r\n        clearTimeout(this.timerCanvas);\r\n    }\r\n\r\n\r\n    // 视频播放相关接口\r\n    \r\n    /**\r\n     * 播放视频.\r\n     *\r\n     * @public\r\n     * @returns {void}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    public play(): void {\r\n        if (!flvjs.isSupported() || !this.dom.current) {\r\n            return;\r\n        }\r\n        if (this.dom.current.paused) {\r\n            this.writeLog({\r\n                type: \"play\",\r\n                prev: 0,\r\n                next: 1\r\n            });\r\n            this.dom.current.play();\r\n            this.setState({\r\n                state: \"playing\"\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 暂停视频.\r\n     *\r\n     * @public\r\n     * @returns {void}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    public pause(): void {\r\n        if (!flvjs.isSupported() || !this.dom.current) {\r\n            return;\r\n        }\r\n        if (!this.dom.current.paused) {\r\n            this.writeLog({\r\n                type: \"pause\",\r\n                prev: 1,\r\n                next: 0\r\n            });\r\n            this.dom.current.pause();\r\n            this.setState({\r\n                state: \"paused\"\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 播放或暂停视频.\r\n     *\r\n     * @public\r\n     * @memberof BilibiliFlv\r\n     */\r\n    public playOrPause(): void {\r\n        if (this.dom.current) {\r\n            if (this.dom.current.paused) {\r\n                this.play();\r\n            } else {\r\n                this.pause();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    // 其他交互接口\r\n\r\n    /**\r\n     * 设置音量.\r\n     *\r\n     * @public\r\n     * @param {number} val 设置值\r\n     * @param {(\"+\" | \"-\")} [op] 若设置值是变化量绝对值，设置此项为变化符号\r\n     * @returns {void}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    public setVolume(val: number, op?: \"+\" | \"-\"): void {\r\n        if (!this.dom.current) {\r\n            return;\r\n        }\r\n        const v: number = Math.max(\r\n            0, Math.min(\r\n                1, op ? (\r\n                    this.dom.current.volume + (\r\n                        op === \"+\" ? 1 : -1\r\n                    ) * val\r\n                ) : val\r\n            )\r\n        );\r\n        if (v !== this.dom.current.volume) {\r\n            if (this.dom.current.muted && v) {\r\n                this.writeLog({\r\n                    type: \"unmute\",\r\n                    prev: 1,\r\n                    next: 0\r\n                });\r\n            }\r\n\r\n            this.writeLog({\r\n                type: \"setVolume\",\r\n                prev: this.dom.current.volume,\r\n                next: v\r\n            });\r\n            \r\n            if (!this.dom.current.muted && v === 0) {\r\n                this.writeLog({\r\n                    type: \"mute\",\r\n                    prev: 0,\r\n                    next: 1\r\n                });\r\n            }\r\n\r\n            this.dom.current.volume = v;\r\n            this.dom.current.muted = this.dom.current.volume === 0;\r\n            this.setState({\r\n                volume: this.dom.current.volume,\r\n                muted: this.dom.current.volume === 0\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 定位播放位置.\r\n     *\r\n     * @public\r\n     * @param {number} val 设置值\r\n     * @param {(\"+\" | \"-\")} [op] 若设置值是变化量绝对值，设置此项为变化符号\r\n     * @returns {void}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    public setTime(val: number, op?: \"+\" | \"-\"): void {\r\n        if (!this.dom.current) {\r\n            return;\r\n        }\r\n        const v: number = Math.max(\r\n            0, Math.min(\r\n                this.dom.current.duration - 0.1, op ? (\r\n                    this.dom.current.currentTime + (\r\n                        op === \"+\" ? 1 : -1\r\n                    ) * val\r\n                ) : val\r\n            )\r\n        );\r\n        if (v !== this.dom.current.currentTime) {\r\n            this.writeLog({\r\n                type: \"relocate\",\r\n                prev: this.dom.current.currentTime,\r\n                next: v\r\n            });\r\n\r\n            this.dom.current.currentTime = v;\r\n            this.setState({\r\n                curTime: this.dom.current.currentTime\r\n            });\r\n        }\r\n    }\r\n\r\n    protected fullScreen(): void {\r\n        if (!this.dom.current) {\r\n            return;\r\n        }\r\n\r\n        $(this.dom.current).focus();\r\n        \r\n        if (isFullScreen()) {\r\n            // 退出全屏\r\n            let possibleKeysCanceling: Array<string> = [];\r\n            for (const key in document) {\r\n                if (key.toLocaleLowerCase().includes(\"cancelfullscreen\")\r\n                && typeof (document as any)[key] === \"function\") {\r\n                    possibleKeysCanceling.push(key);\r\n                }\r\n            }\r\n            if (possibleKeysCanceling.length) {\r\n                (document as any)[possibleKeysCanceling[0]]();\r\n                this.forceUpdate();\r\n            }\r\n\r\n            this.writeLog({\r\n                type: \"exitfullscreen\",\r\n                prev: 1,\r\n                next: 0\r\n            });\r\n        } else {\r\n            // 全屏\r\n            const container: HTMLDivElement = this.dom.current.parentElement! as HTMLDivElement;\r\n            let possibleKeysRequesting: Array<string> = [];\r\n            for (const key in container) {\r\n                if (key.toLocaleLowerCase().includes(\"requestfullscreen\")\r\n                && typeof (container as any)[key] === \"function\") {\r\n                    possibleKeysRequesting.push(key);\r\n                }\r\n            }\r\n            if (possibleKeysRequesting.length) {\r\n                (container as any)[possibleKeysRequesting[0]]();\r\n                this.forceUpdate();\r\n            }\r\n\r\n            this.writeLog({\r\n                type: \"fullscreen\",\r\n                prev: 0,\r\n                next: 1\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    // 渲染辅助方法\r\n\r\n    /**\r\n     * 获取控件组外观.\r\n     *\r\n     * @protected\r\n     * @returns {BilibiliFlvControlInterface}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected loadController(): BilibiliFlvControlInterface {\r\n        return {\r\n            ...BilibiliFlvControlDefault,\r\n            ...this.state.control\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 由于在响应式布局中，控件组高度会进行缩放，\r\n     * 进度条作为弹性元素会在水平方向伸缩，无法控制内部图形的高度和垂直方向定位，\r\n     * 通过调用这个方法，将一个属性对象中与高度、半径和y坐标相关的SVG属性值统一缩放.\r\n     *\r\n     * @private\r\n     * @param {JSX.Element[\"props\"]} props 目标属性对象\r\n     * @returns {JSX.Element[\"props\"]>}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    private scaleY(props: JSX.Element[\"props\"]): JSX.Element[\"props\"] {\r\n        return {\r\n            ...props,\r\n            y: parseFloat(props.y || \"0\") * this.scaling || void 0,\r\n            y1: parseFloat(props.y1 || \"0\") * this.scaling || void 0,\r\n            y2: parseFloat(props.y2 || \"0\") * this.scaling || void 0,\r\n            cy: parseFloat(props.cy || \"0\") * this.scaling || void 0,\r\n            r: parseFloat(props.r || \"0\") * this.scaling || void 0,\r\n            rx: parseFloat(props.rx || \"0\") * this.scaling || void 0,\r\n            ry: parseFloat(props.ry || \"0\") * this.scaling || void 0,\r\n            height: parseFloat(props.height || \"0\") * this.scaling || void 0\r\n        };\r\n    }\r\n\r\n    /**\r\n     * 调整进度条元素.\r\n     *\r\n     * @protected\r\n     * @returns {void}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected adjustBox(): void {\r\n        if (!this.progBase.current || !this.progBuffer.current\r\n            || !this.progCurrent.current || !this.progFlag.current\r\n            || !this.progBase.current.parentElement) {\r\n            return;\r\n        }\r\n\r\n        if (this.control.current) {\r\n            clearTimeout(this.timer);\r\n            $(this.control.current).show();\r\n            this.timer = setTimeout(() => {\r\n                $(this.control.current || {}).fadeOut(800);\r\n                if (this.speedmenu.current) {\r\n                    if ($(this.speedmenu.current).css(\"display\") !== \"none\") {\r\n                        $(this.speedmenu.current).hide();\r\n                    }\r\n                }\r\n            }, 1600);\r\n        } else {\r\n            return;\r\n        }\r\n\r\n        const w: number = (\r\n            this.progBase.current.parentElement.clientWidth\r\n        );\r\n\r\n        this.progW = w - 40 * this.scaling;\r\n        \r\n        // progress-base\r\n        this.progBase.current.setAttribute(\"width\", `${ this.progW }px`);\r\n        // progress-buffered\r\n        this.progBuffer.current.setAttribute(\"width\", `${\r\n            this.progW / this.state.duration * this.state.buffered || 0\r\n        }px`);\r\n        // progress-current\r\n        this.progCurrent.current.setAttribute(\"width\", `${\r\n            this.progW / this.state.duration * this.state.curTime || 0\r\n        }px`);\r\n        // progress-flag\r\n        this.progFlag.current.style.transform = `translate(${\r\n            (this.progW / this.state.duration * this.state.curTime) + 20 * this.scaling\r\n        }px, 50%)`;\r\n    }\r\n\r\n    /**\r\n     * 调整进度条.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    private adjustProgress(): void {\r\n        if (!this.progBase.current || !this.progBuffer.current\r\n            || !this.progCurrent.current || !this.progFlag.current\r\n            || !this.progBar.current) {\r\n            return;\r\n        }\r\n\r\n        const w: number = this.progW;\r\n\r\n        // upper-progress\r\n        this.progBar.current.setAttribute(\"width\", `${ \r\n            100 * this.state.curTime / (this.state.duration || 1)\r\n         }%`);\r\n        \r\n        // progress-buffered\r\n        this.progBuffer.current.setAttribute(\"width\", `${\r\n            w / this.state.duration * this.state.buffered || 0\r\n        }px`);\r\n        // progress-current\r\n        this.progCurrent.current.setAttribute(\"width\", `${\r\n            w / this.state.duration * this.state.curTime || 0\r\n        }px`);\r\n        // progress-flag\r\n        this.progFlag.current.style.transform = `translate(${\r\n            (w / this.state.duration * this.state.curTime) + 20 * this.scaling\r\n        }px, 50%)`;\r\n    }\r\n\r\n    /**\r\n     * 显示控件组.\r\n     *\r\n     * - mode === \"fadein\"          淡入，一定时间后淡出\r\n     * - mode === \"fadein-nofadeout\"淡入\r\n     * - mode === \"show\"            直接显示，一定时间后淡出\r\n     * - mode === \"show-nofadeout\"  直接显示\r\n     * @protected\r\n     * @param {(\"fadein\" | \"fadein-nofadeout\" | \"show\" | \"show-nofadeout\")} mode\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected showController(mode: \"fadein\" | \"fadein-nofadeout\" | \"show\" | \"show-nofadeout\"): void {\r\n        if (this.control.current && this.prog.current) {\r\n            // 停止淡出定时\r\n            clearTimeout(this.timer);\r\n\r\n            if (mode === \"fadein\") {\r\n                // 淡入\r\n                $(this.control.current).fadeIn(200);\r\n            } else {\r\n                // 直接显示\r\n                $(this.control.current).show().css(\"opacity\", 1);\r\n            }\r\n\r\n            if (!mode.endsWith(\"nofadeout\")) {\r\n                // 重设淡出定时\r\n                this.timer = setTimeout(() => {\r\n                    if (this.control.current) {\r\n                        $(this.control.current).fadeOut(800);\r\n                    }\r\n                    if (this.speedmenu.current) {\r\n                        // 隐藏播放速度设置界面\r\n                        if ($(this.speedmenu.current).css(\"display\") !== \"none\") {\r\n                            $(this.speedmenu.current).hide();\r\n                        }\r\n                    }\r\n                }, 1600);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 发送有关上下文，尝试一次画布绘制.\r\n     *\r\n     * @protected\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected handleCanvasRender(): void {\r\n        if (this.canvas.current && this.ctx) {\r\n            // 清空画布\r\n            const w: number = this.canvas.current.width;\r\n            this.canvas.current.width = w;\r\n            // 调用绘制\r\n            this.controller.canvasRender({\r\n                ctx: this.ctx,\r\n                w: this.canvas.current.width,\r\n                h: this.canvas.current.height,\r\n                dataState: this.videoState,\r\n                paused: this.dom.current?.paused || false,\r\n                muted: this.dom.current?.muted || false,\r\n                logs: this.logs\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    // 交互控制逻辑\r\n\r\n    /**\r\n     * 判断和执行 keyPress 监听.\r\n     *\r\n     * @protected\r\n     * @param {number} which\r\n     * @returns {boolean}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected handleKeyPress(which: number): boolean {\r\n        if (!this.control.current || !this.dom.current) {\r\n            return false;\r\n        }\r\n\r\n        switch (which) {\r\n            case 13:    // enter\r\n                this.fullScreen();\r\n                break;\r\n            case 32:    // space\r\n                if (this.dom.current.paused) {\r\n                    this.play();\r\n                } else {\r\n                    this.pause();\r\n                }\r\n                break;\r\n            case 61:    // =\r\n            case 43:    // +\r\n                this.setVolume(0.05, \"+\");\r\n                break;\r\n            case 45:    // -\r\n            case 95:    // _\r\n                this.setVolume(0.05, \"-\");\r\n                break;\r\n            default:\r\n                return false;\r\n        }\r\n\r\n        this.showController(\"fadein\");\r\n        \r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * 判断和执行 keyDown 监听，受交互锁制约.\r\n     *\r\n     * @protected\r\n     * @param {number} which\r\n     * @returns {boolean}\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected handleKeyDown(which: number): boolean {\r\n        if (!this.control.current || !this.dom.current || this.keyDownLock) {\r\n            return false;\r\n        }\r\n\r\n        switch (which) {\r\n            case 38:    // up\r\n                this.setVolume(0.05, \"+\");\r\n                break;\r\n            case 40:    // down\r\n                this.setVolume(0.05, \"-\");\r\n                break;\r\n            case 37:    // left\r\n                this.setTime(15, \"-\");\r\n                break;\r\n            case 39:    // right\r\n                this.setTime(15, \"+\");\r\n                break;\r\n            default:\r\n                return false;\r\n        }\r\n\r\n        this.keyDownLock = true;\r\n\r\n        this.showController(\"fadein\");\r\n        \r\n        return true;\r\n    }\r\n\r\n\r\n    // 日志管理方法\r\n\r\n    /**\r\n     * 增加日志记录.\r\n     *\r\n     * @protected\r\n     * @param {Omit<BilibiliFlvEventLog, \"time\">} log 新的日志信息\r\n     * @memberof BilibiliFlv\r\n     */\r\n    protected writeLog(log: Omit<BilibiliFlvEventLog, \"time\">): void {\r\n        // 添加\r\n        this.logs.push({\r\n            ...log,\r\n            time: (new Date()).getTime()\r\n        });\r\n\r\n        if (this.logs.length > this.maxLogLength) {\r\n            // 移除第一个记录\r\n            this.logs.shift();\r\n        }\r\n    }\r\n\r\n};\r\n\r\n\r\n/**\r\n * 视频的播放状态.\r\n *\r\n * @export\r\n */\r\nexport type VideoState = (\r\n    \"HAVE_NOTHING\"          // 没有关于音频/视频是否就绪的信息\r\n    | \"HAVE_METADATA\"       // 关于音频/视频就绪的元数据\r\n    | \"HAVE_CURRENT_DATA\"   // 关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒\r\n    | \"HAVE_FUTURE_DATA\"    // 当前及至少下一帧的数据是可用的\r\n    | \"HAVE_ENOUGH_DATA\"    // 可用数据足以开始播放\r\n);\r\n\r\n/**\r\n * 解析 video 对象的 readyState 属性值.\r\n *\r\n * @export\r\n * @param {(0 | 1 | 2 | 3 | 4)} videoReadyState readyState 属性值\r\n * @returns {VideoState}\r\n */\r\nexport const parseVideoState = (videoReadyState: 0 | 1 | 2 | 3 | 4): VideoState => {\r\n    switch (videoReadyState) {\r\n        case 0:\r\n            return \"HAVE_NOTHING\";\r\n        case 1:\r\n            return \"HAVE_METADATA\";\r\n        case 2:\r\n            return \"HAVE_CURRENT_DATA\";\r\n        case 3:\r\n            return \"HAVE_FUTURE_DATA\";\r\n        case 4:\r\n            return \"HAVE_ENOUGH_DATA\";\r\n    }\r\n};\r\n\r\n\r\n/**\r\n * 视频的日志记录.\r\n *\r\n * @export\r\n */\r\nexport type BilibiliFlvEvent = (\r\n    \"play\" | \"pause\" | \"setVolume\" | \"setSpeed\" | \"relocate\" | \"mute\" | \"unmute\"\r\n    | \"fullscreen\" | \"exitfullscreen\"\r\n);\r\n\r\n/**\r\n * 播放器组件的输出日志.\r\n *\r\n * @export\r\n * @interface BilibiliFlvEventLog\r\n */\r\nexport interface BilibiliFlvEventLog {\r\n    type: BilibiliFlvEvent;     // 响应事件\r\n    time: number;               // 响应发生时间\r\n    prev: number;               // 原始值\r\n    next: number;               // 更新值\r\n};\r\n\r\n\r\n/**\r\n * 播放器画布的绘制情景.\r\n *\r\n * @export\r\n */\r\nexport type CanvasRenderingEvent = {\r\n    ctx: CanvasRenderingContext2D;      // 用于绘制的 canvas 上下文\r\n    w: number;                          // canvas 元素的实际宽度\r\n    h: number;                          // canvas 元素的实际高度\r\n    dataState: VideoState;              // 视频就绪情况\r\n    paused: boolean;                    // 视频是否暂停\r\n    muted: boolean;                     // 视频是否静音\r\n    logs: Array<BilibiliFlvEventLog>;   // 播放器组件的输出日志\r\n};\r\n\r\n\r\n/**\r\n * 播放器组件的控制条元素.\r\n *\r\n * @export\r\n * @interface BilibiliFlvControlInterface\r\n */\r\nexport interface BilibiliFlvControlInterface {\r\n    /** 整体背景样式 (style.background) */\r\n    background: string;\r\n\r\n    /** 播放按钮 */\r\n    btnPlay: Array<JSX.Element>;    // 第一个元素作为判断交互的碰撞箱 (下同)\r\n    /** 暂停按钮 */\r\n    btnStop: Array<JSX.Element>;\r\n\r\n    /** 时间字体颜色 */\r\n    color: string;\r\n\r\n    /** 无交互进度条样式 */\r\n    progStyle: string;\r\n\r\n    /** 进度条：背景，rect，x坐标自动延伸 */\r\n    progressBase: JSX.Element;\r\n    /** 进度条：加载，rect，x坐标自动定位 */\r\n    progressBuffer: JSX.Element;\r\n    /** 进度条：进度，rect，x坐标自动定位 */\r\n    progressCurrent: JSX.Element;\r\n    /** 进度条：图标，transformY(50%)，transformX自动定位 */\r\n    progressFlag: JSX.Element;\r\n\r\n    /**\r\n     * 渲染快照预览.\r\n     * \r\n     * @param {number} time 聚焦时间(秒)\r\n     * @param {HTMLVideoElement} o 呈现预览的静态video元素\r\n     * @returns {JSX.Element} ReactDOM元素\r\n     * @memberof BilibiliFlvControlInterface\r\n     */\r\n    getSnapshot(time: number, o: HTMLVideoElement): JSX.Element;\r\n\r\n    /**\r\n     * 渲染播放速度图标.\r\n     *\r\n     * @param {number} speed 当前播放速度\r\n     * @returns {Array<JSX.Element>} ReactSVG元素列表，仅第一个元素会响应交互\r\n     * @memberof BilibiliFlvControlInterface\r\n     */\r\n    displaySpeed(speed: number): Array<JSX.Element>;\r\n    /**\r\n     * 渲染播放速度设置框，自动定位至图标上方水平居中.\r\n     *\r\n     * @param {Array<number>} options 可选择的播放速度选项\r\n     * @param {number} curId 当前播放速度对应的索引值\r\n     * @param {(clicked: number) => void} handler 调用以更新播放速度\r\n     * - param {number} clicked 选择选项对应的索引值\r\n     * @returns {JSX.Element} ReactDOM元素，需要自定义交互\r\n     * @memberof BilibiliFlvControlInterface\r\n     */\r\n    displaySpeedDialog(\r\n        options: Array<number>, curId: number, handler: (clicked: number) => void\r\n    ): JSX.Element;\r\n\r\n    /**\r\n     * 渲染音量按钮.\r\n     *\r\n     * @param {boolean} muted 是否静音\r\n     * @param {number} volume 音量大小(float~0-1)\r\n     * @returns {Array<JSX.Element>} ReactSVG元素列表，仅第一个元素会响应交互\r\n     * @memberof BilibiliFlvControlInterface\r\n     */\r\n    displayVolume(muted: boolean, volume: number): Array<JSX.Element>;\r\n\r\n    /** 全屏按钮 */\r\n    btnFullScreen: Array<JSX.Element>;\r\n    /** 退出全屏按钮 */\r\n    btnExitFullScreen: Array<JSX.Element>;\r\n\r\n    /**\r\n     * 响应视频行为的画布绘制.\r\n     *\r\n     * @param {CanvasRenderingEvent} event 激活事件名称\r\n     * @memberof BilibiliFlvControlInterface\r\n     */\r\n    canvasRender(event: CanvasRenderingEvent): void;\r\n};\r\n\r\n/**\r\n * 默认的控制条元素.\r\n */\r\nexport const BilibiliFlvControlDefault: BilibiliFlvControlInterface = {\r\n    background: \"rgba(30,30,30,0.9)\",\r\n\r\n    btnPlay: [(\r\n        <circle\r\n        cx=\"18\" cy=\"18\" r=\"16\"\r\n        style={{\r\n            fill: \"#00000000\"\r\n        }} />\r\n    ), (\r\n        <path d={\r\n            \"M11,10 Q11,8 17,11.33 L25,15.78 Q29,18 25,20.22 L17,24.67 Q11,28 11,26 Z\"\r\n        }\r\n        style={{\r\n            fill: \"rgb(250,250,250)\"\r\n        }} />\r\n    )],\r\n    btnStop: [(\r\n        <circle\r\n        cx=\"18\" cy=\"18\" r=\"16\"\r\n        style={{\r\n            fill: \"#00000000\"\r\n        }} />\r\n    ), (\r\n        <path d={\r\n            \"M11,10 L15,10 L15,26 L11,26 Z M21,10 L25,10 L25,26 L21,26 Z\"\r\n        }\r\n        style={{\r\n            fill: \"rgb(250,250,250)\"\r\n        }} />\r\n    )],\r\n\r\n    color: \"rgb(255,255,255)\",\r\n\r\n    progStyle: \"rgb(255,100,100)\",\r\n\r\n    progressBase: (\r\n        <rect y=\"15\" height=\"6\" rx=\"3\" ry=\"3\"\r\n        style={{\r\n            fill: \"rgb(90,90,90)\"\r\n        }} />\r\n    ),\r\n    progressBuffer: (\r\n        <rect y=\"15\" height=\"6\" rx=\"3\" ry=\"3\"\r\n        style={{\r\n            fill: \"rgb(124,124,124)\"\r\n        }} />\r\n    ),\r\n    progressCurrent: (\r\n        <rect y=\"15\" height=\"6\" rx=\"3\" ry=\"3\"\r\n        style={{\r\n            fill: \"rgb(203,200,202)\"\r\n        }} />\r\n    ),\r\n    progressFlag: (\r\n        <circle cy=\"0\" r=\"6\" cx=\"0\"\r\n        style={{\r\n            fill: \"rgb(255,255,255)\",\r\n            stroke: \"rgb(30,30,30)\"\r\n        }} />\r\n    ),\r\n\r\n    getSnapshot: (time: number, o: HTMLVideoElement) => {\r\n        const randomId: string = (Math.random() * 1e6).toFixed(0);\r\n\r\n        setTimeout(() => {\r\n            $(`#${ randomId }`).append(o);\r\n        }, 20);\r\n\r\n        return (\r\n            <div style={{\r\n                width: \"16vmin\",\r\n                backgroundColor: \"rgb(30,30,30)\",\r\n                padding: \"4px\"\r\n            }} >\r\n                <div id={ randomId }\r\n                style={{\r\n                    display: \"block\"\r\n                }} />\r\n                <label\r\n                style={{\r\n                    display: \"block\",\r\n                    fontSize: \"12px\"\r\n                }} >\r\n                    { BilibiliFlv.toTimeString(time) }\r\n                </label>\r\n            </div>\r\n        );\r\n    },\r\n\r\n    displaySpeed: (speed: number) => {\r\n        return [(\r\n            <rect key=\"interaction\"\r\n            x=\"6\" width=\"36\" y=\"10\" height=\"16\"\r\n            style={{\r\n                fill: \"#00000000\",\r\n                stroke: \"rgb(220,220,220)\",\r\n                strokeWidth: 1.6\r\n            }} />\r\n        ), (\r\n            <text key=\"label\" textAnchor=\"middle\"\r\n            x=\"24\" y=\"18\"\r\n            style={{\r\n                fill: \"rgb(255,255,255)\",\r\n                fontSize: \"12px\",\r\n                transform: \"translateY(0.33em)\"\r\n            }} >\r\n                { speed + \"x\" }\r\n            </text>\r\n        )];\r\n    },\r\n    displaySpeedDialog: (\r\n        options: number[], curId: number, handler: (clicked: number) => void\r\n    ) => {\r\n        return (\r\n            <div style={{\r\n                display: \"flex\",\r\n                flexDirection: \"column\",\r\n                padding: \"1vmin\",\r\n                backgroundColor: \"rgba(37,37,40,0.9)\",\r\n                textAlign: \"center\",\r\n                fontSize: \"calc(6px + 1vmin)\",\r\n                color: \"rgb(255,255,255)\"\r\n            }} >\r\n            {\r\n                options.map((d, i) => {\r\n                    return (\r\n                        <label key={ i }\r\n                        onClick={\r\n                            i === curId ? (void 0) : () => {\r\n                                handler(i);\r\n                            }\r\n                        }\r\n                        style={{\r\n                            padding: \"0.2em 0.4em\",\r\n                            margin: \"0.2em 0\",\r\n                            border: `1px solid rgba(255,255,255,${ i === curId ? 1 : 0.4 })`\r\n                        }} >\r\n                            { d + \"x\" }\r\n                        </label>\r\n                    );\r\n                })\r\n            }\r\n            </div>\r\n        );\r\n    },\r\n\r\n    displayVolume: (muted: boolean, volume: number) => {\r\n        const f = (val: number) => (220 - 260 * val) / 180 * Math.PI;\r\n        const tickC: number = 5 + Math.floor(window.innerWidth / 360) * 2;\r\n        const ticks: Array<number> = new Array<number>(tickC).fill(0).map(\r\n            (_, i) => i / (tickC - 1)\r\n        );\r\n\r\n        return [(\r\n            <circle key=\"interaction\"\r\n            cx=\"18\" cy=\"18\" r=\"16\"\r\n            style={{\r\n                fill: \"#00000000\"\r\n            }} />\r\n        ), ...ticks.map(\r\n            (d, i) => {\r\n                return (\r\n                    <line\r\n                    x1={ 18 + Math.cos(f(d)) * 9 } x2={ 18 + Math.cos(f(d)) * 13 }\r\n                    y1={ 20 - Math.sin(f(d)) * 9 } y2={ 20 - Math.sin(f(d)) * 13 }\r\n                    style={{\r\n                        stroke: \"rgba(220,220,220,0.5)\",\r\n                        strokeWidth: i === 0 ? 2.4 : 1.2\r\n                    }} />\r\n                );\r\n            }\r\n        ), (\r\n            <circle key=\"btn\"\r\n            cx=\"18\" cy=\"20\" r=\"7.5\"\r\n            style={{\r\n                fill: muted ? \"rgba(250,250,250,0.6)\" : \"rgb(250,250,250)\"\r\n            }} />\r\n        ), (\r\n            <circle key=\"pointer\" r=\"3\"\r\n            cx={ 18 + Math.cos(f(volume)) * 4 }\r\n            cy={ 20 - Math.sin(f(volume)) * 4 }\r\n            style={{\r\n                fill: muted ? \"rgba(37,37,37,0.6)\" : \"rgb(242,55,38)\"\r\n            }} />\r\n        )];\r\n    },\r\n\r\n    btnFullScreen: [(\r\n        <circle\r\n        cx=\"18\" cy=\"18\" r=\"16\"\r\n        style={{\r\n            fill: \"#00000000\"\r\n        }} />\r\n    ), (\r\n        <path d={\r\n            \"M8,16 L8,10 L14,10 \"\r\n            + \"M22,10 L28,10 L28,16 \"\r\n            + \"M28,20 L28,26 L22,26 \"\r\n            + \"M14,26 L8,26 L8,20\"\r\n        }\r\n        style={{\r\n            fill: \"none\",\r\n            stroke: \"rgb(250,250,250)\",\r\n            strokeWidth: 2\r\n        }} />\r\n    )],\r\n    btnExitFullScreen: [(\r\n        <circle\r\n        cx=\"18\" cy=\"18\" r=\"16\"\r\n        style={{\r\n            fill: \"#00000000\"\r\n        }} />\r\n    ), (\r\n        <path d={\r\n            \"M8,15 L14,15 L14,10 \"\r\n            + \"M22,10 L22,15 L28,15 \"\r\n            + \"M28,21 L22,21 L22,26 \"\r\n            + \"M14,26 L14,21 L8,21\"\r\n        }\r\n        style={{\r\n            fill: \"none\",\r\n            stroke: \"rgb(250,250,250)\",\r\n            strokeWidth: 2\r\n        }} />\r\n    )],\r\n\r\n    canvasRender: (event: CanvasRenderingEvent) => {\r\n        if (event.logs.length) {\r\n            // 日志输出\r\n            const time: number = (new Date()).getTime();\r\n            const ft = (t: number) => (\r\n                1 - (time - t) / 3000\r\n            );\r\n            const y: number = event.h * 0.7;\r\n            /** 3秒内产生的最后四条 */\r\n            const logs: Array<BilibiliFlvEventLog & { dt: number; }> = event.logs.map(\r\n                log => {\r\n                    return {\r\n                        ...log,\r\n                        dt: ft(log.time)\r\n                    };\r\n                }\r\n            ).filter(log => log.dt >= 0).sort((a, b) => b.dt - a.dt).slice(0, 4);\r\n            if (logs.length) {\r\n                const fontSize: number = 4 + Math.min(event.w, event.h) / 36;\r\n                event.ctx.font = `${ fontSize }px normal source-code-pro`;\r\n                event.ctx.textAlign = \"left\";\r\n                event.ctx.textBaseline = \"top\";\r\n\r\n                logs.reverse().forEach((log, i) => {\r\n                    event.ctx.globalAlpha = log.dt;\r\n                    event.ctx.fillStyle = `rgb(50,50,50)`;\r\n                    event.ctx.fillRect(\r\n                        fontSize,\r\n                        y + fontSize * i * 2,\r\n                        event.w * 0.1 + fontSize * 6,\r\n                        fontSize * 1.6\r\n                    );\r\n                    event.ctx.fillStyle = `rgb(220,220,220)`;\r\n                    event.ctx.fillText((\r\n                        log.type === \"exitfullscreen\" ? \"exit fullscreen\"\r\n                            : log.type === \"fullscreen\" ? \"fullscreen mode\"\r\n                                : log.type === \"mute\" ? \"mute\"\r\n                                    : log.type === \"pause\" ? \"paused\"\r\n                                        : log.type === \"play\" ? \"resume\"\r\n                                            : log.type === \"relocate\" ? (\r\n                                                log.next >= log.prev ? `fast forward ${\r\n                                                    Math.round(log.next - log.prev)\r\n                                                } sec` : `backward ${\r\n                                                    Math.round(log.prev - log.next)\r\n                                                } sec`\r\n                                            ) : log.type === \"setSpeed\" ? `speed set to ${\r\n                                                log.next\r\n                                            }` : log.type === \"setVolume\" ? `volume: ${\r\n                                                log.next.toFixed(2)\r\n                                            }` : \"unmute\"\r\n                    ), 8 + fontSize, y + fontSize * 0.3 + fontSize * i * 2);\r\n                });\r\n\r\n                event.ctx.globalAlpha = 1;\r\n            }\r\n        }\r\n\r\n        if (event.dataState === \"HAVE_FUTURE_DATA\" || event.dataState === \"HAVE_ENOUGH_DATA\") {\r\n            return;\r\n        }\r\n        if (event.dataState === \"HAVE_NOTHING\") {\r\n            event.ctx.fillStyle = \"rgba(39,37,40,0.9)\";\r\n            event.ctx.fillRect(0, 0, event.w, event.h);\r\n        }\r\n\r\n        // 加载特效：旋转\r\n        const f = (val: number) => val / 8 * 2 * Math.PI;\r\n        const x: number = event.w / 2;\r\n        const y: number = event.h / 2;\r\n        const d: number = Math.min(x, y) / 8;\r\n        let r: number = d / 4;\r\n        const t: number = 7 - Math.floor(\r\n            ((\r\n                (new Date()).getMilliseconds()\r\n            ) / 125)\r\n        ) % 8;\r\n        for (let i: number = 0; i < 8; i++) {\r\n            const cx: number = x + Math.cos(f(i + t)) * d;\r\n            const cy: number = y - Math.sin(f(i + t)) * d;\r\n            \r\n            event.ctx.fillStyle = `rgba(225,225,225,${ 1 - 0.1 * i })`;\r\n            event.ctx.beginPath();\r\n            event.ctx.arc(cx, cy, r, 0, Math.PI * 2);\r\n            event.ctx.fill();\r\n\r\n            r *= 0.9;\r\n        }\r\n    }\r\n};\r\n\r\n\r\n/**\r\n * 播放器的控件栏自定义外观.\r\n *\r\n * @export\r\n */\r\nexport type BilibiliFlvControlAppearance = Partial<BilibiliFlvControlInterface>;\r\n","/*\r\n * @Author: Antoine YANG \r\n * @Date: 2020-09-05 15:50:49 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-12-06 00:40:46\r\n */\r\n\r\nimport React from \"react\";\r\nimport $ from \"jquery\";\r\nimport { PageBody, Product, Role } from \"../methods/typedict\";\r\nimport { Shared } from \"../methods/globals\";\r\nimport { HomeButton } from \"../compo/HomeButton\";\r\nimport { find } from \"../methods/arrayhelper\";\r\nimport { InfoSet } from \"../constant/InfoSet\";\r\nimport Color from \"../preference/Color\";\r\nimport { InlineHTML } from \"../compo/InlineHTML\";\r\nimport { BilibiliFlv } from \"../compo/BilibiliFlv\";\r\nimport { Navigator } from \"../compo/Navigator\";\r\nimport { ScrollTop } from \"../compo/ScrollTop\";\r\nimport { ContactMe } from \"../compo/ContactMe\";\r\n\r\n\r\n/**\r\n * 这个页面级组件渲染单个作品的展示信息.\r\n * \r\n * @export\r\n * @class ProductDetail\r\n * @extends {PageBody<{}>}\r\n */\r\nexport class ProductDetail extends PageBody<{}> {\r\n\r\n    protected url: string;\r\n    protected data: Product;\r\n\r\n    public constructor(props: {}) {\r\n        super(props);\r\n        this.state = {};\r\n\r\n        const params: RegExpExecArray | null = /(?<=(\\/product\\/))[0-9]+(?!.)/.exec(\r\n            window.location.href\r\n        );\r\n        this.url = params ? params[0] : \"undefined\";\r\n        this.data = find(InfoSet.products, e => e.id === this.url)!;\r\n    }\r\n    \r\n    public render(): JSX.Element {\r\n        const colorf = (role: Role): string => {\r\n            return role === \"individual\" ? \"rgb(255,176,255)\"\r\n                : role === \"leader\" ? \"rgb(254,241,135)\"\r\n                    : role === \"engineer\" ? \"rgb(235,81,82)\"\r\n                        : role === \"contributor\" ? \"rgb(148,243,237)\"\r\n                            : \"rgb(176,217,246)\"\r\n        };\r\n        \r\n        return (\r\n            <>\r\n                <Navigator>\r\n                    <HomeButton active={ true } />\r\n                    <ScrollTop />\r\n                    <ContactMe />\r\n                </Navigator>\r\n                <div style={{\r\n                    color: Shared.theme.colortab.color,\r\n                    margin: \"calc(10px + 4vh) 0 calc(10px + 2vh)\",\r\n                    padding: \"1vh 5vw\"\r\n                }} >\r\n                    <div\r\n                    style={{\r\n                        display: \"block\",\r\n                        border: \"1px solid \" + Shared.theme.colortab.border.replace(\r\n                            \"(\", \"a(\"\r\n                        ).replace(\r\n                            \")\", \",0.2)\"\r\n                        ),\r\n                        margin: \"4vh 3vw\",\r\n                        padding: \"1em 0 6vh\",\r\n                        fontSize: \"calc(6px + 1.6vmin)\"\r\n                    }} >\r\n                        <div key=\"name\"\r\n                        style={{\r\n                            display: \"block\",\r\n                            backgroundColor: Shared.theme.colortab.border,\r\n                            color: Shared.theme.colortab.base\r\n                        }} >\r\n                            <h2\r\n                            style={{\r\n                                padding: \"0.2em 2em\",\r\n                                textAlign: \"left\",\r\n                                marginBottom: \"2.4em\"\r\n                            }} >\r\n                                { this.data.name }\r\n                            </h2>\r\n                        </div>\r\n                        <div key=\"head-all\" style={{\r\n                            display: \"block\",\r\n                            margin: \"0 4%\",\r\n                            color: Shared.theme.colortab.border\r\n                        }} >\r\n                            <h3\r\n                            style={{\r\n                                textAlign: \"left\"\r\n                            }} >\r\n                                Information\r\n                            </h3>\r\n                        </div>\r\n                        <div key=\"intro\"\r\n                        style={{\r\n                            display: \"flex\",\r\n                            flexWrap: \"wrap\",\r\n                            margin: \"0 4%\",\r\n                            justifyContent: \"center\"\r\n                        }} >\r\n                            <div key=\"left\"\r\n                            style={{\r\n                                minWidth: \"30%\",\r\n                                display: \"inline-flex\",\r\n                                padding: \"3%\",\r\n                                border: \"1px solid \" + Shared.theme.colortab.border,\r\n                                justifyContent: \"center\",\r\n                                flex: 1\r\n                            }} >\r\n                                <img src={ `/images/product_${ this.data.id }.png` }\r\n                                alt={ `product_${ this.data.id }` }\r\n                                onDragStart={ e => e.preventDefault() }\r\n                                style={{\r\n                                    display: \"block\",\r\n                                    maxWidth: \"100%\",\r\n                                    objectFit: \"contain\",\r\n                                    backgroundColor: \"#000000\"\r\n                                }} />\r\n                            </div>\r\n                            <div key=\"right\"\r\n                            style={{\r\n                                minWidth: \"61%\",\r\n                                textAlign: \"left\",\r\n                                display: \"inline-flex\",\r\n                                wordBreak: \"break-all\",\r\n                                flexDirection: \"column\"\r\n                            }} >\r\n                                <div key=\"name\"\r\n                                style={{\r\n                                    display: \"flex\",\r\n                                    justifyContent: \"center\",\r\n                                    flex: 1\r\n                                }} >\r\n                                    <label key=\"<\"\r\n                                    style={{\r\n                                        cursor: \"none\",\r\n                                        maxWidth: \"20vw\",\r\n                                        minWidth: \"18%\",\r\n                                        textAlign: \"center\",\r\n                                        padding: \"0.5em\",\r\n                                        border: \"1px solid \" + Shared.theme.colortab.border\r\n                                    }} >\r\n                                        Name\r\n                                    </label>\r\n                                    <label key=\">\"\r\n                                    style={{\r\n                                        cursor: \"none\",\r\n                                        border: \"1px solid \" + Shared.theme.colortab.border,\r\n                                        padding: \"0.5em\",\r\n                                        flex: \"auto\",\r\n                                        fontWeight: \"bold\"\r\n                                    }} >\r\n                                        { this.data.name }\r\n                                    </label>\r\n                                </div>\r\n                                <div key=\"avatar\"\r\n                                style={{\r\n                                    display: \"flex\",\r\n                                    justifyContent: \"center\",\r\n                                    flex: 1\r\n                                }} >\r\n                                    <label key=\"<\"\r\n                                    style={{\r\n                                        cursor: \"none\",\r\n                                        maxWidth: \"20vw\",\r\n                                        minWidth: \"18%\",\r\n                                        textAlign: \"center\",\r\n                                        padding: \"0.5em\",\r\n                                        border: \"1px solid \" + Shared.theme.colortab.border,\r\n                                        borderBottom: \"none\"\r\n                                    }} />\r\n                                    <label key=\">\"\r\n                                    style={{\r\n                                        cursor: \"none\",\r\n                                        border: \"1px solid \" + Shared.theme.colortab.border,\r\n                                        padding: \"0.5em\",\r\n                                        flex: \"auto\",\r\n                                        fontWeight: \"bold\",\r\n                                        borderBottom: \"none\"\r\n                                    }} >\r\n                                        <img src={ this.data.avatarURL }\r\n                                        width=\"48px\" height=\"48px\"\r\n                                        alt=\"avatar\"\r\n                                        onDragStart={ e => e.preventDefault() }\r\n                                        style={{\r\n                                            display: \"block\",\r\n                                            objectFit: \"contain\",\r\n                                            backgroundColor: \"#000000\"\r\n                                        }} />\r\n                                    </label>\r\n                                </div>\r\n                                <div key=\"role\"\r\n                                style={{\r\n                                    display: \"flex\",\r\n                                    justifyContent: \"center\",\r\n                                    flex: 1\r\n                                }} >\r\n                                    <label key=\"<\"\r\n                                    style={{\r\n                                        cursor: \"none\",\r\n                                        maxWidth: \"20vw\",\r\n                                        minWidth: \"18%\",\r\n                                        textAlign: \"center\",\r\n                                        padding: \"0.5em\",\r\n                                        border: \"1px solid \" + Shared.theme.colortab.border,\r\n                                        borderTop: \"none\"\r\n                                    }} >\r\n                                        Role\r\n                                    </label>\r\n                                    <label key=\">\"\r\n                                    style={{\r\n                                        cursor: \"none\",\r\n                                        border: \"1px solid \" + Shared.theme.colortab.border,\r\n                                        padding: \"0.5em\",\r\n                                        flex: \"auto\",\r\n                                        color: colorf(this.data.role)\r\n                                    }} >\r\n                                        { this.data.role }\r\n                                    </label>\r\n                                </div>\r\n                                <div key=\"period\"\r\n                                style={{\r\n                                    display: \"flex\",\r\n                                    justifyContent: \"center\",\r\n                                    flex: 1\r\n                                }} >\r\n                                    <label key=\"<\"\r\n                                    style={{\r\n                                        cursor: \"none\",\r\n                                        maxWidth: \"20vw\",\r\n                                        minWidth: \"18%\",\r\n                                        textAlign: \"center\",\r\n                                        padding: \"0.5em\",\r\n                                        border: \"1px solid \" + Shared.theme.colortab.border\r\n                                    }} >\r\n                                        Period\r\n                                    </label>\r\n                                    <label key=\">\"\r\n                                    style={{\r\n                                        cursor: \"none\",\r\n                                        border: \"1px solid \" + Shared.theme.colortab.border,\r\n                                        padding: \"0.5em\",\r\n                                        flex: \"auto\"\r\n                                    }} >\r\n                                    {\r\n                                        `${ this.data.beginTime[0] }/${ this.data.beginTime[1] }`\r\n                                        + \" ~ \"\r\n                                        + (\r\n                                            this.data.closeTime === \"-\" ? \"\" : (\r\n                                                `${\r\n                                                    this.data.closeTime[0]\r\n                                                }/${\r\n                                                    this.data.closeTime[1]\r\n                                                }`\r\n                                            )\r\n                                        )\r\n                                    }\r\n                                    </label>\r\n                                </div>\r\n                                <div key=\"GitHub\"\r\n                                style={{\r\n                                    display: \"flex\",\r\n                                    justifyContent: \"center\",\r\n                                    flex: 1\r\n                                }} >\r\n                                    <label key=\"<\"\r\n                                    style={{\r\n                                        cursor: \"none\",\r\n                                        maxWidth: \"20vw\",\r\n                                        minWidth: \"18%\",\r\n                                        textAlign: \"center\",\r\n                                        padding: \"0.5em\",\r\n                                        border: \"1px solid \" + Shared.theme.colortab.border\r\n                                    }} >\r\n                                        GitHub\r\n                                    </label>\r\n                                    <label key=\">\"\r\n                                    style={{\r\n                                        cursor: \"none\",\r\n                                        border: \"1px solid \" + Shared.theme.colortab.border,\r\n                                        padding: \"0.5em\",\r\n                                        flex: \"auto\"\r\n                                    }} >\r\n                                    {\r\n                                        this.data.githubURL ? (\r\n                                            <a href={ this.data.githubURL } target=\"new\"\r\n                                            onMouseOver={\r\n                                                () => {\r\n                                                    Shared.cursorState = \"pointer\";\r\n                                                }\r\n                                            }\r\n                                            onMouseOut={\r\n                                                () => {\r\n                                                    Shared.cursorState = \"normal\";\r\n                                                }\r\n                                            }\r\n                                            style={{\r\n                                                cursor: \"none\",\r\n                                                color: Color.interpolate(\r\n                                                    Shared.theme.colortab.color,\r\n                                                    Shared.theme.colortab.frontground\r\n                                                )\r\n                                            }} >\r\n                                                { this.data.githubURL }\r\n                                            </a>\r\n                                        ) : (\r\n                                            <span style={{\r\n                                                fontStyle: \"italic\"\r\n                                            }} >\r\n                                                Not released\r\n                                            </span>\r\n                                        )\r\n                                    }\r\n                                    </label>\r\n                                </div>\r\n                                <div key=\"techs\"\r\n                                style={{\r\n                                    display: \"flex\",\r\n                                    justifyContent: \"center\",\r\n                                    flex: 1\r\n                                }} >\r\n                                    <label key=\"<\"\r\n                                    style={{\r\n                                        cursor: \"none\",\r\n                                        maxWidth: \"20vw\",\r\n                                        minWidth: \"18%\",\r\n                                        textAlign: \"center\",\r\n                                        padding: \"0.5em\",\r\n                                        border: \"1px solid \" + Shared.theme.colortab.border\r\n                                    }} >\r\n                                        Techs\r\n                                    </label>\r\n                                    <label key=\">\"\r\n                                    style={{\r\n                                        cursor: \"none\",\r\n                                        border: \"1px solid \" + Shared.theme.colortab.border,\r\n                                        padding: \"0.5em\",\r\n                                        flex: \"auto\"\r\n                                    }} >\r\n                                    {\r\n                                        this.data.techs.map((tech, i) => {\r\n                                            return (\r\n                                                <label key={ i }\r\n                                                style={{\r\n                                                    display: \"inline-block\",\r\n                                                    cursor: \"none\",\r\n                                                    margin: \"0 0.5em 0.1em\",\r\n                                                    color: Color.setLightness(\r\n                                                        Shared.theme.colortab.frontground,\r\n                                                        0.9\r\n                                                    ),\r\n                                                    padding: \"0 0.4em\",\r\n                                                    borderRight: `1px solid ${\r\n                                                        Shared.theme.colortab.frontground\r\n                                                    }`,\r\n                                                    borderLeft: `1px solid ${\r\n                                                        Shared.theme.colortab.frontground\r\n                                                    }`,\r\n                                                    borderRadius: \"6px 2px\"\r\n                                                }} >\r\n                                                    { tech }\r\n                                                </label>\r\n                                            );\r\n                                        })\r\n                                    }\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        {\r\n                            this.data.videoURL ? (\r\n                                <div key=\"video\"\r\n                                style={{\r\n                                    margin: \"2em 4%\",\r\n                                    padding: \"1em 1vmin\",\r\n                                    cursor: \"default\"\r\n                                }}\r\n                                onMouseOver={\r\n                                    () => {\r\n                                        Shared.cursorState = \"origin\";\r\n                                    }\r\n                                }\r\n                                onMouseOut={\r\n                                    () => {\r\n                                        Shared.cursorState = \"normal\";\r\n                                    }\r\n                                } >\r\n                                    <div key=\"head\" style={{\r\n                                        display: \"block\",\r\n                                        color: Shared.theme.colortab.border\r\n                                    }} >\r\n                                        <h3\r\n                                        style={{\r\n                                            textAlign: \"left\"\r\n                                        }} >\r\n                                            Video\r\n                                        </h3>\r\n                                    </div>\r\n                                    <BilibiliFlv url={ this.data.videoURL } type=\"mp4\"\r\n                                    control={ Shared.theme.videoController } />\r\n                                </div>\r\n                            ) : null\r\n                        }\r\n                        <div key=\"description\"\r\n                        style={{\r\n                            display: \"block\",\r\n                            margin: \"2em 4% 1em\",\r\n                            textAlign: \"left\",\r\n                            padding: \"1em 1vmin\",\r\n                            lineHeight: \"2em\"\r\n                        }} >\r\n                            <div key=\"head\" style={{\r\n                                display: \"block\",\r\n                                color: Shared.theme.colortab.border\r\n                            }} >\r\n                                <h3\r\n                                style={{\r\n                                    textAlign: \"left\"\r\n                                }} >\r\n                                    Description\r\n                                </h3>\r\n                            </div>\r\n                            <InlineHTML html={ this.data.description } />\r\n                        </div>\r\n                        <div key=\"langs\"\r\n                        style={{\r\n                            display: \"block\",\r\n                            margin: \"1em 4% 2em\",\r\n                            textAlign: \"left\",\r\n                            padding: \"1em 1vmin\",\r\n                            lineHeight: \"2em\"\r\n                        }} >\r\n                            <div key=\"head\" style={{\r\n                                display: \"block\",\r\n                                color: Shared.theme.colortab.border\r\n                            }} >\r\n                                <h3\r\n                                style={{\r\n                                    textAlign: \"left\"\r\n                                }} >\r\n                                    Languages\r\n                                </h3>\r\n                            </div>\r\n                            {\r\n                                this.data.languages.map((d, i) => {\r\n                                    return (\r\n                                        <label key={ i }\r\n                                        style={{\r\n                                            display: \"inline-block\",\r\n                                            cursor: \"none\",\r\n                                            margin: \"0.5em 0.5em\",\r\n                                            color: Color.setLightness(\r\n                                                Shared.theme.colortab.frontground2,\r\n                                                0.9\r\n                                            ),\r\n                                            padding: \"0 0.8em\",\r\n                                            borderTop: `1px solid ${\r\n                                                Shared.theme.colortab.frontground2\r\n                                            }`,\r\n                                            borderBottom: `1px solid ${\r\n                                                Shared.theme.colortab.frontground2\r\n                                            }`,\r\n                                            borderRadius: \"10px 4px\"\r\n                                        }} >\r\n                                            <span key=\"name\"\r\n                                            style={{\r\n                                                fontWeight: \"bold\"\r\n                                            }} >\r\n                                                { d.name }\r\n                                            </span>\r\n                                            <span key=\"rate\"\r\n                                            style={{\r\n                                                color: Shared.theme.colortab.color,\r\n                                                marginLeft: \"1em\"\r\n                                            }} >\r\n                                                { `${ (\r\n                                                    d.rate * 100\r\n                                                ).toFixed(2) }%` }\r\n                                            </span>\r\n                                        </label>\r\n                                    );\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n\r\n    public componentDidMount(): void {\r\n        Shared.cursorState = \"normal\";\r\n        $(window).scrollTop(0);\r\n    }\r\n\r\n    public componentDidCatch(): void {\r\n        const root: string = /.*\\/#\\//.exec(window.location.href)![0];\r\n        window.location.href = root + \"not_found/\" + (this.url || \"undefined\");\r\n    }\r\n\r\n};\r\n","import React, { Component } from 'react';\r\nimport '../App.css';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport { Home } from './routers/Home';\r\nimport { BadUrl } from './routers/BadUrl';\r\nimport { BackgroundCanvas } from './themes/BackgroundCanvas';\r\nimport { Theme } from './methods/typedict';\r\nimport { Shared } from './methods/globals';\r\nimport { Settings } from './routers/Settings';\r\nimport { ProductDetail } from './routers/ProductDetail';\r\n\r\n\r\nexport interface AppV2State {\r\n  theme: Theme;\r\n};\r\n\r\n/**\r\n * 默认的最外层渲染元素.\r\n *\r\n * @class AppV2\r\n * @extends {Component<{}, {}>}\r\n */\r\nclass AppV2 extends Component<{}, AppV2State> {\r\n\r\n  public constructor(props: {}) {\r\n    super(props);\r\n    this.state = {\r\n      theme: Shared.theme\r\n    };\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    Shared.theme = this.state.theme;\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        {/* <Opening /> */}\r\n        <BackgroundCanvas initTheme={ this.state.theme } >\r\n          <div style={{\r\n            display: \"block\",\r\n            margin: \"10vh 5vw 1vh\"\r\n          }} >\r\n            <a href=\"/\" style={{\r\n              color: \"rgb(255,215,61)\",\r\n              cursor: \"none\",\r\n              fontSize: \"160%\"\r\n            }} >\r\n              This website has an higher version, click here to move to v3.x!\r\n            </a>\r\n          </div>\r\n          <Router>\r\n            <Switch>\r\n              <Route path=\"/v2/\" exact component={ Home } />\r\n              <Route path=\"/v2/settings\" exact component={ Settings } />\r\n              <Route path=\"/v2/product/*\" exact component={ ProductDetail } />\r\n              <Route path=\"/v2/**\" component={ BadUrl } />\r\n            </Switch>\r\n          </Router>\r\n        </BackgroundCanvas>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  public componentDidMount(): void {\r\n    document.body.style.overflowY = \"scroll\";\r\n    document.body.style.position = \"initial\";\r\n  }\r\n\r\n  public componentWillUnmount(): void {\r\n    document.body.style.overflowY = \"\";\r\n    document.body.style.position = \"fixed\";\r\n  }\r\n\r\n};\r\n\r\nexport default AppV2;\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-12-07 11:49:18 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-12-07 12:11:05\r\n */\r\n\r\n/** 最小的 delta 阈值 */\r\nconst WHEEL_DELTA_THREAD = 10;\r\n\r\nlet WheelEventInfo = {\r\n    deltaY: 0\r\n};\r\n\r\n/**\r\n * 登录一个事件，用以判断之后输入的 wheel 事件是否与此 wheel 事件连续.\r\n *\r\n * @exports\r\n * @param {WheelEvent} ev\r\n * @returns {void}\r\n */\r\nexport const SubscribeWheelEvent = (ev: WheelEvent): void => {\r\n    if (Math.abs(ev.deltaY) > WHEEL_DELTA_THREAD) {\r\n        WheelEventInfo.deltaY = ev.deltaY;\r\n    }\r\n};\r\n\r\n/**\r\n * 卸载登录的 wheel 事件.\r\n *\r\n * @exports\r\n * @returns {void}\r\n */\r\nexport const UnsubscribeWheelEvent = (): void => {\r\n    WheelEventInfo.deltaY = 0;\r\n};\r\n\r\n/**\r\n * 判断一个输入的 wheel 事件是否与上一个 wheel 事件连续.\r\n * \r\n * 部分浏览器（如 Chrome）为获得平滑过渡的滚动效果，\r\n * 会由一次 wheel 交互产生若干连续的 wheel 事件.\r\n * \r\n * 此方法采用对比方向和 deltaY 的形式决定新输入的事件是否连续于上一次输入.\r\n *\r\n * @exports\r\n * @param {WheelEvent} ev\r\n * @returns {boolean}\r\n */\r\nexport const IsWheelEventValid = (ev: WheelEvent): boolean => {\r\n    let flag: boolean = false;\r\n\r\n    if (Math.abs(ev.deltaY) < WHEEL_DELTA_THREAD) {\r\n        return false;\r\n    }\r\n\r\n    if (ev.deltaY * WheelEventInfo.deltaY < 0) {\r\n        // 方向相反\r\n        flag = true;\r\n    } else if (Math.abs(ev.deltaY) > Math.abs(WheelEventInfo.deltaY) + 2) {\r\n        // 连续触发的 wheel 事件，delta 值会持续衰减.\r\n        // 此处与触发阶段结尾的 delta 值比较.\r\n        // 其中可能会产生连续的两个 delta 值相同的事件，\r\n        // 甚至比反增 1.25，所以比较时加上 2.\r\n        flag = true;\r\n    }\r\n\r\n    return flag;\r\n};\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-12-06 15:41:45 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-12-09 19:13:59\r\n */\r\n\r\nimport { Lang } from \"../TypesV3\";\r\nimport $ from \"jquery\";\r\n\r\n\r\nexport interface LangReduxState {\r\n    lang: Lang;\r\n};\r\n\r\nexport type LangActionType = (\r\n    \"CHANGE_LANG\"\r\n);\r\n\r\nexport type LangReduxAction<AT extends LangActionType> = {\r\n    type: AT;\r\n    index: number;\r\n} & (\r\n    AT extends \"CHANGE_LANG\" ? {\r\n        index: 101;\r\n        lang: Lang;\r\n    } : {}\r\n);\r\n\r\nconst pageLang = navigator.language.slice(0, 2);\r\n\r\nconst initLang: Lang = pageLang === \"zh\" ? \"CH\" : pageLang === \"ja\" ? \"JP\" : \"EN\";\r\n\r\n$(\"html\").attr(\"lang\", pageLang);\r\n\r\nconst initData: LangReduxState = {\r\n    lang: initLang\r\n};\r\n\r\n\r\nexport const LangRedux = <AT extends LangActionType>(state: LangReduxState = initData, action: LangReduxAction<AT>) => {\r\n    switch (action.type) {\r\n        case \"CHANGE_LANG\":\r\n            const clAction = action as LangReduxAction<\"CHANGE_LANG\">;\r\n            if (clAction.lang !== state.lang) {\r\n                $(\"html\").attr(\"lang\", clAction.lang.toLocaleLowerCase());\r\n                return Object.assign({}, state, { lang: clAction.lang });\r\n            }\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n    \r\nexport const LangConfig = {\r\n\r\n    mapStateToProps: (state: { LangRedux: LangReduxState; }) => {\r\n        return Object.assign({}, {\r\n            lang: state.LangRedux.lang\r\n        });\r\n    },\r\n\r\n    mapDispatchToProps: (dispatch: (action: LangReduxAction<\"CHANGE_LANG\">) => any) => {\r\n        return {\r\n            setLang: (lang: Lang) => {\r\n                return dispatch({\r\n                    type: \"CHANGE_LANG\",\r\n                    index: 101,\r\n                    lang: lang\r\n                });\r\n            }\r\n        };\r\n    }\r\n    \r\n};\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-12-08 20:21:30 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-12-09 12:07:01\r\n */\r\n\r\nconst Design = {\r\n    black: \"rgb(24,31,40)\",\r\n    gold: \"rgb(249,225,161)\",\r\n    white: \"rgb(246,246,246)\"\r\n};\r\n\r\nexport const Fonts = {\r\n    CH: '\"Lucida Sans Unicode\", \"Microsoft YaHei\", \"微软雅黑\", PMingLiU, \"新细明体\", sans-serif',\r\n    EN: '\"Lucida Sans Unicode\", \"Trebuchet MS\", sans-serif',\r\n    JP: '\"Yu Mincho\", 游明朝, \"MS PGothic\", serif'\r\n};\r\n\r\n\r\nexport default Design;\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2021-01-16 16:29:51 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2021-01-16 18:08:31\r\n */\r\n\r\nexport type ColorScheme = \"light\" | \"dark\";\r\n\r\nconst modeD: MediaQueryList = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)');\r\nconst modeL: MediaQueryList = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)');\r\n\r\nexport interface SchemeReduxState {\r\n    value:  ColorScheme;\r\n};\r\n\r\nexport type SchemeActionType = (\r\n    \"CHANGE_SCHEME\"\r\n);\r\n\r\nexport type SchemeReduxAction<AT extends SchemeActionType> = {\r\n    type: AT;\r\n    index: number;\r\n} & (\r\n    AT extends \"CHANGE_SCHEME\" ? {\r\n        index: 101;\r\n        scheme: ColorScheme;\r\n    } : {}\r\n);\r\n\r\nconst initScheme: ColorScheme = window.matchMedia ? (\r\n    modeD.matches ? \"dark\" : modeL.matches ? \"light\" : \"light\"\r\n) : \"light\";\r\n\r\nconst initData: SchemeReduxState = {\r\n    value: initScheme\r\n};\r\n\r\n\r\nexport const SchemeRedux = <AT extends SchemeActionType>(state: SchemeReduxState = initData, action: SchemeReduxAction<AT>) => {\r\n    switch (action.type) {\r\n        case \"CHANGE_SCHEME\":\r\n            const clAction = action as SchemeReduxAction<\"CHANGE_SCHEME\">;\r\n            if (clAction.scheme !== state.value) {\r\n                return Object.assign({}, state, { value: clAction.scheme });\r\n            }\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n    \r\nexport const SchemeConfig = {\r\n\r\n    mapStateToProps: (state: { SchemeRedux: SchemeReduxState; }) => {\r\n        return Object.assign({}, {\r\n            scheme: state.SchemeRedux.value\r\n        });\r\n    },\r\n\r\n    mapDispatchToProps: (dispatch: (action: SchemeReduxAction<\"CHANGE_SCHEME\">) => any) => {\r\n        return {\r\n            setScheme: (scheme: ColorScheme) => {\r\n                return dispatch({\r\n                    type: \"CHANGE_SCHEME\",\r\n                    index: 101,\r\n                    scheme: scheme\r\n                });\r\n            }\r\n        };\r\n    }\r\n    \r\n};\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-12-06 15:17:27 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2021-01-16 20:22:21\r\n */\r\n\r\nimport React, { Component } from \"react\";\r\nimport { TextV3, Lang } from \"../TypesV3\";\r\nimport { connect } from \"react-redux\";\r\nimport { LangConfig } from \"../reducers/LangConfig\";\r\nimport Design from \"../design/design\";\r\nimport { createStyle } from \"reacss\";\r\nimport { SchemeConfig, ColorScheme } from \"../reducers/SchemeConfig\";\r\n\r\n\r\ninterface FfTextNodeV3Props {\r\n    text: TextV3;\r\n    lang: Lang;\r\n};\r\n\r\n// @ts-ignore\r\n@connect(LangConfig.mapStateToProps)\r\nclass FfTextNodeV3 extends Component<FfTextNodeV3Props> {\r\n\r\n    public render(): JSX.Element {\r\n        return (\r\n            <>{ this.props.text[this.props.lang] }</>\r\n        );\r\n    }\r\n\r\n};\r\n\r\nexport const TextNodeV3: React.FC<{ children: TextV3; }> = props => (\r\n    // @ts-ignore\r\n    <FfTextNodeV3 text={ props.children } />\r\n);\r\n\r\n// @ts-ignore\r\n@connect(LangConfig.mapStateToProps)\r\nexport class HTMLNodeV3 extends Component<{ children: TextV3; }> {\r\n\r\n    protected ref: React.RefObject<HTMLSpanElement>;\r\n\r\n    public constructor(props: { children: TextV3; }) {\r\n        super(props);\r\n\r\n        this.ref = React.createRef<HTMLSpanElement>();\r\n    }\r\n\r\n    public render(): JSX.Element {\r\n        return (\r\n            <span key={ new Date().getTime() } ref={ this.ref } />\r\n        );\r\n    }\r\n\r\n    public componentDidMount(): void {\r\n        if (this.ref.current) {\r\n            // @ts-ignore\r\n            this.ref.current.innerHTML = this.props.children[this.props.lang];\r\n        }\r\n    }\r\n\r\n    public componentDidUpdate(): void {\r\n        if (this.ref.current) {\r\n            // @ts-ignore\r\n            this.ref.current.innerHTML = this.props.children[this.props.lang];\r\n        }\r\n    }\r\n\r\n};\r\n\r\n\r\nexport interface CardProps {\r\n    style?: React.CSSProperties;\r\n};\r\n\r\nconst CardSchemeLight = createStyle({\r\n    \"div\": {\r\n        backgroundColor:    Design.white,\r\n        color:              Design.black,\r\n        boxShadow:          `6px 5px 0 1px ${ Design.black.replace(\"(\", \"a(\").replace(\")\", \",0.33)\") }`,\r\n        minWidth:           \"8vh\",\r\n        width:              \"80vw\",\r\n        maxWidth:           \"600px\",\r\n        fontSize:           \"95%\",\r\n        padding:            \"6vh 6vw\",\r\n        display:            \"inline-flex\",\r\n        flexDirection:      \"column\"\r\n    },\r\n    \"div header\": {\r\n        textAlign:      \"left\",\r\n        margin:         \"1.2em 0 2em\",\r\n        borderBottom:   \"1px solid black\",\r\n        fontSize:       \"130%\",\r\n        fontWeight:     \"bold\"\r\n    },\r\n    \"div p\": {\r\n        textAlign:      \"left\"\r\n    }\r\n});\r\n\r\nconst CardSchemeDark = createStyle({\r\n    \"div\": {\r\n        background:     \"rgba(36,24,40,0.4)\",\r\n        border:         \"1px solid rgb(128,82,119)\",\r\n        color:          Design.white,\r\n        minWidth:       \"8vh\",\r\n        width:          \"80vw\",\r\n        maxWidth:       \"600px\",\r\n        fontSize:       \"95%\",\r\n        padding:        \"6vh 6vw\",\r\n        display:        \"inline-flex\",\r\n        flexDirection:  \"column\"\r\n    },\r\n    \"div header\": {\r\n        textAlign:      \"left\",\r\n        margin:         \"1.2em 0 2em\",\r\n        borderBottom:   \"1px solid rgb(140,113,129)\",\r\n        fontSize:       \"130%\",\r\n        fontWeight:     \"bold\"\r\n    },\r\n    \"div p\": {\r\n        textAlign:      \"left\"\r\n    }\r\n});\r\n\r\nexport const Card: React.FC<CardProps> = props => {\r\n    return (\r\n        <CardFf>\r\n            { props.children }\r\n        </CardFf>\r\n    );\r\n};\r\n\r\n// @ts-ignore\r\n@connect(SchemeConfig.mapStateToProps)\r\nclass CardFf extends Component<CardProps> {\r\n    public render(): JSX.Element {\r\n        const scheme = (this.props as { scheme: ColorScheme }).scheme;\r\n        const style = scheme === \"dark\" ? CardSchemeDark : CardSchemeLight;\r\n        \r\n        return (\r\n            <div className={ style.id } style={{\r\n                ...this.props.style\r\n            }} >\r\n                { this.props.children }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-12-06 15:14:33 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-12-06 16:29:41\r\n */\r\n\r\n// V3 版本里用到的类型声明\r\n\r\nexport type Lang = \"CH\" | \"JP\" | \"EN\";\r\n\r\nexport class TextV3 {\r\n    public readonly CH: string;\r\n    public readonly JP: string;\r\n    public readonly EN: string;\r\n    public constructor(CH: string, JP?: string, EN?: string) {\r\n        this.CH = CH;\r\n        this.JP = JP ?? EN ?? CH;\r\n        this.EN = EN ?? CH;\r\n    }\r\n};\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-09-24 14:06:26 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2021-01-16 20:58:48\r\n */\r\n\r\nimport React, { Component } from \"react\";\r\nimport { SubscribeWheelEvent, IsWheelEventValid, UnsubscribeWheelEvent } from \"../tools/WheelEventManager\";\r\nimport { TextNodeV3 } from \"../cards/Card\";\r\nimport { TextV3 } from \"../TypesV3\";\r\nimport { Fonts } from \"../design/design\";\r\nimport { connect } from \"react-redux\";\r\nimport { LangConfig } from \"../reducers/LangConfig\";\r\nimport { createAnimation, createStyle, connectStyle } from \"reacss\";\r\n\r\n\r\nconst twinkle = createAnimation(\"twinkle\", {\r\n    '0%': {\r\n        opacity: 0.4\r\n    },\r\n    '100%': {\r\n        opacity: 1\r\n    }\r\n});\r\n\r\nconst upExit = createAnimation(\"up-exit\", {\r\n    '0%': {\r\n        opacity:    1\r\n    },\r\n    '100%': {\r\n        transform:  'translateY(-200px)',\r\n        opacity:    0.4\r\n    }\r\n});\r\nconst upEnter = createAnimation(\"up-enter\", {\r\n    '0%': {\r\n        transform:  'translateY(200px)',\r\n        opacity:    0.4\r\n    },\r\n    '100%': {\r\n        transform:  undefined,\r\n        opacity:    undefined\r\n    }\r\n});\r\nconst downExit = createAnimation(\"down-exit\", {\r\n    '0%': {\r\n        opacity:    1\r\n    },\r\n    '100%': {\r\n        transform:  'translateY(200px)',\r\n        opacity:    0.4\r\n    }\r\n});\r\nconst downEnter = createAnimation(\"down-enter\", {\r\n    '0%': {\r\n        transform:  'translateY(-200px)',\r\n        opacity:    0.4\r\n    },\r\n    '100%': {\r\n        transform:  undefined,\r\n        opacity:    undefined\r\n    }\r\n});\r\n\r\nconst PageFlowStyle = createStyle({\r\n    \"div\": {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\"\r\n    },\r\n    \"div > div:first-child\": {\r\n        flex:           1,\r\n        display:        \"flex\",\r\n        flexDirection:  \"column\",\r\n        alignItems:     \"center\",\r\n        justifyContent: \"center\",\r\n        overflow:       \"hidden\",\r\n        margin:         0\r\n    },\r\n    \"div > div:first-child > .up-exit\": {\r\n        animation:      upExit({ duration: '160ms', timingFunction: 'ease-in' })\r\n    },\r\n    \"div > div:first-child > .up-enter\": {\r\n        animation:      upEnter({ duration: '160ms', timingFunction: 'ease-out' })\r\n    },\r\n    \"div > div:first-child > .down-exit\": {\r\n        animation:      downExit({ duration: '160ms', timingFunction: 'ease-in' })\r\n    },\r\n    \"div > div:first-child > .down-enter\": {\r\n        animation:      downEnter({ duration: '160ms', timingFunction: 'ease-out' })\r\n    },\r\n    \"div > div.navi\": {\r\n        width:          \"20px\",\r\n        height:         \"40%\",\r\n        display:        \"flex\",\r\n        flexDirection:  \"column\",\r\n        alignItems:     \"center\",\r\n        justifyContent: \"center\",\r\n        margin:         \"0 calc(0.6vw + 6px) 0 calc(-0.6vw - 26px)\",\r\n        pointerEvents:  \"none\"\r\n    },\r\n    \"div > div.navi > div\": {\r\n        display:        \"block\",\r\n        width:          \"6px\",\r\n        height:         \"6px\",\r\n        margin:         \"6px 4px\",\r\n        border:         \"1px solid rgb(255,255,255)\",\r\n        borderRadius:   \"3px\",\r\n        pointerEvents:  \"all\",\r\n        cursor:         \"pointer\"\r\n    },\r\n    \"* .tip\": {\r\n        padding:        '0 0.25em',\r\n        pointerEvents:  'none',\r\n        border:         '1px solid rgb(204,179,143)',\r\n        background:     'white',\r\n        color:          'rgb(255,127,127)',\r\n        fontWeight:     600,\r\n        fontSize:       '120%',\r\n        borderRadius:   '0.4em',\r\n        \r\n        animation: twinkle({\r\n            duration:       '1.6s',\r\n            iterationCount: 'infinite',\r\n            direction:      'alternate'\r\n        }),\r\n\r\n        position:   \"relative\",\r\n        width:      \"1em\",\r\n        display:    \"flex\",\r\n        alignItems: \"center\",\r\n        marginLeft: \"calc(-1.5em - 2px)\",\r\n        right:      \"48px\",\r\n        writingMode:\"vertical-lr\",\r\n    }\r\n})\r\n\r\nexport interface PageFlowProps {\r\n    height: string | number;\r\n    children?: Array<JSX.Element>;\r\n    style?: React.CSSProperties;\r\n    showTip?: boolean;\r\n};\r\n\r\nexport interface PageFlowState {\r\n    idx: number;\r\n};\r\n\r\n// @ts-ignore\r\n@connect(LangConfig.mapStateToProps)\r\nexport class PageFlow extends Component<PageFlowProps, PageFlowState> {\r\n\r\n    protected wheelEvent: (this: HTMLElement, ev: WheelEvent) => any;\r\n    protected keyDownEvent: (this: HTMLElement, ev: KeyboardEvent) => any;\r\n\r\n    protected container: React.RefObject<HTMLDivElement>;\r\n\r\n    protected cdHolder: boolean;\r\n    protected aniDirection: \"up\" | \"down\";\r\n    protected timers: Array<NodeJS.Timeout>;\r\n\r\n    protected touched: boolean;\r\n    protected originY: number;\r\n\r\n    protected showTip: boolean;\r\n\r\n    public constructor(props: PageFlowProps) {\r\n        super(props);\r\n        this.state = {\r\n            idx: 0\r\n        };\r\n\r\n        this.wheelEvent = (e: WheelEvent) => {\r\n            if (this.container.current) {\r\n                if (!this.container.current.firstElementChild!.firstElementChild) {\r\n                    return;\r\n                }\r\n\r\n                if (this.cdHolder) {\r\n                    e.preventDefault();\r\n                    SubscribeWheelEvent(e);\r\n                    return;\r\n                }\r\n\r\n                if (navigator.userAgent.toLocaleLowerCase().includes(\"firefox\")) {\r\n                    // 火狐浏览器\r\n                    if (this.props.children?.length === 1) {\r\n                        // 跳过\r\n                    } else if (this.state.idx === 0 && e.deltaY < 0) {\r\n                        // 第一个，向上\r\n                    } else if (this.state.idx + 1 === this.props.children?.length && e.deltaY > 0) {\r\n                        // 最后一个，向下\r\n                    } else if (e.deltaY < 0) {\r\n                        // 上一页\r\n                        e.preventDefault();\r\n                        this.prevPage();\r\n                    } else if (e.deltaY > 0) {\r\n                        // 下一页\r\n                        e.preventDefault();\r\n                        this.nextPage();\r\n                    }\r\n                    return;\r\n                }\r\n\r\n                if (!IsWheelEventValid(e)) {\r\n                    // 登录 wheel 事件，排除其中连续触发的部分\r\n                    return;\r\n                }\r\n                \r\n                if (this.props.children?.length === 1) {\r\n                    // 跳过\r\n                    return;\r\n                } else if (this.state.idx === 0 && e.deltaY < 0) {\r\n                    // 第一个，向上\r\n                    return;\r\n                } else if (this.state.idx + 1 === this.props.children?.length && e.deltaY > 0) {\r\n                    // 最后一个，向下\r\n                    return;\r\n                } else if (e.deltaY < 0) {\r\n                    // 上一页\r\n                    e.preventDefault();\r\n                    this.prevPage();\r\n                    return;\r\n                } else if (e.deltaY > 0) {\r\n                    // 下一页\r\n                    e.preventDefault();\r\n                    this.nextPage();\r\n                    return;\r\n                }\r\n            }\r\n        };\r\n        \r\n        this.keyDownEvent = ev => {\r\n            if (!this.cdHolder && props.children && props.children.length > 1) {\r\n                if (ev.key === \"ArrowDown\" && this.state.idx < props.children.length - 1) {\r\n                    this.nextPage();\r\n                    ev.stopPropagation();\r\n                } else if (ev.key === \"ArrowUp\" && this.state.idx > 0) {\r\n                    this.prevPage();\r\n                    ev.stopPropagation();\r\n                }\r\n            }\r\n        };\r\n\r\n        this.container = React.createRef<HTMLDivElement>();\r\n\r\n        this.cdHolder = false;\r\n        this.aniDirection = \"down\";\r\n        this.timers = [];\r\n\r\n        this.touched = false;\r\n        this.originY = 0;\r\n\r\n        this.showTip = this.props.showTip ?? false;\r\n    }\r\n\r\n    @connectStyle(PageFlowStyle)\r\n    public render(): JSX.Element {\r\n        return (\r\n            <div ref={ this.container }\r\n            style={{\r\n                padding: this.props.style?.margin\r\n            }}\r\n            onTouchStart={\r\n                e => {\r\n                    if (e.touches.length === 1) {\r\n                        this.touched = true;\r\n                        this.originY = e.touches[0].screenY;\r\n                    }\r\n                }\r\n            }\r\n            onTouchMove={\r\n                e => {\r\n                    if (this.props.children && this.touched && e.touches.length === 1) {\r\n                        const y = e.touches[0].screenY - this.originY;\r\n                        if (Math.abs(y) >= window.innerHeight / 10) {\r\n                            if (y > 0) {\r\n                                if (this.state.idx) {\r\n                                    this.prevPage();\r\n                                    this.originY = e.touches[0].screenY;\r\n                                }\r\n                            } else {\r\n                                if (this.state.idx + 1 < this.props.children.length) {\r\n                                    this.nextPage();\r\n                                    this.originY = e.touches[0].screenY;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            onTouchEnd={\r\n                () => {\r\n                    this.touched = false;\r\n                }\r\n            } >\r\n                <div key=\"box\"\r\n                style={{\r\n                    height: this.props.height,\r\n                    ...this.props.style\r\n                }} >\r\n                {\r\n                    this.props.children?.length ? this.props.children[this.state.idx] : null\r\n                }\r\n                </div>\r\n                {\r\n                    this.props.children?.length || 0 > 1 ? (\r\n                        <div key=\"navi\" className=\"navi\" >\r\n                        {\r\n                            this.props.children!.map((_, i) => {\r\n                                return (\r\n                                    <div key={ i } tabIndex={ 1 }\r\n                                    style={{\r\n                                        background: `rgba(255,255,255,${\r\n                                            i === this.state.idx ? 1 : 0.2\r\n                                        })`\r\n                                    }}\r\n                                    onClick={\r\n                                        () => {\r\n                                            if (i !== this.state.idx) {\r\n                                                this.aniDirection = (\r\n                                                    i < this.state.idx\r\n                                                ) ? \"down\" : \"up\";\r\n                                                return this.shiftTo(i);\r\n                                            }\r\n                                        }\r\n                                    } />\r\n                                );\r\n                            })\r\n                        }\r\n                        </div>\r\n                    ) : null\r\n                }\r\n                {\r\n                    this.showTip ? (\r\n                        <div key=\"tip\" className=\"tip\"\r\n                        style={{\r\n                            // @ts-ignore\r\n                            fontFamily: Fonts[this.props.lang] || \"inherit\"\r\n                        }} >\r\n                            <label>\r\n                                <pre>\r\n                                    <TextNodeV3>\r\n                                        {\r\n                                            new TextV3(\r\n                                                \" 向下滑动屏幕查看更多 → \",\r\n                                                \"下へスクロールすると次の内容が表示する  →\",\r\n                                                \"scroll down to view more  →\"\r\n                                            )\r\n                                        }\r\n                                    </TextNodeV3>\r\n                                </pre>\r\n                            </label>\r\n                        </div>\r\n                    ) : false\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n    protected clearTimers(): void {\r\n        this.timers.forEach(timer => {\r\n            clearTimeout(timer);\r\n        });\r\n\r\n        this.timers = [];\r\n    }\r\n\r\n    protected resetListener(): void {\r\n        document.body.removeEventListener(\r\n            \"wheel\",\r\n            this.wheelEvent\r\n        );\r\n        \r\n        document.body.addEventListener(\r\n            \"wheel\",\r\n            this.wheelEvent, {\r\n                passive: false\r\n            }\r\n        );\r\n    }\r\n\r\n    public componentDidMount(): void {\r\n        document.body.addEventListener(\r\n            \"wheel\",\r\n            this.wheelEvent, {\r\n                passive: false\r\n            }\r\n        );\r\n        document.body.addEventListener(\r\n            \"keydown\",\r\n            this.keyDownEvent\r\n        );\r\n        \r\n        this.resetListener();\r\n    }\r\n\r\n    public componentDidUpdate(): void {\r\n        this.resetListener();\r\n\r\n        if (this.container.current) {\r\n            const content = this.container.current.firstElementChild!.firstElementChild! as HTMLElement;\r\n            content.classList.add(\r\n                this.aniDirection === \"down\" ? \"down-enter\" : \"up-enter\"\r\n            );\r\n        }\r\n    }\r\n\r\n    public componentWillUnmount(): void {\r\n        this.clearTimers();\r\n        document.body.removeEventListener(\"wheel\", this.wheelEvent);\r\n        document.body.removeEventListener(\"keydown\", this.keyDownEvent);\r\n    }\r\n\r\n    public shiftTo(idx: number): number {\r\n        if (!this.props.children || this.cdHolder) {\r\n            return -1;\r\n        }\r\n\r\n        this.showTip = false;\r\n\r\n        const to: number = Math.min(\r\n            this.props.children?.length - 1,\r\n            Math.max(\r\n                0, idx\r\n            )\r\n        );\r\n\r\n        this.cdHolder = true;\r\n        this.timers.push(\r\n            setTimeout(() => {\r\n                this.cdHolder = false;\r\n                this.clearTimers();\r\n                UnsubscribeWheelEvent();\r\n            }, 360)\r\n        );\r\n\r\n        if (this.container.current) {\r\n            const content = this.container.current.firstElementChild!.firstElementChild! as HTMLElement;\r\n            content.classList.add(\r\n                this.aniDirection === \"down\" ? \"down-exit\" : \"up-exit\"\r\n            );\r\n        }\r\n\r\n        this.timers.push(\r\n            setTimeout(() => {\r\n                this.setState({\r\n                    idx: to\r\n                });\r\n            }, 160)\r\n        );\r\n\r\n        return to;\r\n    }\r\n\r\n    public nextPage(): number {\r\n        this.aniDirection = \"up\";\r\n        const to: number = this.state.idx + 1;\r\n        return this.shiftTo(to);\r\n    }\r\n\r\n    public prevPage(): number {\r\n        this.aniDirection = \"down\";\r\n        const to: number = this.state.idx - 1;\r\n        return this.shiftTo(to);\r\n    }\r\n\r\n};\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-12-06 15:10:22 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2021-01-16 20:13:28\r\n */\r\n\r\nimport React from \"react\";\r\nimport { Card, TextNodeV3 } from \"./Card\";\r\nimport { TextV3 } from \"../TypesV3\";\r\nimport { createStyle, useStyleWrapper } from \"reacss\";\r\n\r\n\r\nconst WelcomeCardStyle = createStyle({\r\n    \"div:first-child\": {\r\n        marginTop: \"-10px\"\r\n    },\r\n    \"div:first-child > img\": {\r\n        width: \"140px\",\r\n        height: \"140px\",\r\n        borderRadius: \"70px\"\r\n    },\r\n    \"label:nth-child(2)\": {\r\n        display: \"block\",\r\n        margin: \"0.5em auto\",\r\n        fontSize: \"130%\"\r\n    },\r\n    \"label:nth-child(3)\": {\r\n        display: \"block\",\r\n        margin: \"0 auto\",\r\n        color: \"rgba(114,123,132,0.8)\"\r\n    },\r\n    \"label:nth-child(5)\": {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        minHeight: \"3em\",\r\n        fontSize: \"90%\",\r\n        padding: \"0.3em -4vw\",\r\n        color: \"rgba(114,123,132,0.8)\"\r\n    },\r\n    \"label:nth-child(7)\": {\r\n        display: \"block\",\r\n        padding: \"1.2em 0.6em 0.2em\",\r\n        margin: \"0.2em auto 0\",\r\n        fontSize: \"calc(12px + 0.4vmax)\"\r\n    },\r\n    \"div:nth-child(8)\": {\r\n        margin: \"2vh auto\",\r\n        width: \"70%\",\r\n        minWidth: \"250px\",\r\n        padding: \"0.6vh 0\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"space-around\"\r\n    },\r\n    \"div:nth-child(8) > div\": {\r\n        margin: \"0 calc(1vw - 4px)\",\r\n        padding: \"0 2px\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"space-between\",\r\n        flex: 1\r\n    },\r\n    \"label:nth-child(9)\": {\r\n        display: \"block\",\r\n        padding: \"0.2em 0.6em\",\r\n        margin: \"0.2em auto 0\",\r\n        fontSize: \"calc(12px + 0.4vmax)\"\r\n    },\r\n    \"div:nth-child(10)\": {\r\n        margin: \"1vh auto\",\r\n        width: \"70%\",\r\n        minWidth: \"250px\",\r\n        padding: \"0.6vh 0\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"space-around\"\r\n    },\r\n    \"div:nth-child(10) > div\": {\r\n        margin: \"0 calc(1vw - 4px)\",\r\n        padding: \"0 2px\",\r\n        display: \"flex\",\r\n        flex: 1,\r\n        alignItems: \"center\",\r\n        justifyContent: \"space-between\"\r\n    },\r\n    \"div:nth-child(10) > div > svg\": {\r\n        transform: \"translateY(1.2px)\",\r\n        marginRight: \"8px\"\r\n    },\r\n    \"div:nth-child(10) > div > svg > line\": {\r\n        stroke: \"rgb(255,127,127)\",\r\n        strokeWidth: 6,\r\n        pointerEvents: \"none\"\r\n    },\r\n    \"div:nth-child(10) > div > svg > path\": {\r\n        fill: \"none\",\r\n        stroke: \"rgb(233,60,46)\",\r\n        strokeWidth: 6,\r\n        pointerEvents: \"none\"\r\n    },\r\n    \"div:nth-child(10) > div > code\": {\r\n        fontSize: \"80%\",\r\n        borderBottom: \"1px solid #8888\",\r\n        padding: \"3px 8px\",\r\n        flex: 1,\r\n        textAlign: \"left\",\r\n        letterSpacing: \"0.2px\"\r\n    }\r\n});\r\n\r\nexport const WelcomeCard: React.FC<{}> = _props => {\r\n    const StyleWrapper = useStyleWrapper(WelcomeCardStyle);\r\n\r\n    return (\r\n        <Card key=\"content\" style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"space-between\",\r\n            paddingTop: \"6vh\",\r\n            paddingBottom: \"8vh\"\r\n        }} >\r\n            <StyleWrapper>\r\n                <div>\r\n                    <img src=\"/images/avatar.png\" alt=\"avatar\" />\r\n                </div>\r\n                <label key=\"1\" >\r\n                    <TextNodeV3>\r\n                        {\r\n                            new TextV3(\r\n                                \"杨振东\",\r\n                                \"楊かなた\",\r\n                                \"Antoine Yang\"\r\n                            )\r\n                        }\r\n                    </TextNodeV3>\r\n                </label>\r\n                <label key=\"prof\" >\r\n                    <TextNodeV3>\r\n                        {\r\n                            new TextV3(\r\n                                \"学生，中国\",\r\n                                \"大学生　中国\",\r\n                                \"Student, China\"\r\n                            )\r\n                        }\r\n                    </TextNodeV3>\r\n                </label>\r\n                <br />\r\n                <label key=\"belong\" >\r\n                    <TextNodeV3>\r\n                        {\r\n                            new TextV3(\r\n                                \"浙江财经大学-信息管理与人工智能学院\",\r\n                                \"浙江財政経済大学　情報科学学部\",\r\n                                \"School of Information Management and Artifitial Intelligence, \\n\"\r\n                                    + \"Zhejiang University of Finance and Economics\"\r\n                            )\r\n                        }\r\n                    </TextNodeV3>\r\n                </label>\r\n                <br />\r\n                <label key=\"communities\" >\r\n                    <TextNodeV3>\r\n                        {\r\n                            new TextV3(\r\n                                \"我的社区\",\r\n                                \"プラットフォーム\",\r\n                                \"COMMUNITIES\"\r\n                            )\r\n                        }\r\n                    </TextNodeV3>\r\n                </label>\r\n                <div key=\"links\" >\r\n                    <div key=\"github\" title=\"GitHub: @Kanata You\" >\r\n                        <a href=\"https://github.com/AntoineYANG\" target=\"new\" >\r\n                            <svg height=\"32\" width=\"32\" viewBox=\"0 0 16 16\" version=\"1.1\"\r\n                            aria-hidden=\"true\"\r\n                            style={{\r\n                                transform: \"translateY(1.2px)\",\r\n                                background: \"white\"\r\n                            }} >\r\n                                <path fillRule=\"evenodd\"\r\n                                d={\r\n                                    \"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-\"\r\n                                    + \".17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-\"\r\n                                    + \".94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-\"\r\n                                    + \".01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.8\"\r\n                                    + \"7.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.\"\r\n                                    + \"15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.3\"\r\n                                    + \"2-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82\"\r\n                                    + \".44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.8\"\r\n                                    + \"7 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01\"\r\n                                    + \" 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"\r\n                                }\r\n                                style={{\r\n                                    fill: \"rgb(36,41,46)\",\r\n                                    pointerEvents: \"none\"\r\n                                }} />\r\n                            </svg>\r\n                        </a>\r\n                    </div>\r\n                    <div key=\"npm\" title=\"npm: @kanatayou\" >\r\n                        <a href=\"https://www.npmjs.com/~kanatayou\" target=\"new\" >\r\n                            <svg height=\"32\" width=\"32\" viewBox=\"0 0 780 250\">\r\n                                <path d={\r\n                                    \"M240,250h100v-50h100V0H240V250z M340,50h50v100h-50V50z \"\r\n                                    + \"M480,0v200h100V50h50v150h50V50h50v150h50V0H480z \"\r\n                                    + \"M0,200h100V50h50v150h50V0H0V200z\"\r\n                                }\r\n                                style={{\r\n                                    fill: \"rgb(202,0,0)\"\r\n                                }} />\r\n                            </svg>\r\n                        </a>\r\n                    </div>\r\n                    <div key=\"zhihu\" title=\"知乎: @不愿\" >\r\n                        <a href=\"https://www.zhihu.com/people/bu-yuan-86-22\" target=\"new\" >\r\n                            <img src=\"./images/zhihu.jpeg\" alt=\"知乎\" width=\"32\" height=\"32\"\r\n                            onDragStart={ e => e.preventDefault() }\r\n                            style={{\r\n                                transform: \"translateY(1.6px)\"\r\n                            }} />\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n                <label key=\"contact\" >\r\n                    <TextNodeV3>\r\n                        {\r\n                            new TextV3(\r\n                                \"联系我\",\r\n                                \"MAIL\",\r\n                                \"CONCACT\"\r\n                            )\r\n                        }\r\n                    </TextNodeV3>\r\n                </label>\r\n                <div key=\"mail\" >\r\n                    <div key=\"mail\" >\r\n                        <svg height=\"20\" width=\"20\" version=\"1.1\"\r\n                        aria-hidden=\"true\" viewBox=\"0 0 28 28\" >\r\n                            <line key=\"left\" x1=\"3\" x2=\"3\" y1=\"23\" y2=\"8.5\" />\r\n                            <line key=\"right\" x1=\"25\" x2=\"25\" y1=\"23\" y2=\"8.5\" />\r\n                            <path key=\"center\" d=\"M2,6 L14,14 L26,6\" />\r\n                        </svg>\r\n                        <code>\r\n                            antoineyang99@gmail.com\r\n                        </code>\r\n                    </div>\r\n                </div>\r\n            </StyleWrapper>\r\n        </Card>\r\n    );\r\n};\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-12-06 16:48:21 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2021-01-16 21:16:34\r\n */\r\n\r\nimport React, { useRef, useLayoutEffect, Component } from \"react\";\r\nimport { TextV3 } from \"../TypesV3\";\r\nimport { TextNodeV3 } from \"../cards/Card\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { createStyle } from \"reacss\";\r\nimport { SchemeConfig, ColorScheme } from \"../reducers/SchemeConfig\";\r\nimport { connect } from \"react-redux\";\r\n\r\n\r\nexport interface LinkButtonProps {\r\n    children: TextV3;\r\n    to: string;\r\n    style?: React.CSSProperties;\r\n    type?: \"normal\" | \"danger\";\r\n    handle?: {\r\n        ref?: HTMLAnchorElement | null;\r\n        trigger?: () => void;\r\n    };\r\n};\r\n\r\nconst LinkButtonStyleLight = createStyle({\r\n    \"div\": {\r\n        display:        \"inline-block\",\r\n        fontSize:       \"120%\",\r\n        textAlign:      \"center\",\r\n        cursor:         \"pointer\",\r\n        minWidth:       \"2.8em\",\r\n        padding:        \"0.2em 0.8em\",\r\n        background:     \"rgb(251,250,238)\",\r\n        color:          \"rgb(82,223,129)\",\r\n        border:         \"1px solid rgb(82,223,129)\",\r\n        transition:     \"color 0.6s, background 0.6s\"\r\n    },\r\n    \"div:hover\": {\r\n        background: 'rgb(82,223,129)',\r\n        color:      'rgb(60,83,80)'\r\n    },\r\n    \"div.danger\": {\r\n        cursor:     \"not-allowed\",\r\n        background: \"rgb(92,38,46)\",\r\n        color:      \"rgb(244,71,71)\",\r\n        border:     \"1px solid rgb(244,71,71)\"\r\n    },\r\n    \"div.danger:hover\": {\r\n        background: 'rgb(244,71,71)',\r\n        color:      'rgb(238,238,238)'\r\n    }\r\n});\r\n\r\nconst LinkButtonStyleDark = createStyle({\r\n    \"div\": {\r\n        display:        \"inline-block\",\r\n        fontSize:       \"120%\",\r\n        textAlign:      \"center\",\r\n        cursor:         \"pointer\",\r\n        minWidth:       \"2.8em\",\r\n        padding:        \"0.2em 0.8em\",\r\n        background:     \"rgb(31,22,38)\",\r\n        color:          \"rgb(167,89,156)\",\r\n        border:         \"1px solid rgb(167,89,156)\",\r\n        transition:     \"color 0.6s, background 0.6s\"\r\n    },\r\n    \"div:hover\": {\r\n        background: 'rgb(167,89,156)',\r\n        color:      'rgb(15,18,44)'\r\n    },\r\n    \"div.danger\": {\r\n        cursor:     \"not-allowed\",\r\n        background: \"rgb(92,38,46)\",\r\n        color:      \"rgb(244,71,71)\",\r\n        border:     \"1px solid rgb(244,71,71)\"\r\n    },\r\n    \"div.danger:hover\": {\r\n        background: 'rgb(244,71,71)',\r\n        color:      'rgb(238,238,238)'\r\n    }\r\n});\r\n\r\n// @ts-ignore\r\n@connect(SchemeConfig.mapStateToProps)\r\nclass LinkButtonFf extends Component<LinkButtonProps> {\r\n    public render(): JSX.Element {\r\n        const scheme = (this.props as any as { scheme: ColorScheme }).scheme;\r\n        const style = scheme === \"dark\" ? LinkButtonStyleDark : LinkButtonStyleLight;\r\n\r\n        return (\r\n            <div className={ style.id + (this.props.type === \"danger\" ? \" danger\" : \"\") }\r\n            style={{ ...this.props.style }} >\r\n                <TextNodeV3>{ this.props.children }</TextNodeV3>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport const LinkButton: React.FC<LinkButtonProps> = props => {\r\n    const ref = useRef() as React.RefObject<HTMLAnchorElement>;\r\n\r\n    useLayoutEffect(() => {\r\n        if (props.handle) {\r\n            props.handle.trigger = () => {\r\n                ref.current?.click();\r\n            };\r\n            props.handle.ref = ref.current;\r\n        }\r\n    }, [props, ref]);\r\n\r\n    return (\r\n        <Link to={ props.to } ref={ ref } >\r\n            <LinkButtonFf { ...props } >\r\n                { props.children }\r\n            </LinkButtonFf>\r\n        </Link>\r\n    );\r\n};\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-12-02 20:44:30 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2021-01-16 21:01:16\r\n */\r\n\r\nimport React, { Component } from \"react\";\r\nimport { PageFlow } from \"../containers/PageFlow\";\r\nimport { WelcomeCard } from \"../cards/WelcomeCard\";\r\nimport { Card, TextNodeV3 } from \"../cards/Card\";\r\nimport { TextV3 } from \"../TypesV3\";\r\nimport { LinkButton } from \"../interactive/LinkButton\";\r\n\r\n\r\n/**\r\n * 这个页面级组件渲染对应地址 / .\r\n * \r\n * @export\r\n * @class Home\r\n * @extends {Component<{}, {}>}\r\n */\r\nexport class Home extends Component {\r\n\r\n    public constructor(props: {}) {\r\n        super(props);\r\n        this.state = {};\r\n    }\r\n    \r\n    public render(): JSX.Element {\r\n        return (\r\n            <div>\r\n                <PageFlow height=\"92vh\" showTip={ true } >\r\n                    <WelcomeCard />\r\n                    <Card key=\"menu\" >\r\n                        <header>\r\n                            <TextNodeV3>\r\n                                {\r\n                                    new TextV3(\r\n                                        \"探索\",\r\n                                        \"メニュー\",\r\n                                        \"EXPLORE\"\r\n                                    )\r\n                                }\r\n                            </TextNodeV3>\r\n                        </header>\r\n                        <div key=\"bg0\"\r\n                        style={{\r\n                            display: \"flex\",\r\n                            flexDirection: \"column\",\r\n                            alignItems: \"stretch\",\r\n                            justifyContent: \"space-between\"\r\n                        }} >\r\n                            <LinkButton key=\"paper\" to=\"/paper\"\r\n                            style={{\r\n                                width: \"60%\",\r\n                                margin: \"1em 0\"\r\n                            }} >\r\n                                {\r\n                                    new TextV3(\r\n                                        \"论文成果\",\r\n                                        \"論文発表\",\r\n                                        \"Papers\"\r\n                                    )\r\n                                }\r\n                            </LinkButton>\r\n                            <LinkButton key=\"project\" to=\"/project\"\r\n                            style={{\r\n                                width: \"60%\",\r\n                                margin: \"1em 0\"\r\n                            }} >\r\n                                {\r\n                                    new TextV3(\r\n                                        \"近期作品\",\r\n                                        \"プロジェクト\",\r\n                                        \"Recent Work\"\r\n                                    )\r\n                                }\r\n                            </LinkButton>\r\n                            <LinkButton key=\"article\" to=\"/article\"\r\n                            style={{\r\n                                width: \"60%\",\r\n                                margin: \"1em 0\"\r\n                            }} >\r\n                                {\r\n                                    new TextV3(\r\n                                        \"我的文章\",\r\n                                        \"文章\",\r\n                                        \"Articles\"\r\n                                    )\r\n                                }\r\n                            </LinkButton>\r\n                            <LinkButton key=\"idea\" to=\"/idea\"\r\n                            style={{\r\n                                width: \"60%\",\r\n                                margin: \"1em 0\"\r\n                            }} >\r\n                                {\r\n                                    new TextV3(\r\n                                        \"创造\",\r\n                                        \"アイディア\",\r\n                                        \"Idea\"\r\n                                    )\r\n                                }\r\n                            </LinkButton>\r\n                            <LinkButton key=\"storage\" to=\"/storage\" type=\"danger\"\r\n                            style={{\r\n                                width: \"60%\",\r\n                                margin: \"1em 0\"\r\n                            }} >\r\n                                {\r\n                                    new TextV3(\r\n                                        \"文件仓库\",\r\n                                        \"ストレージ\",\r\n                                        \"Storage\"\r\n                                    )\r\n                                }\r\n                            </LinkButton>\r\n                        </div>\r\n                        <p style={{\r\n                            marginTop: \"100px\"\r\n                        }} >\r\n                            <a href=\"/v2\" style={{\r\n                                color: \"rgb(206,186,133)\"\r\n                            }} >\r\n                                <TextNodeV3>\r\n                                    {\r\n                                        new TextV3(\r\n                                            \"点击此处返回 2.x 版本\",\r\n                                            \"v2.x へジャンプ\",\r\n                                            \"Click here to move back to v2.x\"\r\n                                        )\r\n                                    }\r\n                                </TextNodeV3>\r\n                            </a>\r\n                        </p>\r\n                    </Card>\r\n                </PageFlow>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    public componentDidMount(): void {}\r\n\r\n};\r\n\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-12-06 16:57:58 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2021-01-16 20:20:51\r\n */\r\n\r\nimport React from \"react\";\r\nimport { createStyle, useStyleWrapper } from \"reacss\";\r\n\r\n\r\nconst ButtonGroupStyle = createStyle({\r\n    \"div\": {\r\n        display:        \"flex\",\r\n        alignItems:     \"center\",\r\n        justifyContent: \"space-around\",\r\n        flexWrap:       \"wrap\"\r\n    }\r\n})\r\n\r\nexport const ButtonGroup: React.FC<{ style?: React.CSSProperties; }> = props => {\r\n    const StyleWrapper = useStyleWrapper(ButtonGroupStyle);\r\n    \r\n    return (\r\n        <StyleWrapper>\r\n            <div style={{ ...props.style }} >\r\n                { props.children }\r\n            </div>\r\n        </StyleWrapper>\r\n    );\r\n};\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-12-02 20:47:07 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-12-11 21:34:17\r\n */\r\n\r\nimport React from \"react\";\r\nimport { Card, TextNodeV3, HTMLNodeV3 } from \"../cards/Card\";\r\nimport { TextV3 } from \"../TypesV3\";\r\nimport { LinkButton } from \"../interactive/LinkButton\";\r\nimport { ButtonGroup } from \"../interactive/ButtonGroup\";\r\n\r\n\r\n/**\r\n * 这个页面级组件在无法访问对应网址时渲染.\r\n */\r\nexport const BadUrl: React.FC = _props => (\r\n    <div style={{\r\n        height: \"88vh\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\"\r\n    }} >\r\n        <Card>\r\n            <header>\r\n                <TextNodeV3>\r\n                    {\r\n                        new TextV3(\r\n                            \"404 - 找不到页面\",\r\n                            undefined,\r\n                            \"404 - Bad GateWay\"\r\n                        )\r\n                    }\r\n                </TextNodeV3>\r\n            </header>\r\n            <p>\r\n                <HTMLNodeV3>\r\n                    {\r\n                        new TextV3(\r\n                            `<u>${ window.location.href }</u> 指向了一个不存在的资源。`,\r\n                            undefined,\r\n                            `Could not get <u>${ window.location.href }</u>. `\r\n                        )\r\n                    }\r\n                </HTMLNodeV3>\r\n            </p>\r\n            <ButtonGroup style={{\r\n                padding: \"20px\"\r\n            }} >\r\n                <LinkButton to=\"/\" >\r\n                    {\r\n                        new TextV3(\r\n                            `主页`,\r\n                            \"戻る\",\r\n                            `Home`\r\n                        )\r\n                    }\r\n                </LinkButton>\r\n            </ButtonGroup>\r\n        </Card>\r\n    </div>\r\n);\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-12-11 21:06:02 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2021-01-16 16:55:22\r\n */\r\n\r\nimport React, { Component } from \"react\";\r\nimport { Card, TextNodeV3 } from \"../cards/Card\";\r\nimport { TextV3 } from \"../TypesV3\";\r\nimport { ButtonGroup } from \"../interactive/ButtonGroup\";\r\nimport { LinkButton } from \"../interactive/LinkButton\";\r\n\r\n\r\n/**\r\n * 这个页面级组件渲染对应地址 /paper .\r\n * \r\n * @export\r\n * @class Papers\r\n * @extends {Component<{}, {}>}\r\n */\r\nexport class Papers extends Component {\r\n\r\n    public constructor(props: {}) {\r\n        super(props);\r\n        this.state = {};\r\n    }\r\n    \r\n    public render(): JSX.Element {\r\n        return (\r\n            <div style={{\r\n                height: \"90vh\",\r\n                display: \"flex\",\r\n                flexDirection: \"column\",\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\"\r\n            }} >\r\n                <Card key=\"main\" >\r\n                    <header>\r\n                        <TextNodeV3>\r\n                            {\r\n                                new TextV3(\r\n                                    \"论文成果\",\r\n                                    \"論文発表\",\r\n                                    \"Papers\"\r\n                                )\r\n                            }\r\n                        </TextNodeV3>\r\n                    </header>\r\n                    <div key=\"bg0\"\r\n                    style={{\r\n                        display: \"flex\",\r\n                        flexDirection: \"column\",\r\n                        alignItems: \"stretch\",\r\n                        justifyContent: \"space-between\"\r\n                    }} >\r\n                        <p>\r\n                            {\r\n                                `Visual Abstraction of Geographical Point Data with Spatial`\r\n                                + ` Autocorrelations. Zhiguang Zhou, Xinlong Zhang, `\r\n                            }\r\n                            <b>{ \"Zhendong Yang\" }</b>\r\n                            {\r\n                                `, Yuhua Liu, Yuanyuan Chen, Ying Zhao, Wei Chen. IEEE VIS 2020.`\r\n                            }\r\n                        </p>\r\n                        <p>\r\n                            <a target=\"new\"\r\n                            href=\"https://virtual.ieeevis.org/paper_f-vast-1200.html\" >\r\n                                <TextNodeV3>\r\n                                    {\r\n                                        new TextV3(\r\n                                            \"在 VIS 2020 查看论文\",\r\n                                            \"VIS 2020 で見る\",\r\n                                            \"Watch on VIS 2020\"\r\n                                        )\r\n                                    }\r\n                                </TextNodeV3>\r\n                            </a>\r\n                        </p>\r\n                    </div>\r\n                </Card>\r\n                <Card key=\"btn\">\r\n                    <ButtonGroup>\r\n                        <LinkButton to=\"/\" >\r\n                            {\r\n                                new TextV3(\r\n                                    \"回到主页\",\r\n                                    \"戻る\",\r\n                                    \"Return\"\r\n                                )\r\n                            }\r\n                        </LinkButton>\r\n                    </ButtonGroup>\r\n                </Card>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    public componentDidMount(): void {}\r\n\r\n};\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2021-01-03 17:27:40 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2021-01-03 17:38:57\r\n */\r\n\r\nimport React from \"react\";\r\n\r\n\r\nexport interface InputYouProps {\r\n    style?: React.CSSProperties;\r\n};\r\n\r\nexport const InputYou: React.FC<InputYouProps> = props => {\r\n    return (\r\n        <input spellCheck=\"false\"\r\n        style={{\r\n            outline: \"none\",\r\n            background: \"rgba(127,127,127,0.2)\",\r\n            border: \"none\",\r\n            padding: \"0.1em 0.3em\",\r\n            fontFamily: \"ubuntu, 'Yu Mincho', 游明朝, source-code-pro, Menlo, Monaco, \"\r\n                + \"Consolas, 'Courier New', monospace\",\r\n            ...props.style\r\n        }} />\r\n    );\r\n};\r\n","/*\r\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-256, as defined\r\n * in FIPS 180-2\r\n * Version 2.2 Copyright Angel Marin, Paul Johnston 2000 - 2009.\r\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\r\n * Distributed under the BSD License\r\n * See http://pajhome.org.uk/crypt/md5 for details.\r\n * Also http://anmar.eu.org/projects/jssha2/\r\n */\r\n\r\n/*\r\n * Configurable variables. You may need to tweak these to be compatible with\r\n * the server-side, but the defaults work in most cases.\r\n */\r\nlet hexcase: number = 0;  /* hex output format. 0 - lowercase; 1 - uppercase        */\r\nlet b64pad: string = \"\"; /* base-64 pad character. \"=\" for strict RFC compliance   */\r\n\r\n/*\r\n * These are the functions you'll usually want to call\r\n * They take string arguments and return either hex or base-64 encoded strings\r\n */\r\nconst hex_sha256 = (s: string) => { return rstr2hex(rstr_sha256(str2rstr_utf8(s))); }\r\nconst SHA256 = (s: string) => { return rstr2hex(rstr_sha256(str2rstr_utf8(s))); }\r\nexport default SHA256;\r\n\r\nexport function b64_sha256(s: string)    { return rstr2b64(rstr_sha256(str2rstr_utf8(s))); }\r\nexport function any_sha256(s: string, e: string) { return rstr2any(rstr_sha256(str2rstr_utf8(s)), e); }\r\nexport function hex_hmac_sha256(k: string, d: string)\r\n  { return rstr2hex(rstr_hmac_sha256(str2rstr_utf8(k), str2rstr_utf8(d))); }\r\nexport function b64_hmac_sha256(k: string, d: string)\r\n  { return rstr2b64(rstr_hmac_sha256(str2rstr_utf8(k), str2rstr_utf8(d))); }\r\nexport function any_hmac_sha256(k: string, d: string, e: string)\r\n  { return rstr2any(rstr_hmac_sha256(str2rstr_utf8(k), str2rstr_utf8(d)), e); }\r\n\r\n/*\r\n * Perform a simple self-test to see if the VM is working\r\n */\r\nexport function sha256_vm_test()\r\n{\r\n  return hex_sha256(\"abc\").toLowerCase() ===\r\n            \"ba7816bf8f01cfea414140de5dae2223b00361a396177a9cb410ff61f20015ad\";\r\n}\r\n\r\n/*\r\n * Calculate the sha256 of a raw string\r\n */\r\nfunction rstr_sha256(s: string)\r\n{\r\n  return binb2rstr(binb_sha256(rstr2binb(s), s.length * 8));\r\n}\r\n\r\n/*\r\n * Calculate the HMAC-sha256 of a key and some data (raw strings)\r\n */\r\nfunction rstr_hmac_sha256(key: string, data: string)\r\n{\r\n  var bkey = rstr2binb(key);\r\n  if(bkey.length > 16) bkey = binb_sha256(bkey, key.length * 8);\r\n\r\n  var ipad = Array(16), opad = Array(16);\r\n  for(var i = 0; i < 16; i++)\r\n  {\r\n    ipad[i] = bkey[i] ^ 0x36363636;\r\n    opad[i] = bkey[i] ^ 0x5C5C5C5C;\r\n  }\r\n\r\n  var hash = binb_sha256(ipad.concat(rstr2binb(data)), 512 + data.length * 8);\r\n  return binb2rstr(binb_sha256(opad.concat(hash), 512 + 256));\r\n}\r\n\r\n/*\r\n * Convert a raw string to a hex string\r\n */\r\nfunction rstr2hex(input: string) {\r\n  var hex_tab = hexcase ? \"0123456789ABCDEF\" : \"0123456789abcdef\";\r\n  var output = \"\";\r\n  var x;\r\n  for(var i = 0; i < input.length; i++)\r\n  {\r\n    x = input.charCodeAt(i);\r\n    output += hex_tab.charAt((x >>> 4) & 0x0F)\r\n           +  hex_tab.charAt( x        & 0x0F);\r\n  }\r\n  return output;\r\n}\r\n\r\n/*\r\n * Convert a raw string to a base-64 string\r\n */\r\nfunction rstr2b64(input: string) {\r\n  var tab = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n  var output = \"\";\r\n  var len = input.length;\r\n  for(var i = 0; i < len; i += 3)\r\n  {\r\n    var triplet = (input.charCodeAt(i) << 16)\r\n                | (i + 1 < len ? input.charCodeAt(i+1) << 8 : 0)\r\n                | (i + 2 < len ? input.charCodeAt(i+2)      : 0);\r\n    for(var j = 0; j < 4; j++)\r\n    {\r\n      if(i * 8 + j * 6 > input.length * 8) output += b64pad;\r\n      else output += tab.charAt((triplet >>> 6*(3-j)) & 0x3F);\r\n    }\r\n  }\r\n  return output;\r\n}\r\n\r\n/*\r\n * Convert a raw string to an arbitrary string encoding\r\n */\r\nfunction rstr2any(input: string, encoding: string) {\r\n  var divisor = encoding.length;\r\n  var remainders = new Array<number>();\r\n  var i, q, x, quotient;\r\n\r\n  /* Convert to an array of 16-bit big-endian values, forming the dividend */\r\n  var dividend = Array(Math.ceil(input.length / 2));\r\n  for(i = 0; i < dividend.length; i++)\r\n  {\r\n    dividend[i] = (input.charCodeAt(i * 2) << 8) | input.charCodeAt(i * 2 + 1);\r\n  }\r\n\r\n  /*\r\n   * Repeatedly perform a long division. The binary array forms the dividend,\r\n   * the length of the encoding is the divisor. Once computed, the quotient\r\n   * forms the dividend for the next step. We stop when the dividend is zero.\r\n   * All remainders are stored for later use.\r\n   */\r\n  while(dividend.length > 0)\r\n  {\r\n    quotient = new Array<number>();\r\n    x = 0;\r\n    for(i = 0; i < dividend.length; i++)\r\n    {\r\n      x = (x << 16) + dividend[i];\r\n      q = Math.floor(x / divisor);\r\n      x -= q * divisor;\r\n      if(quotient.length > 0 || q > 0)\r\n        quotient[quotient.length] = q;\r\n    }\r\n    remainders[remainders.length] = x;\r\n    dividend = quotient;\r\n  }\r\n\r\n  /* Convert the remainders to the output string */\r\n  var output = \"\";\r\n  for(i = remainders.length - 1; i >= 0; i--)\r\n    output += encoding.charAt(remainders[i]);\r\n\r\n  /* Append leading zero equivalents */\r\n  var full_length = Math.ceil(input.length * 8 /\r\n                                    (Math.log(encoding.length) / Math.log(2)))\r\n  for(i = output.length; i < full_length; i++)\r\n    output = encoding[0] + output;\r\n\r\n  return output;\r\n}\r\n\r\n/*\r\n * Encode a string as utf-8.\r\n * For efficiency, this assumes the input is valid utf-16.\r\n */\r\nfunction str2rstr_utf8(input: string) {\r\n  var output = \"\";\r\n  var i = -1;\r\n  var x, y;\r\n\r\n  while(++i < input.length)\r\n  {\r\n    /* Decode utf-16 surrogate pairs */\r\n    x = input.charCodeAt(i);\r\n    y = i + 1 < input.length ? input.charCodeAt(i + 1) : 0;\r\n    if(0xD800 <= x && x <= 0xDBFF && 0xDC00 <= y && y <= 0xDFFF)\r\n    {\r\n      x = 0x10000 + ((x & 0x03FF) << 10) + (y & 0x03FF);\r\n      i++;\r\n    }\r\n\r\n    /* Encode output as utf-8 */\r\n    if(x <= 0x7F)\r\n      output += String.fromCharCode(x);\r\n    else if(x <= 0x7FF)\r\n      output += String.fromCharCode(0xC0 | ((x >>> 6 ) & 0x1F),\r\n                                    0x80 | ( x         & 0x3F));\r\n    else if(x <= 0xFFFF)\r\n      output += String.fromCharCode(0xE0 | ((x >>> 12) & 0x0F),\r\n                                    0x80 | ((x >>> 6 ) & 0x3F),\r\n                                    0x80 | ( x         & 0x3F));\r\n    else if(x <= 0x1FFFFF)\r\n      output += String.fromCharCode(0xF0 | ((x >>> 18) & 0x07),\r\n                                    0x80 | ((x >>> 12) & 0x3F),\r\n                                    0x80 | ((x >>> 6 ) & 0x3F),\r\n                                    0x80 | ( x         & 0x3F));\r\n  }\r\n  return output;\r\n}\r\n\r\n/*\r\n * Encode a string as utf-16\r\n */\r\nexport function str2rstr_utf16le(input: string) {\r\n  var output = \"\";\r\n  for(var i = 0; i < input.length; i++)\r\n    output += String.fromCharCode( input.charCodeAt(i)        & 0xFF,\r\n                                  (input.charCodeAt(i) >>> 8) & 0xFF);\r\n  return output;\r\n}\r\n\r\nexport function str2rstr_utf16be(input: string) {\r\n  var output = \"\";\r\n  for(var i = 0; i < input.length; i++)\r\n    output += String.fromCharCode((input.charCodeAt(i) >>> 8) & 0xFF,\r\n                                   input.charCodeAt(i)        & 0xFF);\r\n  return output;\r\n}\r\n\r\n/*\r\n * Convert a raw string to an array of big-endian words\r\n * Characters >255 have their high-byte silently ignored.\r\n */\r\nexport function rstr2binb(input: string) {\r\n  var output = Array(input.length >> 2);\r\n  for(let i = 0; i < output.length; i++)\r\n    output[i] = 0;\r\n  for(let i = 0; i < input.length * 8; i += 8)\r\n    output[i>>5] |= (input.charCodeAt(i / 8) & 0xFF) << (24 - i % 32);\r\n  return output;\r\n}\r\n\r\n/*\r\n * Convert an array of big-endian words to a string\r\n */\r\nfunction binb2rstr(input: number[]) {\r\n  var output = \"\";\r\n  for(let i: number = 0; i < input.length * 32; i += 8)\r\n    output += String.fromCharCode((input[i>>5] >>> (24 - i % 32)) & 0xFF);\r\n  return output;\r\n}\r\n\r\n/*\r\n * Main sha256 function, with its support functions\r\n */\r\nfunction sha256_S (X: number, n: number) {return ( X >>> n ) | (X << (32 - n));}\r\nfunction sha256_R (X: number, n: number) {return ( X >>> n );}\r\nfunction sha256_Ch(x: number, y: number, z: number) {return ((x & y) ^ ((~x) & z));}\r\nfunction sha256_Maj(x: number, y: number, z: number) {return ((x & y) ^ (x & z) ^ (y & z));}\r\nfunction sha256_Sigma0256(x: number) {return (sha256_S(x, 2) ^ sha256_S(x, 13) ^ sha256_S(x, 22));}\r\nfunction sha256_Sigma1256(x: number) {return (sha256_S(x, 6) ^ sha256_S(x, 11) ^ sha256_S(x, 25));}\r\nfunction sha256_Gamma0256(x: any) {return (sha256_S(x, 7) ^ sha256_S(x, 18) ^ sha256_R(x, 3));}\r\nfunction sha256_Gamma1256(x: any) {return (sha256_S(x, 17) ^ sha256_S(x, 19) ^ sha256_R(x, 10));}\r\nexport function sha256_Sigma0512(x: any) {return (sha256_S(x, 28) ^ sha256_S(x, 34) ^ sha256_S(x, 39));}\r\nexport function sha256_Sigma1512(x: any) {return (sha256_S(x, 14) ^ sha256_S(x, 18) ^ sha256_S(x, 41));}\r\nexport function sha256_Gamma0512(x: any) {return (sha256_S(x, 1)  ^ sha256_S(x, 8) ^ sha256_R(x, 7));}\r\nexport function sha256_Gamma1512(x: any) {return (sha256_S(x, 19) ^ sha256_S(x, 61) ^ sha256_R(x, 6));}\r\n\r\nvar sha256_K = new Array<number>\r\n(\r\n  1116352408, 1899447441, -1245643825, -373957723, 961987163, 1508970993,\r\n  -1841331548, -1424204075, -670586216, 310598401, 607225278, 1426881987,\r\n  1925078388, -2132889090, -1680079193, -1046744716, -459576895, -272742522,\r\n  264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986,\r\n  -1740746414, -1473132947, -1341970488, -1084653625, -958395405, -710438585,\r\n  113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291,\r\n  1695183700, 1986661051, -2117940946, -1838011259, -1564481375, -1474664885,\r\n  -1035236496, -949202525, -778901479, -694614492, -200395387, 275423344,\r\n  430227734, 506948616, 659060556, 883997877, 958139571, 1322822218,\r\n  1537002063, 1747873779, 1955562222, 2024104815, -2067236844, -1933114872,\r\n  -1866530822, -1538233109, -1090935817, -965641998\r\n);\r\n\r\nfunction binb_sha256(m: number[], l: number) {\r\n  const HASH = new Array<number>(1779033703, -1150833019, 1013904242, -1521486534,\r\n                       1359893119, -1694144372, 528734635, 1541459225);\r\n  var W = new Array(64);\r\n  var a, b, c, d, e, f, g, h;\r\n  var i, j, T1, T2;\r\n\r\n  /* append padding */\r\n  m[l >> 5] |= 0x80 << (24 - l % 32);\r\n  m[((l + 64 >> 9) << 4) + 15] = l;\r\n\r\n  for(i = 0; i < m.length; i += 16)\r\n  {\r\n    a = HASH[0];\r\n    b = HASH[1];\r\n    c = HASH[2];\r\n    d = HASH[3];\r\n    e = HASH[4];\r\n    f = HASH[5];\r\n    g = HASH[6];\r\n    h = HASH[7];\r\n\r\n    for(j = 0; j < 64; j++)\r\n    {\r\n      if (j < 16) W[j] = m[j + i];\r\n      else W[j] = safe_add(safe_add(safe_add(sha256_Gamma1256(W[j - 2]), W[j - 7]),\r\n                                            sha256_Gamma0256(W[j - 15])), W[j - 16]);\r\n\r\n      T1 = safe_add(safe_add(safe_add(safe_add(h, sha256_Sigma1256(e)), sha256_Ch(e, f, g)),\r\n                                                          sha256_K[j]), W[j]);\r\n      T2 = safe_add(sha256_Sigma0256(a), sha256_Maj(a, b, c));\r\n      h = g;\r\n      g = f;\r\n      f = e;\r\n      e = safe_add(d, T1);\r\n      d = c;\r\n      c = b;\r\n      b = a;\r\n      a = safe_add(T1, T2);\r\n    }\r\n\r\n    HASH[0] = safe_add(a, HASH[0]);\r\n    HASH[1] = safe_add(b, HASH[1]);\r\n    HASH[2] = safe_add(c, HASH[2]);\r\n    HASH[3] = safe_add(d, HASH[3]);\r\n    HASH[4] = safe_add(e, HASH[4]);\r\n    HASH[5] = safe_add(f, HASH[5]);\r\n    HASH[6] = safe_add(g, HASH[6]);\r\n    HASH[7] = safe_add(h, HASH[7]);\r\n  }\r\n  return HASH;\r\n}\r\n\r\nfunction safe_add (x: number, y: number) {\r\n  var lsw = (x & 0xFFFF) + (y & 0xFFFF);\r\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\n  return (msw << 16) | (lsw & 0xFFFF);\r\n}\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2021-01-03 17:48:38 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2021-01-03 19:12:59\r\n */\r\n\r\nimport React, { useRef, useLayoutEffect } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Card, TextNodeV3 } from \"../cards/Card\";\r\nimport { TextV3 } from \"../TypesV3\";\r\nimport { InputYou } from \"../interactive/InputYou\";\r\nimport { ButtonGroup } from \"../interactive/ButtonGroup\";\r\nimport SHA256 from \"../tools/SHA256\";\r\n\r\n\r\nexport interface PermissionCheckProps {\r\n    hashCode: string;\r\n    onExit: (permitted: boolean) => void;\r\n};\r\n\r\nexport const PermissionCheck: React.FC<PermissionCheckProps> = props => {\r\n    const ref = useRef() as React.RefObject<HTMLDivElement>;\r\n\r\n    useLayoutEffect(() => {\r\n        const input = ref.current!.getElementsByTagName(\r\n            \"input\"\r\n        )[0] as HTMLInputElement;\r\n        input.focus();\r\n    });\r\n\r\n    return (\r\n        <div style={{\r\n            zIndex: 99999,\r\n            cursor: \"not-allowed\",\r\n            backgroundColor: \"rgba(0,0,0,0.8)\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            position: \"fixed\",\r\n            left: 0,\r\n            top: 0,\r\n            width: \"100vw\",\r\n            height: \"100vh\",\r\n            overflow: \"hidden\"\r\n        }} >\r\n            <Card key=\"main\"\r\n            style={{\r\n                padding: \"3vh 6vw\"\r\n            }} >\r\n                <div key=\"bg0\" ref={ ref }\r\n                style={{\r\n                    display: \"flex\",\r\n                    flexDirection: \"column\",\r\n                    alignItems: \"stretch\",\r\n                    justifyContent: \"space-between\",\r\n                    cursor: \"auto\"\r\n                }} >\r\n                    <label>Security Check</label>\r\n                    <InputYou\r\n                    style={{\r\n                        marginTop: \"10px\",\r\n                        color: \"rgba(35,89,127,0)\",\r\n                        caretColor: \"rgb(0,0,0)\"\r\n                    }} />\r\n                    <ButtonGroup style={{\r\n                        marginTop: \"20px\"\r\n                    }} >\r\n                        <div key=\"apply\"\r\n                        style={{\r\n                            display: \"inline-block\",\r\n                            textAlign: \"center\",\r\n                            cursor: \"pointer\",\r\n                            minWidth: \"2.8em\",\r\n                            padding: \"0.2em 0.8em\",\r\n                            background: \"rgb(24,31,40)\",\r\n                            color: \"rgb(249,225,161)\",\r\n                            border: \"1px solid rgb(249,225,161)\"\r\n                        }}\r\n                        onClick={\r\n                            () => {\r\n                                const input = ref.current!.getElementsByTagName(\r\n                                    \"input\"\r\n                                )[0] as HTMLInputElement;\r\n\r\n                                if (SHA256(input.value) === props.hashCode) {\r\n                                    props.onExit(true);\r\n                                }\r\n\r\n                                input.value = \"\";\r\n                                input.focus();\r\n                            }\r\n                        } >\r\n                            <TextNodeV3>\r\n                                {\r\n                                    new TextV3(\r\n                                        \"apply\",\r\n                                        \"apply\",\r\n                                        \"apply\"\r\n                                    )\r\n                                }\r\n                            </TextNodeV3>\r\n                        </div>\r\n                        <div key=\"cancel\"\r\n                        style={{\r\n                            display: \"inline-block\",\r\n                            textAlign: \"center\",\r\n                            cursor: \"pointer\",\r\n                            minWidth: \"2.8em\",\r\n                            padding: \"0.1em 0.6em 0.12em\",\r\n                            color: \"rgb(24,31,40)\",\r\n                            border: \"1px solid rgb(24,31,40)\"\r\n                        }}\r\n                        onClick={\r\n                            () => {\r\n                                const input = ref.current!.getElementsByTagName(\r\n                                    \"input\"\r\n                                )[0] as HTMLInputElement;\r\n                                input.value = \"\";\r\n\r\n                                props.onExit(false);\r\n                            }\r\n                        } >\r\n                            <TextNodeV3>\r\n                                {\r\n                                    new TextV3(\r\n                                        \"cancel\",\r\n                                        \"cancel\",\r\n                                        \"cancel\"\r\n                                    )\r\n                                }\r\n                            </TextNodeV3>\r\n                        </div>\r\n                    </ButtonGroup>\r\n                </div>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const createPermissionCheck = (props: PermissionCheckProps) => {\r\n    const portal = ReactDOM.createPortal((\r\n        <PermissionCheck { ...props } />\r\n    ), document.getElementById(\"root\")!);\r\n    \r\n    return portal;\r\n};\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2021-01-03 17:11:05 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2021-01-16 16:55:39\r\n */\r\n\r\nimport React, { useRef } from \"react\";\r\nimport { Card, TextNodeV3, HTMLNodeV3 } from \"../cards/Card\";\r\nimport { TextV3 } from \"../TypesV3\";\r\nimport { ButtonGroup } from \"../interactive/ButtonGroup\";\r\nimport { LinkButton } from \"../interactive/LinkButton\";\r\nimport { InputYou } from \"../interactive/InputYou\";\r\nimport { createPermissionCheck } from \"../coveries/PermissionCheck\";\r\n\r\n\r\n/**\r\n * 这个页面级组件渲染对应地址 /storage .\r\n */\r\nexport const StoragePage: React.FC = () => {\r\n    const btnReturn: {\r\n        trigger?: (() => void) | undefined;\r\n    } = {};\r\n\r\n    const [state, setState] = React.useState<{\r\n        portal: React.ReactPortal | null;\r\n        url: string | null;\r\n    }>({\r\n        portal: null,\r\n        url: null\r\n    });\r\n\r\n    const anchor = useRef() as React.RefObject<HTMLAnchorElement>;\r\n\r\n    React.useEffect(() => {\r\n        if (state.url === null) {\r\n            setState({\r\n                portal: createPermissionCheck({\r\n                    hashCode: \"be9f3f243a7b0569f2446233339257a024dee8ca0c435b9be22562ed2b3b61b6\",\r\n                    onExit: permitted => {\r\n                        if (permitted) {\r\n                            setState({\r\n                                portal: null,\r\n                                url: \"\"\r\n                            });\r\n                        } else {\r\n                            btnReturn.trigger!();\r\n                        }\r\n                    }\r\n                }),\r\n                url: \"\"\r\n            });\r\n        }\r\n    }, [state, setState, btnReturn, anchor]);\r\n\r\n    return (\r\n        <div style={{\r\n            height: \"90vh\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\"\r\n        }} >\r\n            { state.portal }\r\n            <Card key=\"main\"\r\n            style={{\r\n                backgroundColor: \"rgb(24,31,40)\",\r\n                color: \"rgb(160,201,175)\"\r\n            }} >\r\n                <header>\r\n                    <TextNodeV3>\r\n                        {\r\n                            new TextV3(\r\n                                \"资源\",\r\n                                \"検索\",\r\n                                \"GET\"\r\n                            )\r\n                        }\r\n                    </TextNodeV3>\r\n                </header>\r\n                <div key=\"bg0\" id=\"input0\"\r\n                style={{\r\n                    display: \"flex\",\r\n                    flexDirection: \"column\",\r\n                    alignItems: \"stretch\",\r\n                    justifyContent: \"space-between\"\r\n                }} >\r\n                    <InputYou\r\n                    style={{\r\n                        color: \"rgb(70,178,254)\"\r\n                    }} />\r\n                </div>\r\n            </Card>\r\n            <Card key=\"btn\"\r\n            style={{\r\n                backgroundColor: \"rgb(24,31,40)\",\r\n                color: \"rgb(160,201,175)\"\r\n            }} >\r\n                <ButtonGroup>\r\n                    <div\r\n                    style={{\r\n                        display: \"inline-block\",\r\n                        textAlign: \"center\",\r\n                        cursor: \"pointer\",\r\n                        minWidth: \"2.8em\",\r\n                        padding: \"0.2em 0.8em\",\r\n                        background: \"rgb(24,31,40)\",\r\n                        color: \"rgb(249,225,161)\",\r\n                        border: \"1px solid rgb(249,225,161)\"\r\n                    }}\r\n                    onClick={\r\n                        () => {\r\n                            const input = document.getElementById(\r\n                                \"input0\"\r\n                            )!.getElementsByTagName(\"input\")[0] as HTMLInputElement;\r\n\r\n                            anchor.current!.href = `/result/${ input.value }`;\r\n                            anchor.current!.click();\r\n                        }\r\n                    } >\r\n                        <HTMLNodeV3>\r\n                            {\r\n                                new TextV3(\r\n                                    \"apply\",\r\n                                    \"apply\",\r\n                                    \"apply\"\r\n                                )\r\n                            }\r\n                        </HTMLNodeV3>\r\n                    </div>\r\n                    <div key=\"a\"\r\n                    style={{\r\n                        width: 0,\r\n                        overflow: \"hidden\"\r\n                    }} >\r\n                        <a href={ state.url ?? \"\" } ref={ anchor } >1</a>\r\n                    </div>\r\n                    <LinkButton to=\"/\" handle={ btnReturn }\r\n                    style={{\r\n                        fontSize: \"100%\"\r\n                    }} >\r\n                        {\r\n                            new TextV3(\r\n                                \"回到主页\",\r\n                                \"戻る\",\r\n                                \"Return\"\r\n                            )\r\n                        }\r\n                    </LinkButton>\r\n                </ButtonGroup>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-12-09 18:20:50 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2021-01-16 20:16:14\r\n */\r\n\r\nimport React, { Component } from \"react\";\r\nimport { Lang } from \"../TypesV3\";\r\nimport { connect } from \"react-redux\";\r\nimport { LangConfig } from \"../reducers/LangConfig\";\r\nimport Design from \"../design/design\";\r\n\r\n\r\ninterface FfLangOptionProps {\r\n    lang: Lang;\r\n    setLang: (lang: Lang) => any;\r\n};\r\n\r\ninterface FfLangOptionState {\r\n    opened: boolean;\r\n};\r\n\r\n// @ts-ignore\r\n@connect(LangConfig.mapStateToProps, LangConfig.mapDispatchToProps)\r\nclass FfLangOption extends Component<FfLangOptionProps, FfLangOptionState> {\r\n\r\n    public constructor(props: FfLangOptionProps) {\r\n        super(props);\r\n        this.state = {\r\n            opened: false\r\n        };\r\n    }\r\n\r\n    public render(): JSX.Element {\r\n        return (\r\n            <div>\r\n                <label key=\"chosen\" title=\"language\" tabIndex={ 1 }\r\n                onClick={\r\n                    () => {\r\n                        this.setState({\r\n                            opened: !this.state.opened\r\n                        });\r\n                    }\r\n                } >\r\n                    <span>\r\n                        { this.props.lang }\r\n                    </span>\r\n                    <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 10 10\" >\r\n                        <path d=\"M2,5 L5,8 L8,5\" />\r\n                    </svg>\r\n                </label>\r\n                {\r\n                    this.state.opened ? (\r\n                        ([\"CH\", \"JP\", \"EN\"] as Array<Lang>).map(d => {\r\n                            return (\r\n                                <label key={ d } className=\"option\" tabIndex={ 1 }\r\n                                style={{\r\n                                    cursor: d !== this.props.lang ? \"pointer\" : \"default\",\r\n                                    color: d === this.props.lang ? Design.white : undefined\r\n                                }}\r\n                                onClick={\r\n                                    () => {\r\n                                        if (d !== this.props.lang) {\r\n                                            this.props.setLang(d);\r\n                                        }\r\n                                        this.setState({\r\n                                            opened: false\r\n                                        });\r\n                                    }\r\n                                } >\r\n                                    { d }\r\n                                </label>\r\n                            );\r\n                        })\r\n                    ) : null\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n};\r\n\r\nexport const LangOption: React.FC = _props => {\r\n    return (\r\n        // @ts-ignore\r\n        <FfLangOption />\r\n    );\r\n};\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-12-09 18:20:50 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2021-01-16 20:15:53\r\n */\r\n\r\nimport React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { SchemeConfig, ColorScheme } from \"../reducers/SchemeConfig\";\r\nimport Design from \"../design/design\";\r\n\r\n\r\ninterface FfSchemeOptionProps {\r\n    scheme:     ColorScheme;\r\n    setScheme:  (scheme: ColorScheme) => any;\r\n};\r\n\r\ninterface FfSchemeOptionState {\r\n    opened: boolean;\r\n};\r\n\r\n// @ts-ignore\r\n@connect(SchemeConfig.mapStateToProps, SchemeConfig.mapDispatchToProps)\r\nclass FfSchemeOption extends Component<FfSchemeOptionProps, FfSchemeOptionState> {\r\n\r\n    public constructor(props: FfSchemeOptionProps) {\r\n        super(props);\r\n        this.state = {\r\n            opened: false\r\n        };\r\n    }\r\n\r\n    public render(): JSX.Element {\r\n        return (\r\n            <div>\r\n                <label key=\"chosen\" title=\"color scheme\" tabIndex={ 1 }\r\n                onClick={\r\n                    () => {\r\n                        this.setState({\r\n                            opened: !this.state.opened\r\n                        });\r\n                    }\r\n                } >\r\n                    <span>\r\n                        { this.props.scheme }\r\n                    </span>\r\n                    <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 10 10\" >\r\n                        <path d=\"M2,5 L5,8 L8,5\" />\r\n                    </svg>\r\n                </label>\r\n                {\r\n                    this.state.opened ? (\r\n                        ([\"light\", \"dark\"] as Array<ColorScheme>).map(d => {\r\n                            return (\r\n                                <label key={ d } className=\"option\" tabIndex={ 1 }\r\n                                style={{\r\n                                    cursor: d !== this.props.scheme ? \"pointer\" : \"default\",\r\n                                    color: d === this.props.scheme ? Design.white : undefined\r\n                                }}\r\n                                onClick={\r\n                                    () => {\r\n                                        if (d !== this.props.scheme) {\r\n                                            this.props.setScheme(d);\r\n                                        }\r\n                                        this.setState({\r\n                                            opened: false\r\n                                        });\r\n                                    }\r\n                                } >\r\n                                    { d }\r\n                                </label>\r\n                            );\r\n                        })\r\n                    ) : null\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n};\r\n\r\nexport const SchemeOption: React.FC = _props => {\r\n    return (\r\n        // @ts-ignore\r\n        <FfSchemeOption />\r\n    );\r\n};\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2021-01-16 17:11:10 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2021-01-16 19:46:02\r\n */\r\n\r\nimport React, { Component } from \"react\";\r\nimport { LangOption } from \"../interactive/LangOption\";\r\nimport { createStyle, StyledWrapperCC } from \"reacss\";\r\nimport Design from \"../design/design\";\r\nimport { ColorScheme, SchemeConfig } from \"../reducers/SchemeConfig\";\r\nimport { connect } from \"react-redux\";\r\nimport { SchemeOption } from \"../interactive/SchemeOption\";\r\n\r\n\r\nconst OptionMenuSchemeLight = createStyle({\r\n    \"div\": {\r\n        position:       \"fixed\",\r\n        top:            \"2vh\",\r\n        right:          \"6px\",\r\n        minWidth:       \"16vw\",\r\n        width:          \"min-content\",\r\n        maxWidth:       \"20vw\",\r\n        filter:         \"drop-shadow(1px 1px 2.4px black)\",\r\n        display:        \"flex\",\r\n        flexWrap:       \"wrap-reverse\",\r\n        alignItems:     \"flex-end\",\r\n        justifyContent: \"space-around\",\r\n        zIndex:         100\r\n    },\r\n    \"div > div\": {\r\n        margin:         \"6px 0\",\r\n        width:          \"80px\",\r\n        display:        \"flex\",\r\n        flexDirection:  \"column\",\r\n        alignItems:     \"stretch\",\r\n        justifyContent: \"flex-start\"\r\n    },\r\n    \"div > div > label\": {\r\n        padding:        \"0.1rem 0.4rem\",\r\n        cursor:         \"pointer\",\r\n        display:        \"flex\",\r\n        alignItems:     \"center\",\r\n        justifyContent: \"center\",\r\n        outline:        \"none\"\r\n    },\r\n    \"div > div > label:first-child\": {\r\n        border:         `1px solid ${ Design.white }`,\r\n        borderRadius:   \"0.4rem\",\r\n        color:          \"rgb(246,246,246)\",\r\n        transition:     \"color 0.2s\"\r\n    },\r\n    \"div > div > label:first-child:hover\": {\r\n        color:          \"rgb(24,31,40)\",\r\n        backgroundColor:\"rgb(246,246,246)\"\r\n    },\r\n    \"div > div > label:first-child~label\": {\r\n        background:     Design.black,\r\n        color:          \"rgb(180,195,202)\",\r\n        transition:     \"color 0.2s\"\r\n    },\r\n    \"div > div > label:first-child~label:hover\": {\r\n        color:          \"rgb(249,225,161)\"\r\n    },\r\n    \"div > div > label > span\": {\r\n        display:        \"inline-block\",\r\n        width:          \"3rem\",\r\n        flex:           1,\r\n        pointerEvents:  \"none\"\r\n    },\r\n    \"div > div > label > svg\": {\r\n        pointerEvents:  \"none\"\r\n    },\r\n    \"div > div > label > svg > path\": {\r\n        fill:           \"none\",\r\n        stroke:         \"rgb(246,246,246)\",\r\n        transition:     \"stroke 2s\"\r\n    },\r\n    \"div > div > label:hover > svg > path\": {\r\n        stroke:         \"rgb(24,31,40)\"\r\n    }\r\n});\r\n\r\nconst OptionMenuSchemeDark = OptionMenuSchemeLight;\r\n\r\n// @ts-ignore\r\n@connect(SchemeConfig.mapStateToProps)\r\n// @ts-ignore\r\nexport class OptionMenu extends Component {\r\n    public render(): JSX.Element {\r\n        const scheme: ColorScheme = (this.props as { scheme: ColorScheme }).scheme;\r\n        const style = scheme === \"dark\" ? OptionMenuSchemeDark : OptionMenuSchemeLight;\r\n\r\n        return (\r\n            <StyledWrapperCC { ...style } >\r\n                <div>\r\n                    <SchemeOption />\r\n                    <LangOption />\r\n                </div>\r\n            </StyledWrapperCC>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport './window.css';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport { Home } from './pages/Home';\r\nimport { BadUrl } from './pages/BadUrl';\r\nimport { Papers } from './pages/Papers';\r\nimport { StoragePage } from './pages/StoragePage';\r\nimport { createStyle } from 'reacss';\r\nimport { OptionMenu } from './containers/OptionMenu';\r\nimport { SchemeConfig, ColorScheme } from \"./reducers/SchemeConfig\";\r\nimport { connect } from 'react-redux';\r\n\r\n\r\nexport interface AppV3Props {\r\n  scheme: ColorScheme;\r\n};\r\n\r\nconst AppSchemeLight = createStyle({\r\n  \"div\": {\r\n    textAlign:      'center',\r\n    fontFamily:     \"var(--monospace)\",\r\n    scrollBehavior: \"smooth\",\r\n    textRendering:  \"optimizeSpeed\",  /* 渲染速度优先 */\r\n    width:          '100vw',\r\n    minHeight:      '100vh',\r\n    background:     'radial-gradient(circle at 50% 57%,'\r\n                    + ' rgb(243,236,189), rgb(243,236,189) 8%,'\r\n                    + ' rgb(182,223,155) 14%, rgb(176,221,155) 22%,'\r\n                    + ' rgb(113,199,141) 40%, rgb(101,176,130),'\r\n                    + ' rgb(90,159,117), rgb(53,64,71) 122%'\r\n                    + ')'\r\n  }\r\n});\r\n\r\nconst AppSchemeDark = createStyle({\r\n  \"div\": {\r\n    textAlign:      'center',\r\n    fontFamily:     \"var(--monospace)\",\r\n    scrollBehavior: \"smooth\",\r\n    textRendering:  \"optimizeSpeed\",  /* 渲染速度优先 */\r\n    width:          '100vw',\r\n    minHeight:      '100vh',\r\n    background:     'radial-gradient(circle at 50% 57%,'\r\n                    + ' rgb(38,27,27), rgb(38,25,27) 8%,'\r\n                    + ' rgb(37,24,26) 14%, rgb(33,20,28) 22%,'\r\n                    + ' rgb(30,22,36) 40%, rgb(30,14,28),'\r\n                    + ' rgb(20,9,19), rgb(11,6,10) 122%'\r\n                    + ')'\r\n  }\r\n});\r\n\r\n/**\r\n * 默认的最外层渲染元素.\r\n */\r\n// @ts-ignore\r\n@connect(SchemeConfig.mapStateToProps)\r\n// @ts-ignore\r\nclass AppV3 extends Component<AppV3Props> {\r\n\r\n  public render(): JSX.Element {\r\n    const useStyle = this.props.scheme === \"dark\" ? AppSchemeDark : AppSchemeLight;\r\n\r\n    return (\r\n      <>\r\n        <div className={ useStyle.id } >\r\n          <svg width=\"0\" height=\"0\"> \r\n            <filter id=\"filter\">\r\n              <feTurbulence type=\"fractalNoise\" baseFrequency=\".01\" numOctaves=\"6\"></feTurbulence>\r\n              <feDisplacementMap in=\"SourceGraphic\" scale=\"100\"></feDisplacementMap>\r\n            </filter>\r\n          </svg>\r\n          <Router>\r\n            <Switch>\r\n              <Route path=\"/\" exact >\r\n                <Home />\r\n              </Route>\r\n              <Route path=\"/paper\" exact >\r\n                <Papers />\r\n              </Route>\r\n              <Route path=\"/storage\" exact >\r\n                <StoragePage />\r\n              </Route>\r\n              <Route path=\"/**\" >\r\n                <BadUrl />\r\n              </Route>\r\n            </Switch>\r\n          </Router>\r\n        </div>\r\n        <OptionMenu />\r\n      </>\r\n    );\r\n  }\r\n};\r\n\r\nexport default AppV3;\r\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-12-05 19:52:14 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2020-12-06 00:38:45\r\n */\r\n\r\nexport type VersionID = 2 | 3;\r\n\r\nexport interface PageConfigReduxState {\r\n    version: VersionID;\r\n};\r\n\r\nexport type PageConfigActionType = (\r\n    \"SWITCH_VERSION\"\r\n);\r\n\r\nexport type PageConfigReduxAction<AT extends PageConfigActionType = PageConfigActionType> = {\r\n    type: AT;\r\n    index: number;\r\n} & (\r\n    AT extends \"SWITCH_VERSION\" ? {\r\n        index: 100;\r\n        version: VersionID;\r\n    } : {}\r\n);\r\n\r\nconst initData: PageConfigReduxState = {\r\n    version: window.location.href.includes(\"v2\") ? 2 : 3\r\n};\r\n\r\nconst jumpToVersion = (versionID: VersionID) => {\r\n    let a: HTMLAnchorElement | null = null;\r\n    switch (versionID) {\r\n        case 2:\r\n            a = document.createElement(\"a\");\r\n            a.href = \"/v2\";\r\n            break;\r\n        case 3:\r\n            a = document.createElement(\"a\");\r\n            a.href = \"/\";\r\n            break;\r\n    }\r\n    if (a) {\r\n        a.click();\r\n    }\r\n};\r\n\r\nexport const PageConfigRedux = (state: PageConfigReduxState = initData, action: PageConfigReduxAction) => {\r\n    switch (action.type) {\r\n        case \"SWITCH_VERSION\":\r\n            if (action.version !== state.version) {\r\n                jumpToVersion(action.version);\r\n                return Object.assign({}, state, { version: action.version });\r\n            }\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n    \r\nexport const PageConfig = {\r\n\r\n    mapStateToProps: (state: { PageConfigRedux: PageConfigReduxState; }) => {\r\n        return Object.assign({}, {\r\n            version: state.PageConfigRedux.version\r\n        });\r\n    },\r\n\r\n    mapDispatchToProps: (dispatch: (action: PageConfigReduxAction) => any) => {\r\n        return {\r\n            setVersion: (versionId: VersionID) => {\r\n                return dispatch({\r\n                    type: \"SWITCH_VERSION\",\r\n                    index: 100,\r\n                    version: versionId\r\n                });\r\n            }\r\n        };\r\n    }\r\n    \r\n};\r\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport AppV2 from './v2/AppV2';\nimport AppV3 from './v3/AppV3';\nimport { PageConfig, VersionID } from \"./v3/reducers/PageConfig\";\n\n\ninterface AppProps {\n  version: VersionID;\n};\n\n/**\n * 默认的最外层渲染元素.\n *\n * @class App\n * @extends {ConnectedComponent<AppProps, {}>}\n */\n// @ts-ignore\n@connect(PageConfig.mapStateToProps)\n// @ts-ignore\nexport default class App extends Component<AppProps> {\n\n  public render(): JSX.Element {\n    const version = this.props.version;\n    // (window as any)['setVersion'] = this.props.setVersion;\n\n    return version === 2 ? (\n      <AppV2 />\n    ) : version === 3 ? (\n      // @ts-ignore\n      <AppV3 />\n    ) : (\n      <></>\n    );\n  }\n\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","/*\r\n * @Author: Kanata You \r\n * @Date: 2020-12-05 19:55:10 \r\n * @Last Modified by: Kanata You\r\n * @Last Modified time: 2021-01-16 16:36:21\r\n */\r\n\r\nimport { createStore, combineReducers } from \"redux\";\r\nimport { PageConfigRedux } from \"./PageConfig\";\r\nimport { LangRedux } from \"./LangConfig\";\r\nimport { SchemeRedux } from \"./SchemeConfig\";\r\n\r\n\r\n// 全局的所有 reducer\r\nconst rootReducers = combineReducers({ PageConfigRedux, LangRedux, SchemeRedux });\r\n\r\n// 第二个可选参数用于初始化\r\nconst store = createStore(rootReducers, {\r\n    // PageConfigRedux: {\r\n    //     version: window.location.href.includes(\"v2\") ? 2 : 3\r\n    // }\r\n});\r\n\r\n\r\nexport default store;\r\n","/*\n * @Author: Kanata You \n * @Date: 2020-12-05 22:45:47 \n * @Last Modified by: Kanata You\n * @Last Modified time: 2020-12-05 22:46:29\n */\n\n// @ts-nocheck\n// 这条指令是为了避免运行时检测 App 组件缺失由 redux 装载的 props 内容\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux';\nimport store from './v3/reducers';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={ store } >\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}